import{r as l,s as p,j as e}from"./index-b0fe075c.js";import{C as g}from"./Card-ccf950ce.js";import{H as x}from"./Header-020c54b4.js";import{N as h}from"./Navigation-6c31880f.js";import{P as m}from"./PaperTradingPerformance-9abba3c9.js";import{P as u}from"./PaperTradingBalance-19e0d9f1.js";import"./Button-02febd66.js";function w(){const[r,i]=l.useState(""),[s,n]=l.useState([]),o=l.useCallback(async()=>{try{const{data:{user:a}}=await p.auth.getUser();if(!a){n([]),i("");return}const{data:c}=await p.from("paper_trading_positions").select("symbol").eq("user_id",a.id).eq("status","open"),d=c&&c.length>0?[...new Set(c.map(t=>t.symbol))].sort():[];n(d),i(t=>d.length===0?"":t==="all"?"all":t&&d.includes(t)?t:"")}catch(a){console.error("Error fetching pairs:",a),n([]),i("")}},[]);return l.useEffect(()=>{o()},[o]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(x,{title:"ðŸ“ Paper Trading Dashboard"}),e.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-6",children:[e.jsxs(g,{className:"p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Trading Pair"}),e.jsxs("select",{value:r,onChange:a=>i(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"-- Select a Pair --"}),e.jsx("option",{value:"all",children:"Select All"}),s.map(a=>e.jsx("option",{value:a,children:a},a))]}),r&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:r==="all"?`Showing report for all pairs (${s.length} pairs)`:e.jsxs(e.Fragment,{children:["Showing report for ",e.jsx("span",{className:"font-semibold",children:r})]})})]}),e.jsx(u,{}),r?e.jsx(m,{selectedPair:r==="all"?"":r,onReset:o}):s.length>0?e.jsxs(g,{className:"p-6 text-center",children:[e.jsx("i",{className:"ri-search-line text-4xl text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Select a Trading Pair"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s.length>0?`Choose a pair from the dropdown above to view detailed performance report and open positions (${s.length} pairs available).`:"No open positions found. Start trading to see positions here."})]}):e.jsx(m,{onReset:o})]}),e.jsx(h,{})]})}export{w as default};
