import{a as re,r as j,j as e,b as T,A as D}from"./index-b0fe075c.js";import{H as ae}from"./Header-020c54b4.js";import{N as le}from"./Navigation-6c31880f.js";import{C as L}from"./Card-ccf950ce.js";import{B as I}from"./Button-02febd66.js";function xe(){const q=re(),[A,Q]=j.useState([]),[P,O]=j.useState(!1),[V,X]=j.useState(null),[b,G]=j.useState("all"),[z,J]=j.useState("performance"),[S,W]=j.useState(1e6),[Y,Z]=j.useState(null),H=async()=>{O(!0),X(null);try{const s=[],t=[];(b==="all"||b==="bybit")&&t.push("bybit"),(b==="all"||b==="okx")&&t.push("okx");for(const l of t)try{let i=[];l==="bybit"?i=await ee(S):l==="okx"&&(i=await se(S)),s.push(...i)}catch(i){console.error(`Error fetching ${l} pairs:`,i)}const n=s.filter(l=>l.volume24h>=S).sort((l,i)=>{switch(z){case"performance":return i.performanceScore-l.performanceScore;case"volume":return i.volume24h-l.volume24h;case"change24h":return i.priceChange24h-l.priceChange24h;case"change30d":return i.priceChange30d-l.priceChange30d;default:return 0}});Q(n)}catch(s){X(s.message||"Failed to fetch futures pairs"),console.error("Error fetching futures pairs:",s)}finally{O(!1)}},ee=async s=>{var n,l,i,c;const t=[];try{const r=await T(`${D.FUTURES_PAIRS}?action=tickers&exchange=bybit`);if(r.retCode===0&&((n=r.result)!=null&&n.list)){const o=r.result.list.map(a=>{const x=parseFloat(a.turnover24h||a.volume24h||"0");return{ticker:a,volumeUsd:x}}).filter(a=>a.volumeUsd>=s).sort((a,x)=>x.volumeUsd-a.volumeUsd).slice(0,50);for(const{ticker:a,volumeUsd:x}of o)try{const v=a.symbol,m=parseFloat(a.lastPrice||0),R=parseFloat(a.price24hPcnt||0)*100,N=x,K=parseFloat(a.highPrice24h||0),$=parseFloat(a.lowPrice24h||0),k=Date.now()-30*24*60*60*1e3,y=await T(`${D.FUTURES_PAIRS}?action=klines&exchange=bybit&symbol=${v}&interval=D&start=${k}&limit=30`);let u=0,F=m,C=m,B=N*30;if(y.retCode===0&&((i=(l=y.result)==null?void 0:l.list)==null?void 0:i.length)>0){const p=y.result.list.reverse(),f=parseFloat(((c=p[0])==null?void 0:c[4])||m);u=(m-f)/f*100;for(const h of p){const U=parseFloat(h[2]||0),E=parseFloat(h[3]||0);U>F&&(F=U),E>0&&E<C&&(C=E)}B=p.reduce((h,U)=>{const E=parseFloat(U[6]||U[5]||0);return h+E},0)}const w=Math.abs(u)/30,M=u*.4+R*.2+(N>0?Math.log10(N/1e6)*10:0)+(100-w*10);t.push({symbol:v,exchange:"bybit",currentPrice:m,priceChange24h:R,priceChange30d:u,volume24h:N,volume30d:B,high24h:K,low24h:$,high30d:F,low30d:C,volatility:w,performanceScore:M})}catch(v){console.error(`Error processing ${a.symbol}:`,v)}}}catch(d){console.error("Error fetching Bybit futures pairs:",d)}return t},se=async s=>{var n,l;const t=[];try{const c=await T(`${D.FUTURES_PAIRS}?action=tickers&exchange=okx`);if(c.code==="0"&&c.data){const d=c.data.map(r=>{const g=parseFloat(r.volUsd24h||r.volCcyQuote24h||r.volCcy24h||r.vol24h||"0");return{ticker:r,volumeUsd:g}}).filter(r=>r.volumeUsd>=s).sort((r,g)=>g.volumeUsd-r.volumeUsd).slice(0,50);for(const{ticker:r,volumeUsd:g}of d)try{const o=r.instId,a=parseFloat(r.last||0),x=parseFloat(r.open24h||0),v=x>0?(a-x)/x*100:0,m=g,R=parseFloat(r.high24h||0),N=parseFloat(r.low24h||0),K=Date.now()-30*24*60*60*1e3,$=await T(`${D.FUTURES_PAIRS}?action=klines&exchange=okx&symbol=${o}&interval=1D&start=${K}&limit=30`);let k=0,y=a,u=a,F=m*30;if($.code==="0"&&((n=$.data)==null?void 0:n.length)>0){const w=$.data.reverse(),M=parseFloat(((l=w[0])==null?void 0:l[4])||a);k=(a-M)/M*100;for(const p of w){const f=parseFloat(p[2]||0),h=parseFloat(p[3]||0);f>y&&(y=f),h>0&&h<u&&(u=h)}F=w.reduce((p,f)=>{const h=parseFloat(f[6]||f[5]||0);return p+h},0)}const C=Math.abs(k)/30,B=k*.4+v*.2+(m>0?Math.log10(m/1e6)*10:0)+(100-C*10);t.push({symbol:o,exchange:"okx",currentPrice:a,priceChange24h:v,priceChange30d:k,volume24h:m,volume30d:F,high24h:R,low24h:N,high30d:y,low30d:u,volatility:C,performanceScore:B})}catch(o){console.error(`Error processing ${r.instId}:`,o)}}}catch(i){console.error("Error fetching OKX futures pairs:",i)}return t};j.useEffect(()=>{H()},[b,z,S]);const te=s=>{const t=s.volatility,n=s.volume24h,l=s.priceChange30d,i=s.priceChange24h;let c="medium";t<1.5&&l>0&&i>-5?c="low":(t>3||Math.abs(i)>15||Math.abs(l)>50)&&(c="high");let d=5;t<1?d=7:t<2?d=5:t<3.5?d=3:d=2;let r=2;t<1?r=1.5:t<2?r=2:t<3.5?r=3:r=4;const g=r*2.5;let o=100;n>1e8?o=200:n>5e7?o=150:n>1e7?o=100:o=50;let a="1h";t<1?a="4h":t<2?a="1h":a="15m";const x=`Based on ${s.symbol}'s ${t.toFixed(2)}% volatility, ${(n/1e6).toFixed(1)}M 24h volume, and ${l>=0?"+":""}${l.toFixed(2)}% 30d performance, we recommend ${c} risk settings with ${d}x leverage.`;return{leverage:d,riskLevel:c,tradeAmount:o,stopLoss:r,takeProfit:g,timeframe:a,reasoning:x}},_=(s,t)=>{const n=new URLSearchParams({symbol:s.symbol,exchange:s.exchange,tradingType:"futures"});t&&(n.append("leverage",t.leverage.toString()),n.append("riskLevel",t.riskLevel),n.append("tradeAmount",t.tradeAmount.toString()),n.append("stopLoss",t.stopLoss.toString()),n.append("takeProfit",t.takeProfit.toString()),n.append("timeframe",t.timeframe)),q(`/create-bot?${n.toString()}`)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ae,{title:"Futures Pairs Finder",action:e.jsxs(I,{variant:"secondary",size:"sm",onClick:H,disabled:P,children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),P?"Loading...":"Refresh"]})}),e.jsx("div",{className:"pt-20 pb-20 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4",children:[e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange"}),e.jsxs("select",{value:b,onChange:s=>G(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Exchanges"}),e.jsx("option",{value:"bybit",children:"Bybit"}),e.jsx("option",{value:"okx",children:"OKX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:z,onChange:s=>J(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"performance",children:"Performance Score"}),e.jsx("option",{value:"volume",children:"24h Volume"}),e.jsx("option",{value:"change24h",children:"24h Change"}),e.jsx("option",{value:"change30d",children:"30d Change"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min 24h Volume ($)"}),e.jsx("input",{type:"number",value:S,onChange:s=>W(parseFloat(s.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"1000000"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["Found: ",e.jsx("span",{className:"font-bold text-gray-900",children:A.length})," pairs"]})})]})}),V&&e.jsx(L,{className:"p-4 bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[e.jsx("i",{className:"ri-error-warning-line"}),e.jsx("span",{children:V})]})}),P&&e.jsx(L,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Analyzing futures pairs..."})]})}),!P&&A.length===0&&!V&&e.jsx(L,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-search-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pairs found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or check your API connections"})]})}),!P&&A.length>0&&e.jsx("div",{className:"space-y-3",children:A.map(s=>{const t=te(s),n=`${s.exchange}-${s.symbol}`,l=Y===n;return e.jsx(L,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.symbol}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:s.exchange.toUpperCase()}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:["Performance: ",s.performanceScore.toFixed(1)]}),e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded ${t.riskLevel==="low"?"bg-green-100 text-green-800":t.riskLevel==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.riskLevel.toUpperCase()," Risk"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Current Price:"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",s.currentPrice.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"24h Change:"}),e.jsxs("p",{className:`font-semibold ${s.priceChange24h>=0?"text-green-600":"text-red-600"}`,children:[s.priceChange24h>=0?"+":"",s.priceChange24h.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"30d Change:"}),e.jsxs("p",{className:`font-semibold ${s.priceChange30d>=0?"text-green-600":"text-red-600"}`,children:[s.priceChange30d>=0?"+":"",s.priceChange30d.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"24h Volume:"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",(s.volume24h/1e6).toFixed(2),"M"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"24h Range:"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["$",s.low24h.toFixed(4)," - $",s.high24h.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"30d Range:"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["$",s.low30d.toFixed(4)," - $",s.high30d.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"30d Volume:"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["$",(s.volume30d/1e9).toFixed(2),"B"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Volatility:"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.volatility.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>Z(l?null:n),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-lightbulb-line text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Suggested Bot Settings"})]}),e.jsx("i",{className:`ri-arrow-${l?"up":"down"}-s-line text-gray-400`})]}),l&&e.jsxs("div",{className:"mt-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:t.reasoning}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Leverage"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[t.leverage,"x"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Risk Level"}),e.jsx("span",{className:`text-sm font-semibold ${t.riskLevel==="low"?"text-green-600":t.riskLevel==="medium"?"text-yellow-600":"text-red-600"}`,children:t.riskLevel.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Trade Amount"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",t.tradeAmount]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Stop Loss"}),e.jsxs("span",{className:"text-sm font-semibold text-red-600",children:[t.stopLoss,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Take Profit"}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[t.takeProfit,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Timeframe"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t.timeframe})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-blue-200",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("i",{className:"ri-information-line mr-1"}),"Settings are optimized based on pair characteristics"]}),e.jsxs(I,{variant:"primary",size:"sm",onClick:()=>_(s,t),children:[e.jsx("i",{className:"ri-magic-line mr-1"}),"Use Suggested Settings"]})]})]})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col space-y-2",children:[e.jsxs(I,{variant:"primary",size:"sm",onClick:()=>_(s),children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Create Bot"]}),e.jsxs(I,{variant:"secondary",size:"sm",onClick:()=>_(s,t),title:"Create bot with suggested settings",children:[e.jsx("i",{className:"ri-magic-line mr-1"}),"Smart Create"]})]})]})},n)})})]})}),e.jsx(le,{})]})}export{xe as default};
