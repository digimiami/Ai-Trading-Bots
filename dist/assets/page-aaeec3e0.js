import{r as d,s as Q,a as Ie,d as Oe,j as s}from"./index-3146881b.js";import{H as Je}from"./Header-1be7d51e.js";import{N as He}from"./Navigation-9bcc642c.js";import{B as i}from"./Button-79523c4d.js";import{C as Y}from"./Card-c02645c9.js";import{u as qe}from"./useBots-e20e534e.js";import{u as Ye}from"./useBotActivity-02efa05e.js";const Qe=f=>{const[y,M]=d.useState(new Map),[U,k]=d.useState(!0),[$,x]=d.useState(null),T=async()=>{if(f.length===0){M(new Map),k(!1);return}try{k(!0),x(null);const m=new Date,G=new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),0,0,0,0)),p=new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),23,59,59,999)),{data:b,error:A}=await Q.from("trading_bots").select("id, strategy_config").in("id",f);if(A)throw A;const{data:S,error:z}=await Q.from("trades").select("bot_id, id").in("bot_id",f).gte("executed_at",G.toISOString()).lte("executed_at",p.toISOString()).in("status",["filled","completed","closed"]);if(z)throw z;const P=new Map;S&&S.forEach(g=>{const w=P.get(g.bot_id)||0;P.set(g.bot_id,w+1)});const v=new Map;b&&b.forEach(g=>{let w=8;try{const j=typeof g.strategy_config=="string"?JSON.parse(g.strategy_config):g.strategy_config;j&&typeof j.max_trades_per_day=="number"&&(w=j.max_trades_per_day)}catch{console.warn("Failed to parse strategy_config for bot:",g.id)}const _=P.get(g.id)||0,h=Math.max(0,w-_),o=_>=w;v.set(g.id,{botId:g.id,tradesToday:_,maxTradesPerDay:w,isLimitReached:o,remainingTrades:h})}),M(v)}catch(m){console.error("Error fetching trade limits:",m),x(m instanceof Error?m.message:"Failed to fetch trade limits")}finally{k(!1)}};return d.useEffect(()=>{T();const m=setInterval(T,3e4);return()=>clearInterval(m)},[f.join(",")]),{limits:y,getLimit:m=>y.get(m),loading:U,error:$,refresh:T}};function rs(){const f=Ie(),{bots:y,loading:M,startBot:U,stopBot:k,pauseBot:$,updateBot:x,deleteBot:T,createBot:m}=qe(),{activities:G,addLog:p}=Ye(y),{isExecuting:b,lastExecution:A,timeSync:S,executeBot:z,executeAllBots:P}=Oe(),[v,g]=d.useState("all"),[w,_]=d.useState("overview"),[h,o]=d.useState(!1),[j,ue]=d.useState(null),[K,se]=d.useState(null),[te,V]=d.useState(null),[F,L]=d.useState(null),[ae,W]=d.useState(null),[N,E]=d.useState(null),[I,pe]=d.useState(null),[B,he]=d.useState({}),[R,re]=d.useState({}),[le,ie]=d.useState({}),[O,J]=d.useState({}),[C,ne]=d.useState(""),u=w==="webhook",fe=y.map(e=>e.id),{limits:Ge,getLimit:oe,refresh:ye}=Qe(fe),de=`${{}.VITE_PUBLIC_SUPABASE_URL}/functions/v1/tradingview-webhook`,we=()=>{var e;try{const t=new Uint8Array(18);if((e=window==null?void 0:window.crypto)!=null&&e.getRandomValues)return window.crypto.getRandomValues(t),Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}catch(t){console.warn("Falling back to Math.random for webhook secret generation:",t)}return Math.random().toString(36).slice(2,12)+Math.random().toString(36).slice(2,12)},X=async(e,t)=>{if(!e){alert("Nothing to copy yet.");return}try{await navigator.clipboard.writeText(e),alert(`âœ… ${t} copied to clipboard`)}catch(a){console.error("Failed to copy value:",a),alert("Unable to copy to clipboard. Please copy manually.")}},Z=async e=>{re(t=>({...t,[e]:!0}));try{const{data:t,error:a}=await Q.from("manual_trade_signals").select("*").eq("bot_id",e).order("created_at",{ascending:!1}).limit(20);if(a)throw a;he(r=>({...r,[e]:t||[]}))}catch(t){console.error("Failed to load webhook signals:",t),alert(`Failed to load webhook signals: ${(t==null?void 0:t.message)||"Unknown error"}`)}finally{re(t=>({...t,[e]:!1}))}},je=async e=>{if(u)return;const t=I===e;pe(t?null:e),t||await Z(e)},Ne=async e=>{if(!confirm("Regenerate webhook secret? All existing TradingView alerts must be updated to use the new value."))return;const t=we();J(a=>({...a,[e.id]:!0}));try{await x(e.id,{webhookSecret:t}),ie(a=>({...a,[e.id]:!0})),alert("âœ… Webhook secret regenerated. Update your TradingView alert settings.")}catch(a){console.error("Failed to regenerate webhook secret:",a),alert(`Failed to regenerate webhook secret: ${(a==null?void 0:a.message)||"Unknown error"}`)}finally{J(a=>({...a,[e.id]:!1}))}},be=async e=>{const t=!(e.webhookTriggerImmediate??!0);J(a=>({...a,[e.id]:!0}));try{await x(e.id,{webhookTriggerImmediate:t}),alert(`âœ… Immediate execution ${t?"enabled":"disabled"} for TradingView webhook signals.`)}catch(a){console.error("Failed to update webhook execution preference:",a),alert(`Failed to update webhook execution preference: ${(a==null?void 0:a.message)||"Unknown error"}`)}finally{J(a=>({...a,[e.id]:!1}))}};d.useEffect(()=>{u&&y.forEach(e=>{!B[e.id]&&!R[e.id]&&Z(e.id)})},[u,y,B,R]);const ce=e=>JSON.stringify({secret:e.webhookSecret||e.webhook_secret||"YOUR_TRADINGVIEW_WEBHOOK_SECRET",botId:e.id,action:"{{strategy.order.action}}",marketPosition:"{{strategy.market_position}}",prevMarketPosition:"{{strategy.prev_market_position}}",marketPositionSize:"{{strategy.market_position_size}}",prevMarketPositionSize:"{{strategy.prev_market_position_size}}",instrument:"{{ticker}}",timestamp:"{{timenow}}",maxLag:"300",investmentType:"base",amount:"{{strategy.order.contracts}}",mode:e.paperTrading?"paper":"real",reason:"TradingView alert signal"},null,2),me=e=>{if(!e)return"â€”";try{return new Date(e).toLocaleString()}catch{return e}},ve=e=>{switch((e||"").toLowerCase()){case"completed":return"bg-green-100 text-green-700";case"processing":return"bg-blue-100 text-blue-700";case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},n=y.filter(e=>{let t=!0;if(v==="all"?t=!0:v==="live"?t=!e.paperTrading:t=e.status===v,!t)return!1;if(!C.trim())return!0;const a=C.toLowerCase().trim(),r=(e.name||"").toLowerCase(),l=(e.symbol||"").toLowerCase(),c=(e.exchange||"").toLowerCase(),q=(e.status||"").toLowerCase();return r.includes(a)||l.includes(a)||c.includes(a)||q.includes(a)}),ke=async()=>{try{const{data:{session:e}}=await Q.auth.getSession();if(!e){console.warn("âš ï¸ No session available when attempting to reset paper trading performance.");return}const t=`${{}.VITE_PUBLIC_SUPABASE_URL}/functions/v1/paper-trading`,a=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"reset_performance"})});if(!a.ok){const r=await a.json().catch(()=>null);throw new Error((r==null?void 0:r.error)||`Failed to reset paper trading performance (status ${a.status})`)}console.log("âœ… Paper trading performance reset successfully via Reset All")}catch(e){console.error("Failed to reset paper trading performance:",e)}},Te=e=>G.find(t=>t.botId===e),H=e=>{switch(e){case"info":return"text-blue-600 bg-blue-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"success":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},xe=e=>{switch(e){case"market":return"ri-line-chart-line";case"trade":return"ri-exchange-line";case"strategy":return"ri-brain-line";case"system":return"ri-settings-line";case"error":return"ri-error-warning-line";default:return"ri-information-line"}},ge=e=>new Date(e).toLocaleTimeString(),Se=e=>{switch(e){case"running":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"stopped":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ce=e=>{switch(e){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}},ee=async(e,t)=>{try{if(console.log(`ðŸ”„ Attempting to ${t} bot ${e} from origin: ${window.location.origin}`),t==="start"){await U(e);try{await p(e,{level:"success",category:"system",message:"Bot started successfully",details:{action:"start",timestamp:new Date().toISOString()}})}catch(a){console.warn("âš ï¸ Failed to record start log:",a)}alert("âœ… Bot started successfully!")}else if(t==="stop"){await k(e);try{await p(e,{level:"info",category:"system",message:"Bot stopped by user",details:{action:"stop",timestamp:new Date().toISOString()}})}catch(a){console.warn("âš ï¸ Failed to record stop log:",a)}alert("âœ… Bot stopped successfully!")}else if(t==="pause"){await $(e);try{await p(e,{level:"warning",category:"system",message:"Bot paused by user",details:{action:"pause",timestamp:new Date().toISOString()}})}catch(a){console.warn("âš ï¸ Failed to record pause log:",a)}alert("âœ… Bot paused successfully!")}}catch(a){console.error(`âŒ Failed to ${t} bot:`,a);const r=(a==null?void 0:a.message)||String(a)||"Unknown error";console.error("Error details:",{message:r,stack:a==null?void 0:a.stack,origin:window.location.origin,url:window.location.href}),alert(`âŒ Failed to ${t} bot: ${r}

Please check the browser console (F12) for more details.`),await p(e,{level:"error",category:"error",message:`Failed to ${t} bot: ${r}`,details:{action:t,error:r,origin:window.location.origin}})}},$e=async()=>{o(!0);try{const e=n.filter(t=>t.status==="stopped"||t.status==="paused");await Promise.all(e.map(t=>U(t.id)))}catch(e){console.error("Failed to start all bots:",e)}finally{o(!1)}},Ae=async()=>{o(!0);try{const e=n.filter(t=>t.status==="running"||t.status==="paused");await Promise.all(e.map(t=>k(t.id)))}catch(e){console.error("Failed to stop all bots:",e)}finally{o(!1)}},Pe=async()=>{if(confirm("Are you sure you want to reset all bot statistics? This will set PnL, trades count, and win rate to zero.")){o(!0);try{await Promise.all(n.map(e=>x(e.id,{total_trades:0,win_rate:0,pnl:0,pnl_percentage:0,last_trade_at:null}))),await ke(),console.log("All bot statistics reset successfully")}catch(e){console.error("Failed to reset all bots:",e)}finally{o(!1)}}},_e=async()=>{if(confirm("Are you sure you want to delete all bots? This action cannot be undone.")){o(!0);try{await Promise.all(n.map(e=>T(e.id))),console.log("All bots deleted successfully")}catch(e){console.error("Failed to delete all bots:",e)}finally{o(!1)}}},Fe=async()=>{if(confirm("Are you sure you want to pause all running bots?")){o(!0);try{const e=n.filter(t=>t.status==="running");await Promise.all(e.map(t=>$(t.id))),alert(`âœ… Paused ${e.length} bot(s) successfully`)}catch(e){console.error("Failed to pause all bots:",e),alert("âŒ Failed to pause all bots. Please check console for details.")}finally{o(!1)}}},Le=async()=>{if(confirm("Switch all bots to Paper Trading mode? This will set all bots to paper trading (simulation mode).")){o(!0);try{const e=n.filter(l=>!(l.paperTrading||l.paper_trading||!1));if(e.length===0){alert("â„¹ï¸ All bots are already in Paper Trading mode."),o(!1);return}console.log(`ðŸ”„ Switching ${e.length} bot(s) to Paper Trading mode...`);const t=await Promise.allSettled(e.map(l=>x(l.id,{paperTrading:!0}))),a=t.filter(l=>l.status==="fulfilled").length,r=t.filter(l=>l.status==="rejected").length;r>0?(console.error("Some bots failed to update:",t.filter(l=>l.status==="rejected")),alert(`âš ï¸ Updated ${a} bot(s) to Paper Trading mode. ${r} bot(s) failed. Check console for details.`)):alert(`âœ… Successfully switched ${a} bot(s) to Paper Trading mode`)}catch(e){console.error("Failed to activate all paper trading:",e),alert(`âŒ Failed to switch bots to paper trading: ${(e==null?void 0:e.message)||"Unknown error"}. Please check console for details.`)}finally{o(!1)}}},Ee=async()=>{if(confirm("Pause all bots in Real Trading mode? This will pause all bots that are using real funds.")){o(!0);try{const e=n.filter(t=>!t.paperTrading&&t.status==="running");await Promise.all(e.map(t=>$(t.id))),alert(`âœ… Paused ${e.length} real trading bot(s) successfully`)}catch(e){console.error("Failed to pause all real trading bots:",e),alert("âŒ Failed to pause real trading bots. Please check console for details.")}finally{o(!1)}}},Be=async()=>{if(!(!confirm("ðŸš¨ Switch all bots to REAL Trading mode? This will use LIVE FUNDS on your exchange. Are you absolutely sure?")||!confirm("âš ï¸ FINAL CONFIRMATION: This will enable REAL trading with LIVE FUNDS for all bots. Continue?"))){o(!0);try{const t=n.filter(c=>c.paperTrading||c.paper_trading||!1);if(t.length===0){alert("â„¹ï¸ All bots are already in Real Trading mode."),o(!1);return}console.log(`ðŸ”„ Switching ${t.length} bot(s) to Real Trading mode...`);const a=await Promise.allSettled(t.map(c=>x(c.id,{paperTrading:!1}))),r=a.filter(c=>c.status==="fulfilled").length,l=a.filter(c=>c.status==="rejected").length;l>0?(console.error("Some bots failed to update:",a.filter(c=>c.status==="rejected")),alert(`âš ï¸ Updated ${r} bot(s) to Real Trading mode. ${l} bot(s) failed. Check console for details.`)):alert(`ðŸš¨ Successfully switched ${r} bot(s) to REAL Trading mode. Trades will use live funds!`)}catch(t){console.error("Failed to activate all real trading:",t),alert(`âŒ Failed to switch bots to real trading: ${(t==null?void 0:t.message)||"Unknown error"}. Please check console for details.`)}finally{o(!1)}}},Re=async(e,t)=>{if(confirm(`Are you sure you want to reset "${t}" statistics? This will set PnL, trades count, and win rate to zero.`))try{await x(e,{total_trades:0,win_rate:0,pnl:0,pnl_percentage:0,last_trade_at:null}),console.log(`Bot "${t}" statistics reset successfully`)}catch(a){console.error(`Failed to reset bot "${t}":`,a)}},De=async(e,t)=>{if(confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`))try{await T(e),console.log(`Bot "${t}" deleted successfully`)}catch(a){console.error(`Failed to delete bot "${t}":`,a)}},Me=async e=>{try{const t=e.name.replace(/\s*\(Copy(?: \d+)?\)\s*$/,"");let a=`${t} (Copy)`,r=1;for(;y.some(D=>D.name===a);)r++,a=`${t} (Copy ${r})`;let l=e.strategy||{};if(typeof l=="string")try{l=JSON.parse(l)}catch(D){console.warn("Failed to parse strategy, using empty object:",D),l={}}let c=e.strategyConfig||e.strategy_config||{};if(typeof c=="string")try{c=JSON.parse(c)}catch(D){console.warn("Failed to parse strategyConfig, using empty object:",D),c={}}const q={name:a,exchange:e.exchange,tradingType:e.tradingType||e.trading_type||"spot",symbol:e.symbol,timeframe:e.timeframe||"1h",leverage:e.leverage||1,riskLevel:e.riskLevel||e.risk_level||"medium",tradeAmount:e.tradeAmount||e.trade_amount||100,stopLoss:e.stopLoss||e.stop_loss||2,takeProfit:e.takeProfit||e.take_profit||4,strategy:l,strategyConfig:c,paperTrading:e.paperTrading||e.paper_trading||!1,status:"stopped",pnl:0,pnlPercentage:0,totalTrades:0,winRate:0,lastTradeAt:null,aiMlEnabled:e.aiMlEnabled||e.ai_ml_enabled||!1},We=await m(q);alert(`âœ… Bot "${a}" cloned successfully!`),await p(e.id,{level:"info",category:"system",message:`Bot cloned as "${a}"`,details:{clonedBotId:We.id}})}catch(t){console.error("Failed to clone bot:",t),alert(`âŒ Failed to clone bot: ${t.message||"Unknown error"}`)}},Ue=e=>{f(`/edit-bot/${e}`)},ze=async(e,t)=>{if(K===e){console.log("Already toggling AI/ML for this bot, please wait...");return}try{se(e),await x(e,{aiMlEnabled:!t}),p(e,{level:"info",category:"system",message:`AI/ML ${t?"disabled":"enabled"} for bot`})}catch(a){console.error("Failed to toggle AI/ML:",a),p(e,{level:"error",category:"system",message:"Failed to toggle AI/ML"})}finally{se(null)}},Ve=async e=>{const a=!(e.paperTrading||!1);if(!a){const r=["âœ… Real exchange API keys are connected and ACTIVE (non-testnet)","âœ… Wallets have sufficient available balance for this bot's trade size","âœ… Stop-loss, take-profit, and risk limits are reviewed for live execution","âœ… You understand trades will execute on your real exchange account"].join(`
`);if(!window.confirm(`âš ï¸ Enable REAL trading for "${e.name}"?

Before proceeding, make sure:

${r}

Continue to live trading mode?`))return}try{await x(e.id,{paperTrading:a}),await p(e.id,{level:a?"info":"warning",category:"system",message:a?"Bot switched to paper trading mode":"Bot switched to REAL trading mode",details:{paperTrading:a,switchedAt:new Date().toISOString()}}),alert(a?"âœ… Bot switched to Paper Trading mode. Orders will only simulate fills for testing.":`ðŸš¨ "${e.name}" is now in REAL trading mode.

Trades will execute on your connected exchange using live funds.`)}catch(r){console.error("Failed to toggle paper trading:",r),alert(`Failed to toggle trading mode: ${(r==null?void 0:r.message)||"Unknown error"}`)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(Je,{title:"Trading Bots",action:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(i,{variant:"warning",size:"sm",onClick:P,disabled:b||n.filter(e=>e.status==="running").length===0,children:[s.jsx("i",{className:"ri-play-circle-line mr-1"}),"Execute All"]}),s.jsxs(i,{variant:"success",size:"sm",onClick:$e,disabled:h||n.filter(e=>e.status==="stopped"||e.status==="paused").length===0,children:[s.jsx("i",{className:"ri-play-line mr-1"}),"Start All"]}),s.jsxs(i,{variant:"secondary",size:"sm",onClick:Ae,disabled:h||n.filter(e=>e.status==="running"||e.status==="paused").length===0,children:[s.jsx("i",{className:"ri-stop-line mr-1"}),"Stop All"]}),s.jsxs(i,{variant:"secondary",size:"sm",onClick:Pe,disabled:h||n.length===0,children:[s.jsx("i",{className:"ri-refresh-line mr-1"}),"Reset All"]}),s.jsxs(i,{variant:"danger",size:"sm",onClick:_e,disabled:h||n.length===0,children:[s.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete All"]}),s.jsxs(i,{variant:"primary",size:"sm",onClick:()=>f("/create-bot"),children:[s.jsx("i",{className:"ri-add-line mr-1"}),"New Bot"]})]})}),s.jsx("div",{className:"pt-20 pb-20 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto space-y-4",children:[s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Bulk Actions:"}),s.jsxs(i,{variant:"secondary",size:"sm",onClick:Fe,disabled:h||n.filter(e=>e.status==="running").length===0,children:[s.jsx("i",{className:"ri-pause-line mr-1"}),"Pause All"]}),s.jsxs(i,{variant:"secondary",size:"sm",onClick:Le,disabled:h||n.filter(e=>!e.paperTrading).length===0,className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border border-yellow-300",children:[s.jsx("i",{className:"ri-edit-box-line mr-1"}),"Activate All Paper"]}),s.jsxs(i,{variant:"secondary",size:"sm",onClick:Ee,disabled:h||n.filter(e=>!e.paperTrading&&e.status==="running").length===0,className:"bg-orange-100 hover:bg-orange-200 text-orange-800 border border-orange-300",children:[s.jsx("i",{className:"ri-pause-circle-line mr-1"}),"Pause All Real"]}),s.jsxs(i,{variant:"danger",size:"sm",onClick:Be,disabled:h||n.filter(e=>e.paperTrading).length===0,children:[s.jsx("i",{className:"ri-money-dollar-circle-line mr-1"}),"Activate All Real"]})]})}),s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${b?"bg-yellow-500 animate-pulse":"bg-green-500"}`}),s.jsx("span",{className:"text-sm text-gray-600",children:b?"Executing...":"Ready"})]}),A&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Last execution: ",new Date(A).toLocaleTimeString()]}),S&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Time sync: ",S.offset>0?"+":"",S.offset,"ms"]})]}),s.jsx("div",{className:"text-xs text-gray-500",children:"Auto-execution every 1 minute"})]})}),s.jsxs(Y,{className:"p-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("i",{className:"ri-search-line text-gray-400"})}),s.jsx("input",{type:"text",value:C,onChange:e=>ne(e.target.value),placeholder:"Search bots by name, symbol, exchange, or status...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),C&&s.jsx("button",{onClick:()=>ne(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:s.jsx("i",{className:"ri-close-line"})})]}),C&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Found ",n.length," bot",n.length!==1?"s":"",' matching "',C,'"']})]}),s.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:[{id:"all",label:"All"},{id:"running",label:"Running"},{id:"paused",label:"Paused"},{id:"stopped",label:"Stopped"},{id:"live",label:"Live Trading"}].map(e=>s.jsx("button",{onClick:()=>g(e.id),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${v===e.id?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:e.label},e.id))}),s.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:[{id:"overview",label:"Bot Overview"},{id:"webhook",label:"TradingView Webhooks"}].map(e=>s.jsx("button",{onClick:()=>_(e.id),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${w===e.id?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:e.label},e.id))}),s.jsx("div",{className:"space-y-4",children:M?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading bots..."})]}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("i",{className:"ri-robot-line text-4xl text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bots found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first trading bot to get started"}),s.jsxs(i,{onClick:()=>f("/create-bot"),children:[s.jsx("i",{className:"ri-add-line mr-2"}),"Create Bot"]})]}):n.map(e=>s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx("i",{className:`${e.exchange==="bybit"?"ri-currency-line":"ri-exchange-line"} text-blue-600 text-xl`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[e.symbols&&e.symbols.length>1?`${e.symbols.join(", ")} (${e.symbols.length} pairs)`:e.symbol," â€¢ ",e.exchange.toUpperCase()]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1 flex-wrap gap-1",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Se(e.status)}`,children:e.status}),s.jsxs("span",{className:`text-xs font-medium ${Ce(e.riskLevel)}`,children:[e.riskLevel," risk"]}),(()=>{const t=oe(e.id);return t&&t.isLimitReached?s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 flex items-center gap-1",children:[s.jsx("i",{className:"ri-alert-line"}),"Limit Reached"]}):null})()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-lg font-bold ${(e.pnl??0)>=0?"text-green-600":"text-red-600"}`,children:[(e.pnl??0)>=0?"+":"","$",(e.pnl??0).toFixed(2)]}),s.jsxs("p",{className:`text-sm ${(e.pnlPercentage??0)>=0?"text-green-600":"text-red-600"}`,children:[(e.pnlPercentage??0)>=0?"+":"",(e.pnlPercentage??0).toFixed(2),"%"]})]})]}),!u&&(()=>{const t=oe(e.id);return t?s.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Daily Trades:"}),s.jsxs("span",{className:`text-sm font-semibold ${t.isLimitReached?"text-red-600":t.tradesToday/t.maxTradesPerDay>.8?"text-yellow-600":"text-green-600"}`,children:[t.tradesToday," / ",t.maxTradesPerDay]}),t.isLimitReached&&s.jsx("span",{className:"text-xs text-red-600",children:"(Limit Reached)"})]}),s.jsxs("button",{onClick:()=>{te===e.id?(V(null),L(null)):(V(e.id),L(t.maxTradesPerDay))},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",title:"Edit max trades per day",children:[s.jsx("i",{className:"ri-edit-line"}),"Edit Limit"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all ${t.isLimitReached?"bg-red-500":t.tradesToday/t.maxTradesPerDay>.8?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,t.tradesToday/t.maxTradesPerDay*100)}%`}})}),te===e.id&&s.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Max Trades Per Day:"}),s.jsx("input",{type:"number",min:"1",max:"200",value:F||t.maxTradesPerDay,onChange:a=>L(parseInt(a.target.value)||1),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{size:"sm",onClick:async()=>{if(F&&F>0)try{let a={};if(e.strategyConfig)if(typeof e.strategyConfig=="string")try{a=JSON.parse(e.strategyConfig)}catch(l){console.warn("Failed to parse strategyConfig:",l),a={}}else a={...e.strategyConfig};const r={bias_mode:a.bias_mode||"auto",regime_mode:a.regime_mode||"auto",htf_timeframe:a.htf_timeframe||"4h",...a,max_trades_per_day:F};console.log("Updating strategyConfig:",r),await x(e.id,{strategyConfig:r}),V(null),L(null),setTimeout(async()=>{await ye(),window.location.reload()},500),alert(`âœ… Max trades per day updated to ${F}`)}catch(a){console.error("Error updating limit:",a);const r=(a==null?void 0:a.message)||"Failed to update limit. Please try again.";alert(`Failed to update limit: ${r}`)}},className:"text-xs",children:"Save"}),s.jsx(i,{size:"sm",variant:"secondary",onClick:()=>{V(null),L(null)},className:"text-xs",children:"Cancel"})]})]})]}):null})(),!u&&s.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trade Amount:"}),s.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",(e.tradeAmount||100).toFixed(2)," USD"]})]}),s.jsxs("button",{onClick:()=>{ae===e.id?(W(null),E(null)):(W(e.id),E(e.tradeAmount||100))},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",title:"Edit trade amount",children:[s.jsx("i",{className:"ri-edit-line"}),"Edit Amount"]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Est. Order Value: $",((e.tradeAmount||100)*e.leverage*1.5).toFixed(2)," USD",s.jsxs("span",{className:"ml-2 text-gray-400",children:["(Amount Ã— Leverage ",e.leverage,"x Ã— 1.5 buffer)"]})]}),ae===e.id&&s.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Trade Amount (USD):"}),s.jsx("input",{type:"number",min:"10",max:"10000",step:"10",value:N||e.tradeAmount||100,onChange:t=>E(parseFloat(t.target.value)||10),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("p",{className:"text-xs text-gray-600",children:["New Est. Order Value: $",((N||e.tradeAmount||100)*e.leverage*1.5).toFixed(2)," USD"]}),(N||e.tradeAmount||100)>100&&s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"âš ï¸ Higher amounts may require more balance"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{size:"sm",onClick:async()=>{if(N&&N>=10&&N<=1e4)try{await x(e.id,{tradeAmount:N}),W(null),E(null),setTimeout(()=>{window.location.reload()},500),alert(`âœ… Trade amount updated to $${N.toFixed(2)}`)}catch(t){console.error("Error updating trade amount:",t);const a=(t==null?void 0:t.message)||"Failed to update trade amount. Please try again.";alert(`Failed to update trade amount: ${a}`)}else alert("Please enter a valid trade amount between $10 and $10,000")},className:"text-xs",children:"Save"}),s.jsx(i,{size:"sm",variant:"secondary",onClick:()=>{W(null),E(null)},className:"text-xs",children:"Cancel"})]})]})]}),!u&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Trades"}),s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.totalTrades??0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Win Rate"}),s.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[(e.winRate??0).toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Win/Loss"}),(()=>{const t=e.totalTrades??0,a=e.closedTrades??t,r=e.winTrades??(a>0?Math.round(a*(e.winRate??0)/100):0),l=e.lossTrades??Math.max(0,a-r);return s.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:r}),s.jsx("span",{className:"text-gray-400 dark:text-gray-500 mx-1",children:"/"}),s.jsx("span",{className:"text-red-600 dark:text-red-400",children:l})]})})()]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fees"}),(()=>{const t=e.totalFees??e.total_fees??e.fees??0,a=Number.isFinite(t)?t:0,r=a>0?"-":"",l=Math.abs(a);return s.jsxs("p",{className:`font-semibold ${l>0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[r,"$",l.toFixed(2)]})})()]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Drawdown"}),(()=>{const t=e.drawdown??e.maxDrawdown??0,a=Number.isFinite(t)?Math.abs(t):0,r=e.drawdownPercentage??e.drawdown_percentage??0,l=Number.isFinite(r)?Math.abs(r):0;return s.jsxs("div",{children:[s.jsxs("p",{className:`font-semibold ${a>0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:[a>0?"-":"","$",a.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l.toFixed(1),"%"]})]})})()]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"PnL"}),(()=>{const t=e.realizedPnl!==void 0?e.realizedPnl:e.pnl??0;return s.jsxs("p",{className:`font-semibold ${t>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[t>=0?"+":"","$",t.toFixed(2)]})})()]})]}),!u&&(()=>{const t=Te(e.id),a=(t==null?void 0:t.logs.slice(0,3))||[];return s.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Recent Activity"}),s.jsx("button",{onClick:()=>ue(j===e.id?null:e.id),className:"text-xs text-blue-600 hover:text-blue-800",children:j===e.id?"Hide":"Show All"})]}),t&&s.jsxs("div",{className:"flex space-x-4 mb-3 text-xs",children:[s.jsxs("span",{className:"text-green-600",children:["âœ“ ",t.successCount]}),s.jsxs("span",{className:"text-yellow-600",children:["âš  ",t.logs.filter(r=>r.level==="warning").length]}),s.jsxs("span",{className:"text-red-600",children:["âœ— ",t.errorCount]}),s.jsxs("span",{className:"text-gray-500",children:["ðŸ“Š ",t.logs.length," total"]})]}),s.jsx("div",{className:"space-y-2",children:a.length===0?s.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[s.jsx("i",{className:"ri-file-list-line text-lg mb-1"}),s.jsx("p",{children:"No activity logs yet"})]}):a.map(r=>s.jsxs("div",{className:"flex items-start space-x-2 p-2 bg-gray-50 rounded text-xs",children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${H(r.level)}`,children:s.jsx("i",{className:`${xe(r.category)} text-xs`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`px-1 py-0.5 rounded text-xs font-medium ${H(r.level)}`,children:r.level}),s.jsx("span",{className:"text-gray-500",children:ge(r.timestamp)})]}),s.jsx("p",{className:"text-gray-700 mt-1 truncate",children:r.message})]})]},r.id))}),j===e.id&&t&&t.logs.length>3&&s.jsx("div",{className:"mt-3 space-y-2 max-h-48 overflow-y-auto",children:t.logs.slice(3).map(r=>s.jsxs("div",{className:"flex items-start space-x-2 p-2 bg-gray-50 rounded text-xs",children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${H(r.level)}`,children:s.jsx("i",{className:`${xe(r.category)} text-xs`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`px-1 py-0.5 rounded text-xs font-medium ${H(r.level)}`,children:r.level}),s.jsx("span",{className:"text-gray-500",children:ge(r.timestamp)})]}),s.jsx("p",{className:"text-gray-700 mt-1",children:r.message}),r.details&&s.jsxs("details",{className:"mt-1",children:[s.jsx("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700",children:"Details"}),s.jsx("pre",{className:"mt-1 p-1 bg-white rounded border text-xs overflow-x-auto",children:JSON.stringify(r.details,null,2)})]})]})]},r.id))})]})})(),(()=>{const t=u||I===e.id;return s.jsxs("div",{className:`pt-4 border-t border-gray-100 ${u?"bg-blue-50 rounded-lg border-blue-100":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"ri-link-m text-blue-500"}),s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"TradingView Webhook"})]}),u?s.jsx("span",{className:"text-xs uppercase font-semibold text-blue-500 tracking-wide",children:"Webhook Dashboard"}):s.jsxs("button",{onClick:()=>je(e.id),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[s.jsx("i",{className:`ri-${I===e.id?"arrow-up-s-line":"arrow-down-s-line"}`}),I===e.id?"Hide":"Manage"]})]}),t&&s.jsxs("div",{className:`mt-3 space-y-4 ${u?"bg-white border border-blue-100":"bg-blue-50 border border-blue-100"} rounded-lg p-4`,children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase font-semibold text-gray-500",children:"Webhook Secret"}),s.jsx("div",{className:"mt-1 font-mono text-sm bg-white border border-gray-200 rounded px-3 py-2 flex items-center justify-between",children:s.jsx("span",{className:"truncate pr-3",children:le[e.id]?e.webhookSecret||"Not set yet":"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[s.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>ie(a=>({...a,[e.id]:!a[e.id]})),children:[s.jsx("i",{className:"ri-eye-line mr-1"}),le[e.id]?"Hide":"Reveal"]}),s.jsxs(i,{variant:"secondary",size:"sm",disabled:!e.webhookSecret,onClick:()=>X(e.webhookSecret||"","Webhook secret"),children:[s.jsx("i",{className:"ri-file-copy-line mr-1"}),"Copy Secret"]}),s.jsx(i,{variant:"warning",size:"sm",disabled:O[e.id],onClick:()=>Ne(e),children:O[e.id]?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"ri-refresh-line mr-1"}),"Regenerate"]})})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Regenerating the secret invalidates existing TradingView alertsâ€”remember to update them."})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase font-semibold text-gray-500",children:"Webhook URL"}),s.jsx("div",{className:"mt-1 font-mono text-sm bg-white border border-gray-200 rounded px-3 py-2 flex items-center justify-between",children:s.jsx("span",{className:"truncate pr-3",children:de})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>X(de,"Webhook URL"),children:[s.jsx("i",{className:"ri-file-copy-line mr-1"}),"Copy URL"]})}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs uppercase font-semibold text-gray-500",children:"Immediate Execution"}),s.jsx("button",{onClick:()=>be(e),disabled:O[e.id],className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${O[e.id]?"opacity-50 cursor-not-allowed":""} ${e.webhookTriggerImmediate?"bg-blue-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.webhookTriggerImmediate?"translate-x-6":"translate-x-1"}`})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, the webhook calls bot-executor immediately after logging the signal."})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h5",{className:"text-xs font-semibold text-gray-600 uppercase",children:"TradingView Alert Payload"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>X(ce(e),"Alert payload JSON"),children:[s.jsx("i",{className:"ri-code-line mr-1"}),"Copy JSON"]})})]}),s.jsx("pre",{className:"bg-white border border-gray-200 rounded p-3 text-xs overflow-x-auto",children:ce(e)})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h5",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Recent Webhook Signals"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(i,{variant:"secondary",size:"sm",onClick:()=>Z(e.id),disabled:R[e.id],children:R[e.id]?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Refreshing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"ri-refresh-line mr-1"}),"Refresh"]})})})]}),R[e.id]?s.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[s.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Loading signals..."]}):B[e.id]&&B[e.id].length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-xs bg-white border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("thead",{className:"bg-gray-100 text-gray-600 uppercase",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Created"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Side"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Mode"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Size x"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Reason"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Processed"})]})}),s.jsx("tbody",{children:B[e.id].map(a=>s.jsxs("tr",{className:"border-t border-gray-100",children:[s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700",children:me(a.created_at)}),s.jsx("td",{className:"px-3 py-2 uppercase font-semibold text-gray-700",children:a.side||"â€”"}),s.jsx("td",{className:"px-3 py-2 capitalize text-gray-700",children:a.mode}),s.jsx("td",{className:"px-3 py-2 text-right text-gray-700",children:(a.size_multiplier??1).toFixed(2)}),s.jsxs("td",{className:"px-3 py-2 text-gray-700",children:[a.reason||"â€”",a.error&&s.jsxs("div",{className:"text-red-600 mt-1",children:["Error: ",a.error]})]}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-semibold ${ve(a.status)}`,children:a.status.toUpperCase()})}),s.jsx("td",{className:"px-3 py-2 text-gray-700",children:a.processed_at?me(a.processed_at):"Pending"})]},a.id))})]})}):s.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[s.jsx("i",{className:"ri-information-line"}),"No webhook signals recorded yet."]})]})]})]})})(),!u&&s.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.status==="running"?s.jsxs(s.Fragment,{children:[s.jsxs(i,{variant:"warning",size:"sm",className:"flex-1",onClick:()=>z(e.id),disabled:b,children:[s.jsx("i",{className:"ri-play-circle-line mr-1"}),"Execute"]}),s.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>ee(e.id,"pause"),children:[s.jsx("i",{className:"ri-pause-line mr-1"}),"Pause"]})]}):s.jsxs(i,{variant:"success",size:"sm",className:"flex-1",onClick:()=>ee(e.id,"start"),children:[s.jsx("i",{className:"ri-play-line mr-1"}),"Start"]}),s.jsx(i,{variant:"danger",size:"sm",onClick:()=>ee(e.id,"stop"),children:s.jsx("i",{className:"ri-stop-line"})}),s.jsx(i,{variant:"secondary",size:"sm",onClick:()=>f("/bot-activity"),children:s.jsx("i",{className:"ri-file-list-line"})})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("i",{className:"ri-brain-line text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI/ML System"})]}),s.jsx("button",{onClick:()=>ze(e.id,e.aiMlEnabled||!1),disabled:K===e.id,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${K===e.id?"opacity-50 cursor-not-allowed":""} ${e.aiMlEnabled?"bg-purple-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.aiMlEnabled?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${e.paperTrading?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200 shadow-inner"}`,children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("i",{className:`ri-${e.paperTrading?"edit-box-line":"money-dollar-circle-line"} text-yellow-600`}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.paperTrading?"ðŸ“ Paper Trading":"ðŸ’° Real Trading"})]}),!e.paperTrading&&s.jsxs("div",{className:"flex items-center mt-1 text-xs font-semibold text-red-600 uppercase tracking-wide",children:[s.jsxs("span",{className:"relative flex h-2.5 w-2.5 mr-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500"})]}),"Live Trading Active"]})]}),s.jsx("button",{onClick:()=>Ve(e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.paperTrading?"bg-yellow-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.paperTrading?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(i,{variant:"primary",size:"sm",className:"flex-1",onClick:()=>Ue(e.id),children:[s.jsx("i",{className:"ri-edit-line mr-1"}),"Edit"]}),s.jsxs(i,{variant:"secondary",size:"sm",className:"flex-1",onClick:()=>Me(e),title:"Clone this bot with all settings",children:[s.jsx("i",{className:"ri-file-copy-line mr-1"}),"Clone"]}),s.jsxs(i,{variant:"warning",size:"sm",className:"flex-1",onClick:()=>Re(e.id,e.name),children:[s.jsx("i",{className:"ri-refresh-line mr-1"}),"Reset"]}),s.jsxs(i,{variant:"danger",size:"sm",className:"flex-1",onClick:()=>De(e.id,e.name),children:[s.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]})]})]},e.id))})]})}),s.jsx(He,{})]})}export{rs as default};
