import{s as J,r as _,j as e,a as fe,e as be,f as ve}from"./index-41a0ae00.js";import{B as q}from"./Button-0b498d06.js";import{C as H}from"./Card-0516a8f2.js";import{H as ye}from"./Header-b24d545e.js";import{u as _e}from"./useBots-73934354.js";import{o as f}from"./openai-94d8c64c.js";import{S as je}from"./strategyPresets-48507061.js";import{H as Ne,a as Te}from"./strategyOptions-9891a54c.js";class we{async getRecommendationsForPair(n,a,p){try{const{data:r,error:m}=await J.from("trades").select("*").eq("symbol",n).gte("created_at",new Date(Date.now()-7776e6).toISOString()).order("created_at",{ascending:!1}).limit(100);m&&console.error("Error fetching historical trades:",m);const{data:v,error:b}=await J.from("trading_bots").select("strategy, strategy_config, trade_amount, leverage, status, win_rate, pnl").eq("symbol",n).in("status",["running","paused"]).order("created_at",{ascending:!1}).limit(10);b&&console.error("Error fetching existing bots:",b);const j=this.calculatePerformanceMetrics(r||[],v||[]);return await this.buildRecommendation(n,a,j,p)}catch(r){return console.error("Error getting pair recommendations:",r),this.getDefaultRecommendations(n,a,{totalTrades:0,winRate:0,avgPnL:0,bestStrategy:void 0,avgTradeAmount:100,avgLeverage:a==="futures"?5:1,avgStopLoss:2,avgTakeProfit:4})}}calculatePerformanceMetrics(n,a){const p=n.filter(d=>d.status==="filled"||d.status==="closed"||d.status==="completed"),r=p.filter(d=>(d.pnl||0)>0),m=p.filter(d=>(d.pnl||0)<0),v=p.length>0?r.length/p.length*100:0,b=p.reduce((d,h)=>d+(h.pnl||0),0),j=p.length>0?b/p.length:0,l=r.reduce((d,h)=>d+(h.pnl||0),0),M=Math.abs(m.reduce((d,h)=>d+(h.pnl||0),0)),N=M>0?l/M:l>0?999:0,T=p.map(d=>d.pnl||0),C=T.length>0?T.reduce((d,h)=>d+h,0)/T.length:0,w=T.length>0?T.reduce((d,h)=>d+Math.pow(h-C,2),0)/T.length:0,D=w>0?C/Math.sqrt(w):0;let R=0,k=0,P=0;for(const d of p){k+=d.pnl||0,k>P&&(P=k);const h=P-k;h>R&&(R=h)}const i=P>0?R/P*100:0,y=a.reduce((d,h)=>{const S=h.win_rate||0,K=(d==null?void 0:d.win_rate)||0;return S>K?h:d},null),u=a.length>0?a.reduce((d,h)=>d+(h.trade_amount||100),0)/a.length:100,L=a.length>0?a.reduce((d,h)=>d+(h.leverage||5),0)/a.length:5,$=2,o=4;return{totalTrades:p.length,winRate:v,totalPnL:b,avgPnL:j,profitFactor:N,sharpeRatio:D,maxDrawdown:i,bestStrategy:y==null?void 0:y.strategy,avgTradeAmount:u,avgLeverage:L,avgStopLoss:$,avgTakeProfit:o}}async buildRecommendation(n,a,p,r){var m,v,b,j,l,M,N,T,C,w,D,R,k,P;try{const i=this.getPairSpecificStrategy(n),y=(r==null?void 0:r.advancedConfig)||this.getDefaultAdvancedConfig(n,a),u=await f.optimizeStrategy({strategy:(r==null?void 0:r.strategy)||i,advancedConfig:y},[],{...p,symbol:n,tradingType:a,pairCharacteristics:this.getPairCharacteristics(n)}),L=this.getPairBasicSettings(n,a),$={...y,...u.advancedConfig||{},risk_per_trade_pct:((m=u.advancedConfig)==null?void 0:m.risk_per_trade_pct)??y.risk_per_trade_pct,adx_min_htf:((v=u.advancedConfig)==null?void 0:v.adx_min_htf)??y.adx_min_htf,sl_atr_mult:((b=u.advancedConfig)==null?void 0:b.sl_atr_mult)??y.sl_atr_mult,tp1_r:((j=u.advancedConfig)==null?void 0:j.tp1_r)??y.tp1_r,tp2_r:((l=u.advancedConfig)==null?void 0:l.tp2_r)??y.tp2_r},o={...i,...u.strategy||{},rsiThreshold:((M=u.strategy)==null?void 0:M.rsiThreshold)??i.rsiThreshold,adxThreshold:((N=u.strategy)==null?void 0:N.adxThreshold)??i.adxThreshold,bbWidthThreshold:((T=u.strategy)==null?void 0:T.bbWidthThreshold)??i.bbWidthThreshold,emaSlope:((C=u.strategy)==null?void 0:C.emaSlope)??i.emaSlope,atrPercentage:((w=u.strategy)==null?void 0:w.atrPercentage)??i.atrPercentage,vwapDistance:((D=u.strategy)==null?void 0:D.vwapDistance)??i.vwapDistance,momentumThreshold:((R=u.strategy)==null?void 0:R.momentumThreshold)??i.momentumThreshold,useMLPrediction:((k=u.strategy)==null?void 0:k.useMLPrediction)??i.useMLPrediction,minSamplesForML:((P=u.strategy)==null?void 0:P.minSamplesForML)??i.minSamplesForML},d=p.totalTrades>0,h=d?`Optimized settings for ${n} based on ${p.totalTrades} historical trades (${p.winRate.toFixed(1)}% win rate, $${p.totalPnL.toFixed(2)} PnL)`:`Recommended settings for ${n} based on pair characteristics. No historical trades found - these are baseline recommendations to get started.`;return{symbol:n,recommended:!0,confidence:u.confidence||(d?.7:.6),reasoning:u.reasoning||h,strategy:o,advancedConfig:$,expectedPerformance:u.expectedImprovement||(d?`Expected improved performance with optimized parameters for ${n}`:`These baseline settings for ${n} are designed to start trading safely with pair-specific optimizations`),riskAssessment:this.getPairRiskAssessment(n),suggestedTradeAmount:L.tradeAmount,suggestedLeverage:L.leverage,suggestedStopLoss:L.stopLoss,suggestedTakeProfit:L.takeProfit,changes:this.buildChangesList(r,{strategy:o,advancedConfig:$})}}catch(i){return console.error("Error getting AI recommendation:",i),this.getDefaultRecommendations(n,a,p)}}getDefaultAdvancedConfig(n,a){return{bias_mode:"auto",htf_timeframe:"4h",htf_trend_indicator:"EMA200",ema_fast_period:50,require_price_vs_trend:"any",adx_min_htf:23,require_adx_rising:!0,regime_mode:"auto",adx_trend_min:25,adx_meanrev_max:19,session_filter_enabled:!1,allowed_hours_utc:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],cooldown_bars:8,atr_percentile_min:20,bb_width_min:.012,bb_width_max:.03,min_24h_volume_usd:5e8,max_spread_bps:3,risk_per_trade_pct:.75,daily_loss_limit_pct:3,weekly_loss_limit_pct:6,max_trades_per_day:8,max_concurrent:2,max_consecutive_losses:5,sl_atr_mult:1.3,tp1_r:1,tp2_r:2,tp1_size:.5,breakeven_at_r:.8,trail_after_tp1_atr:1,time_stop_hours:48,rsi_period:14,rsi_oversold:30,rsi_overbought:70,atr_period:14,atr_tp_multiplier:3,use_ml_prediction:!0,ml_confidence_threshold:.6,ml_min_samples:100}}getPairSpecificStrategy(n){return{rsiThreshold:70,adxThreshold:25,bbWidthThreshold:.02,emaSlope:.5,atrPercentage:2.5,vwapDistance:1.2,momentumThreshold:.8,useMLPrediction:!0,minSamplesForML:100,...{BTCUSDT:{rsiThreshold:70,adxThreshold:25,momentumThreshold:.8},ETHUSDT:{rsiThreshold:68,adxThreshold:23,momentumThreshold:.85},SOLUSDT:{rsiThreshold:65,adxThreshold:27,momentumThreshold:.9},ADAUSDT:{rsiThreshold:72,adxThreshold:22,momentumThreshold:.75},DOTUSDT:{rsiThreshold:70,adxThreshold:24,momentumThreshold:.8},AVAXUSDT:{rsiThreshold:65,adxThreshold:28,momentumThreshold:.9},BNBUSDT:{rsiThreshold:70,adxThreshold:25,momentumThreshold:.8},XRPUSDT:{rsiThreshold:72,adxThreshold:20,momentumThreshold:.7},MATICUSDT:{rsiThreshold:70,adxThreshold:24,momentumThreshold:.8},LINKUSDT:{rsiThreshold:68,adxThreshold:26,momentumThreshold:.85},UNIUSDT:{rsiThreshold:70,adxThreshold:25,momentumThreshold:.8},LTCUSDT:{rsiThreshold:72,adxThreshold:22,momentumThreshold:.75}}[n]||{}}}getPairBasicSettings(n,a){return{...{BTCUSDT:{tradeAmount:100,stopLoss:2,takeProfit:4},ETHUSDT:{tradeAmount:100,stopLoss:2.2,takeProfit:4.5},SOLUSDT:{tradeAmount:75,stopLoss:2.5,takeProfit:5},ADAUSDT:{tradeAmount:100,stopLoss:2,takeProfit:4},DOTUSDT:{tradeAmount:100,stopLoss:2.2,takeProfit:4.5},AVAXUSDT:{tradeAmount:75,stopLoss:2.5,takeProfit:5},BNBUSDT:{tradeAmount:100,stopLoss:2,takeProfit:4},XRPUSDT:{tradeAmount:100,stopLoss:1.8,takeProfit:3.5},MATICUSDT:{tradeAmount:100,stopLoss:2.2,takeProfit:4.5},LINKUSDT:{tradeAmount:100,stopLoss:2.2,takeProfit:4.5},UNIUSDT:{tradeAmount:100,stopLoss:2,takeProfit:4},LTCUSDT:{tradeAmount:100,stopLoss:2,takeProfit:4}}[n]||{tradeAmount:100,stopLoss:2,takeProfit:4},leverage:a==="futures"?5:1}}getPairRiskAssessment(n){return{BTCUSDT:"medium",ETHUSDT:"medium",SOLUSDT:"high",ADAUSDT:"medium",DOTUSDT:"medium",AVAXUSDT:"high",BNBUSDT:"medium",XRPUSDT:"medium",MATICUSDT:"medium",LINKUSDT:"medium",UNIUSDT:"medium",LTCUSDT:"low"}[n]||"medium"}getPairCharacteristics(n){return{BTCUSDT:"High liquidity, moderate volatility, trend-following preferred",ETHUSDT:"High liquidity, moderate-high volatility, good for momentum",SOLUSDT:"High volatility, strong trends, momentum strategies work well",ADAUSDT:"Medium volatility, mean-reversion opportunities",DOTUSDT:"Medium-high volatility, trend-following preferred",AVAXUSDT:"High volatility, strong momentum, aggressive strategies",BNBUSDT:"High liquidity, moderate volatility, stable trends",XRPUSDT:"Medium volatility, news-sensitive, cautious approach",MATICUSDT:"Medium volatility, good for both trend and mean-reversion",LINKUSDT:"Medium-high volatility, momentum strategies",UNIUSDT:"Medium volatility, DeFi correlation, trend-following",LTCUSDT:"Medium volatility, stable trends, conservative approach"}[n]||"Medium volatility, standard trading approach recommended"}buildChangesList(n,a){const p=[];if(!a)return p;if(a.strategy){const r=(n==null?void 0:n.strategy)||{};Object.keys(a.strategy).forEach(m=>{const v=a.strategy[m],b=r[m];v!==void 0&&v!==b&&p.push({parameter:`Strategy.${m}`,recommendedValue:v,defaultValue:b,reason:"Optimized for better performance"})})}if(a.advancedConfig){const r=(n==null?void 0:n.advancedConfig)||{};["risk_per_trade_pct","daily_loss_limit_pct","weekly_loss_limit_pct","max_trades_per_day","max_concurrent","max_consecutive_losses","sl_atr_mult","tp1_r","tp2_r","tp1_size","breakeven_at_r","trail_after_tp1_atr","time_stop_hours","bias_mode","adx_min_htf","htf_timeframe","htf_trend_indicator","require_adx_rising","regime_mode","adx_trend_min","adx_meanrev_max","atr_percentile_min","bb_width_min","bb_width_max","max_spread_bps","rsi_oversold","rsi_overbought","rsi_period","use_ml_prediction","ml_confidence_threshold","ml_min_samples"].forEach(v=>{var l;const b=(l=a.advancedConfig)==null?void 0:l[v],j=r==null?void 0:r[v];b!==void 0&&b!==j&&p.push({parameter:`Advanced.${v}`,recommendedValue:b,defaultValue:j!==void 0?j:"default",reason:this.getParameterReason(v)})})}return p}getParameterReason(n){return{risk_per_trade_pct:"Optimized risk per trade",adx_min_htf:"Optimized trend strength requirement",sl_atr_mult:"Optimized stop loss multiplier",tp1_r:"Optimized take profit ratio",tp2_r:"Optimized second take profit ratio",bias_mode:"Optimized directional bias",regime_mode:"Optimized market regime filter",max_trades_per_day:"Optimized daily trade limit",max_concurrent:"Optimized concurrent positions",rsi_oversold:"Optimized RSI oversold level",rsi_overbought:"Optimized RSI overbought level",use_ml_prediction:"Optimized ML prediction usage",ml_confidence_threshold:"Optimized ML confidence threshold"}[n]||"Optimized for better performance"}getDefaultRecommendations(n,a,p){const r=this.getPairSpecificStrategy(n),m=this.getPairBasicSettings(n,a),v=this.getPairRiskAssessment(n),b=this.getDefaultAdvancedConfig(n,a),j=this.buildChangesList({strategy:{rsiThreshold:70,adxThreshold:25,bbWidthThreshold:.02,emaSlope:.5,atrPercentage:2.5,vwapDistance:1.2,momentumThreshold:.8,useMLPrediction:!0,minSamplesForML:100},advancedConfig:this.getDefaultAdvancedConfig(n,a)},{strategy:r,advancedConfig:b});return{symbol:n,recommended:!0,confidence:.7,reasoning:`Pair-specific recommended settings for ${n} based on historical characteristics`,strategy:r,advancedConfig:b,expectedPerformance:`Optimized settings for ${n} - expected improved performance`,riskAssessment:v,suggestedTradeAmount:m.tradeAmount,suggestedLeverage:m.leverage,suggestedStopLoss:m.stopLoss,suggestedTakeProfit:m.takeProfit,changes:j}}}const ke=new we;function Se({symbol:B,tradingType:n,currentStrategy:a,currentAdvancedConfig:p,currentTradeAmount:r,currentLeverage:m,currentStopLoss:v,currentTakeProfit:b,onApplyRecommendation:j}){const[l,M]=_.useState(null),[N,T]=_.useState(!1),[C,w]=_.useState(null),[D,R]=_.useState(!1),[k,P]=_.useState(!1),[i,y]=_.useState(()=>{const o=localStorage.getItem("ai_provider_preference");return o==="openai"||o==="deepseek"?o:f.isProviderAvailable("deepseek")?"deepseek":"openai"}),u=async()=>{T(!0),w(null);try{f.setProvider(i);const o=await ke.getRecommendationsForPair(B,n,{strategy:a,advancedConfig:p,tradeAmount:r,leverage:m,stopLoss:v,takeProfit:b});o?(M(o),w(null)):(console.warn("Recommendations service returned null, using fallback"),w("AI recommendations unavailable, showing pair-specific defaults"))}catch(o){console.error("Error fetching recommendations:",o),w(o.message||"Error fetching recommendations")}finally{T(!1)}};_.useEffect(()=>{(async()=>{console.log("ğŸ” [PairRecommendations] Checking AI keys from Edge Function...");try{const d=await f.checkKeysFromEdgeFunction();console.log("âœ… [PairRecommendations] Keys status:",d);const h=await f.isProviderAvailableAsync("openai"),S=await f.isProviderAvailableAsync("deepseek");console.log(`ğŸ” [PairRecommendations] Provider availability - OpenAI: ${h}, DeepSeek: ${S}`),P(h||S),f.isProviderAvailable(i)||(S?(y("deepseek"),console.log("ğŸ”„ [PairRecommendations] Switched to DeepSeek (current provider not available)")):h&&(y("openai"),console.log("ğŸ”„ [PairRecommendations] Switched to OpenAI (current provider not available)")))}catch(d){console.error("âŒ [PairRecommendations] Error checking keys:",d)}})(),f.refreshKeys()},[]);const L=o=>{if(!f.isProviderAvailable(o)){w(`${o==="openai"?"OpenAI":"DeepSeek"} API key not configured. Please set it in your environment variables.`);return}y(o),f.setProvider(o)},$=()=>{l&&j(l)};return N?e.jsx(H,{className:"p-4 border-2 border-blue-200 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),e.jsxs("span",{className:"text-blue-700 font-medium",children:["ğŸ¤– AI (",i,") analyzing ",B,"..."]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Using:"}),e.jsxs("select",{value:i,onChange:o=>L(o.target.value),className:"px-2 py-1 border border-gray-300 rounded bg-white text-gray-700 text-xs",disabled:N,children:[e.jsxs("option",{value:"deepseek",disabled:!f.isProviderAvailable("deepseek"),children:["DeepSeek ",f.isProviderAvailable("deepseek")?"":"(Not configured)"]}),e.jsxs("option",{value:"openai",disabled:!f.isProviderAvailable("openai"),children:["OpenAI ",f.isProviderAvailable("openai")?"":"(Not configured)"]})]})]})]})}):C&&!l?e.jsx(H,{className:"p-4 border-2 border-yellow-200 bg-yellow-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-information-line text-yellow-600 mr-2"}),e.jsxs("span",{className:"text-yellow-700",children:["âš ï¸ ",C]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:i,onChange:o=>L(o.target.value),className:"px-2 py-1 border border-gray-300 rounded bg-white text-gray-700 text-xs",disabled:N,children:[e.jsxs("option",{value:"deepseek",disabled:!f.isProviderAvailable("deepseek"),children:["DeepSeek ",f.isProviderAvailable("deepseek")?"":"(Not configured)"]}),e.jsxs("option",{value:"openai",disabled:!f.isProviderAvailable("openai"),children:["OpenAI ",f.isProviderAvailable("openai")?"":"(Not configured)"]})]}),e.jsx(q,{variant:"outline",size:"sm",onClick:u,className:"text-xs",children:"Retry"})]})]}),e.jsx("p",{className:"text-xs text-yellow-600",children:"The AI recommendation service may not be available. You can still create the bot with default settings."})]})}):!l&&!C&&!N?(k||f.isProviderAvailable("openai")||f.isProviderAvailable("deepseek"),e.jsx(H,{className:"p-4 border-2 border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"ğŸ¤– AI Recommendations"}),e.jsx("p",{className:"text-xs text-gray-500",children:k?`Get AI-powered recommendations for ${B}`:"Configure AI API keys in Settings to get recommendations"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:i,onChange:o=>L(o.target.value),className:"px-2 py-1 border border-gray-300 rounded bg-white text-gray-700 text-xs",disabled:N,children:[e.jsxs("option",{value:"deepseek",disabled:!f.isProviderAvailable("deepseek"),children:["DeepSeek ",f.isProviderAvailable("deepseek")?"":"(Not configured)"]}),e.jsxs("option",{value:"openai",disabled:!f.isProviderAvailable("openai"),children:["OpenAI ",f.isProviderAvailable("openai")?"":"(Not configured)"]})]}),e.jsxs(q,{variant:"primary",size:"sm",onClick:u,className:"text-xs",disabled:N||!k,children:[e.jsx("i",{className:"ri-magic-line mr-1"}),"Get AI Recommendations"]})]}),!k&&e.jsx("p",{className:"text-xs text-yellow-600",children:"âš ï¸ No AI providers configured. Go to Settings â†’ AI Recommendations to add your API keys."})]})})):l?e.jsx(H,{className:"p-4 border-2 border-purple-300 bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2 flex-wrap gap-2",children:[e.jsx("i",{className:"ri-magic-line text-purple-600 text-xl mr-2"}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["ğŸ¤– AI Recommendations for ",B]}),e.jsxs("span",{className:`ml-2 px-2 py-1 rounded text-xs font-semibold ${l.confidence>=.8?"bg-green-100 text-green-800":l.confidence>=.6?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[Math.round(l.confidence*100),"% Confidence"]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"AI Provider:"}),e.jsxs("select",{value:i,onChange:o=>L(o.target.value),className:"px-2 py-1 border border-gray-300 rounded bg-white text-gray-700 text-xs font-medium",disabled:N,children:[e.jsxs("option",{value:"deepseek",disabled:!f.isProviderAvailable("deepseek"),children:["DeepSeek ",f.isProviderAvailable("deepseek")?"":"(Not configured)"]}),e.jsxs("option",{value:"openai",disabled:!f.isProviderAvailable("openai"),children:["OpenAI ",f.isProviderAvailable("openai")?"":"(Not configured)"]})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:u,className:"text-xs",title:"Refresh recommendations with current AI provider",children:[e.jsx("i",{className:"ri-refresh-line mr-1"}),"Refresh"]})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:l.reasoning}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"ri-line-chart-line mr-1"}),l.expectedPerformance]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"ri-shield-line mr-1"}),"Risk: ",e.jsx("span",{className:"font-semibold capitalize ml-1",children:l.riskAssessment})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Trade Amount"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["$",l.suggestedTradeAmount]}),r&&r!==l.suggestedTradeAmount&&e.jsxs("div",{className:"text-xs text-gray-400 line-through",children:["$",r]})]}),n==="futures"&&e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Leverage"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[l.suggestedLeverage,"x"]}),m&&m!==l.suggestedLeverage&&e.jsxs("div",{className:"text-xs text-gray-400 line-through",children:[m,"x"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Stop Loss"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[l.suggestedStopLoss,"%"]}),v&&v!==l.suggestedStopLoss&&e.jsxs("div",{className:"text-xs text-gray-400 line-through",children:[v,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Take Profit"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[l.suggestedTakeProfit,"%"]}),b&&b!==l.suggestedTakeProfit&&e.jsxs("div",{className:"text-xs text-gray-400 line-through",children:[b,"%"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{onClick:()=>R(!D),className:"text-sm text-purple-600 hover:text-purple-800 font-medium flex items-center",children:[e.jsx("i",{className:`ri-arrow-${D?"up":"down"}-s-line mr-1`}),l.changes.length>0?e.jsxs(e.Fragment,{children:[l.changes.length," Optimization",l.changes.length!==1?"s":""," Recommended",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",l.changes.filter(o=>o.parameter.startsWith("Strategy.")).length," Strategy, ",l.changes.filter(o=>o.parameter.startsWith("Advanced.")).length," Advanced)"]})]}):e.jsxs(e.Fragment,{children:["View All Recommended Parameters",e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Strategy + Advanced Config)"})]})]}),D&&e.jsx("div",{className:"mt-2 bg-white rounded-lg p-3 border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx("i",{className:"ri-settings-3-line mr-1"}),"Strategy Parameters"]}),e.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:[l.strategy&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"RSI Threshold:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.rsiThreshold})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"ADX Threshold:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.adxThreshold})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"BB Width Threshold:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.bbWidthThreshold})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"EMA Slope:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.emaSlope})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"ATR Percentage:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.atrPercentage})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Momentum Threshold:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.momentumThreshold})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Use ML Prediction:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:l.strategy.useMLPrediction?"Yes":"No"})]})]}),l.changes.filter(o=>o.parameter.startsWith("Strategy.")).map((o,d)=>e.jsx("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-yellow-50 rounded border border-yellow-200",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[o.parameter.replace("Strategy.",""),":"]}),e.jsx("span",{className:"ml-2 text-gray-500 line-through",children:String(o.defaultValue)}),e.jsx("span",{className:"mx-2 text-gray-400",children:"â†’"}),e.jsx("span",{className:"text-green-600 font-semibold",children:String(o.recommendedValue)})]})},`change-${d}`))]})]}),l.advancedConfig&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx("i",{className:"ri-settings-4-line mr-1"}),"âš™ï¸ Advanced Strategy Configuration"]}),e.jsxs("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Risk/Trade:"}),e.jsxs("span",{className:"ml-1 text-green-600 font-semibold",children:[l.advancedConfig.risk_per_trade_pct,"%"]})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Max Trades/Day:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.max_trades_per_day})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"SL ATR Mult:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.sl_atr_mult})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"TP1 Ratio:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.tp1_r})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"TP2 Ratio:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.tp2_r})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"ADX Min HTF:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.adx_min_htf})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Bias Mode:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.bias_mode})]}),e.jsxs("div",{className:"py-1 px-2 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Regime Mode:"}),e.jsx("span",{className:"ml-1 text-green-600 font-semibold",children:l.advancedConfig.regime_mode})]})]}),l.changes.filter(o=>o.parameter.startsWith("Advanced.")).map((o,d)=>e.jsx("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-yellow-50 rounded border border-yellow-200",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[o.parameter.replace("Advanced.",""),":"]}),e.jsx("span",{className:"ml-2 text-gray-500 line-through",children:String(o.defaultValue)}),e.jsx("span",{className:"mx-2 text-gray-400",children:"â†’"}),e.jsx("span",{className:"text-green-600 font-semibold",children:String(o.recommendedValue)}),e.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:["(",o.reason,")"]})]})},`adv-change-${d}`)),e.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"All 30+ Advanced Config parameters are configured and will be applied."})]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-purple-200",children:[e.jsxs(q,{onClick:$,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold",children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Apply AI Recommendations"]}),e.jsx(q,{variant:"outline",onClick:u,className:"px-3",title:"Refresh recommendations",children:e.jsx("i",{className:"ri-refresh-line"})})]})]})}):null}function Ie(){var te,re,ae,le,ie,ne,oe,de,ce,me,xe;const B=fe(),n=be(),[a]=ve(),{createBot:p}=_e(),r=n.state,m=(r==null?void 0:r.fromBacktest)===!0,v=a.get("template")==="pablo-ready",b=a.get("botId"),j=a.get("symbol")||"BTCUSDT",l=a.get("exchange")||"bybit",M=a.get("tradingType")||"spot",N=a.get("leverage")?parseInt(a.get("leverage")):5,T=a.get("riskLevel")||"medium",C=a.get("tradeAmount")?parseFloat(a.get("tradeAmount")):100,w=a.get("stopLoss")?parseFloat(a.get("stopLoss")):2,D=a.get("takeProfit")?parseFloat(a.get("takeProfit")):4,R=a.get("timeframe")||"1h",k=a.get("strategy"),P=a.get("strategyConfig"),[i,y]=_.useState({name:m&&(r!=null&&r.botName)?r.botName:v&&a.get("name")?a.get("name"):"",exchange:m&&((te=r==null?void 0:r.backtestConfig)!=null&&te.exchange)?r.backtestConfig.exchange:l,tradingType:m&&((re=r==null?void 0:r.backtestConfig)!=null&&re.tradingType)?r.backtestConfig.tradingType:M,symbol:m&&((le=(ae=r==null?void 0:r.backtestConfig)==null?void 0:ae.symbols)!=null&&le[0])?r.backtestConfig.symbols[0]:j,timeframe:m&&((ie=r==null?void 0:r.backtestConfig)!=null&&ie.timeframe)?r.backtestConfig.timeframe:R,leverage:m&&((ne=r==null?void 0:r.backtestConfig)!=null&&ne.leverage)?r.backtestConfig.leverage:N,riskLevel:m&&((oe=r==null?void 0:r.backtestConfig)!=null&&oe.riskLevel)?r.backtestConfig.riskLevel:T,tradeAmount:m&&((de=r==null?void 0:r.backtestConfig)!=null&&de.tradeAmount)?r.backtestConfig.tradeAmount:C,stopLoss:m&&((ce=r==null?void 0:r.backtestConfig)!=null&&ce.stopLoss)?r.backtestConfig.stopLoss:w,takeProfit:m&&((me=r==null?void 0:r.backtestConfig)!=null&&me.takeProfit)?r.backtestConfig.takeProfit:D,paperTrading:!1});_.useEffect(()=>{j&&y(s=>({...s,symbol:j,exchange:l,tradingType:M,timeframe:R,leverage:N,riskLevel:T,tradeAmount:C,stopLoss:w,takeProfit:D}))},[j,l,M,R,N,T,C,w,D]);const[u,L]=_.useState(""),[$,o]=_.useState(""),[d,h]=_.useState(!1),[S,K]=_.useState("");_.useEffect(()=>{v&&b&&(async()=>{try{const{data:t,error:A}=await J.from("pablo_ready_bots").select("*").eq("id",b).eq("enabled",!0).single();if(A)throw A;if(t){let F=t.strategy||{},E=t.strategy_config||{};if(k)try{F=JSON.parse(k)}catch{console.warn("Failed to parse strategy from URL")}if(P)try{E=JSON.parse(P)}catch{console.warn("Failed to parse strategy config from URL")}y(x=>({...x,name:a.get("name")||t.name||x.name,exchange:a.get("exchange")||t.exchange||x.exchange,tradingType:a.get("tradingType")||t.trading_type||x.tradingType,symbol:a.get("symbol")||t.symbol||x.symbol,timeframe:a.get("timeframe")||t.timeframe||x.timeframe,leverage:a.get("leverage")?parseInt(a.get("leverage")):t.leverage||x.leverage,riskLevel:a.get("riskLevel")||t.risk_level||x.riskLevel,tradeAmount:a.get("tradeAmount")?parseFloat(a.get("tradeAmount")):t.trade_amount||x.tradeAmount,stopLoss:a.get("stopLoss")?parseFloat(a.get("stopLoss")):t.stop_loss||x.stopLoss,takeProfit:a.get("takeProfit")?parseFloat(a.get("takeProfit")):t.take_profit||x.takeProfit})),F&&Object.keys(F).length>0&&G(F),E&&Object.keys(E).length>0&&g({...{bias_mode:"auto",htf_timeframe:"4h",htf_trend_indicator:"EMA200",ema_fast_period:50,require_price_vs_trend:"any",adx_min_htf:23,require_adx_rising:!0,regime_mode:"auto",adx_trend_min:25,adx_meanrev_max:19,session_filter_enabled:!1,allowed_hours_utc:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],cooldown_bars:8,atr_percentile_min:20,bb_width_min:.012,bb_width_max:.03,min_24h_volume_usd:5e8,max_spread_bps:3,risk_per_trade_pct:.75,daily_loss_limit_pct:3,weekly_loss_limit_pct:6,max_trades_per_day:8,max_concurrent:2,max_consecutive_losses:5,sl_atr_mult:1.3,tp1_r:1,tp2_r:2,tp1_size:.5,breakeven_at_r:.8,trail_after_tp1_atr:1,time_stop_hours:48,rsi_period:14,rsi_oversold:30,rsi_overbought:70,atr_period:14,atr_tp_multiplier:3,use_ml_prediction:!0,ml_confidence_threshold:.6,ml_min_samples:100},...E})}}catch(t){console.error("Failed to load Pablo Ready bot:",t)}})()},[v,b]);const[I,G]=_.useState(m&&(r!=null&&r.backtestStrategy)?r.backtestStrategy:{rsiThreshold:70,adxThreshold:25,bbWidthThreshold:.02,emaSlope:.5,atrPercentage:2.5,vwapDistance:1.2,momentumThreshold:.8,useMLPrediction:!0,minSamplesForML:100}),[c,g]=_.useState(m&&(r!=null&&r.backtestAdvancedConfig)?r.backtestAdvancedConfig:{bias_mode:"auto",htf_timeframe:"4h",htf_trend_indicator:"EMA200",ema_fast_period:50,require_price_vs_trend:"any",adx_min_htf:23,require_adx_rising:!0,regime_mode:"auto",adx_trend_min:25,adx_meanrev_max:19,session_filter_enabled:!1,allowed_hours_utc:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],cooldown_bars:8,atr_percentile_min:20,bb_width_min:.012,bb_width_max:.03,min_24h_volume_usd:5e8,max_spread_bps:3,risk_per_trade_pct:.75,daily_loss_limit_pct:3,weekly_loss_limit_pct:6,max_trades_per_day:8,max_concurrent:2,max_consecutive_losses:5,sl_atr_mult:1.3,tp1_r:1,tp2_r:2,tp1_size:.5,breakeven_at_r:.8,trail_after_tp1_atr:1,time_stop_hours:48,rsi_period:14,rsi_oversold:30,rsi_overbought:70,atr_period:14,atr_tp_multiplier:3,use_ml_prediction:!0,ml_confidence_threshold:.6,ml_min_samples:100});_.useEffect(()=>{var s;if(m&&((s=r==null?void 0:r.backtestConfig)!=null&&s.symbols)){const t=r.backtestConfig.symbols;t.length>1&&(h(!0),K(t.join(", ")))}},[m,r]);const[Y,Z]=_.useState(!1),[Q,V]=_.useState(!1),[ee,X]=_.useState(null),ge=["BTCUSDT","ETHUSDT","SOLUSDT","ADAUSDT","DOTUSDT","AVAXUSDT","BNBUSDT","XRPUSDT","MATICUSDT","LINKUSDT","UNIUSDT","LTCUSDT"],ue=async s=>{s.preventDefault(),V(!0),X(null);try{let t=i.symbol,A=[],F="";if(d){if(!S.trim()){X("Please enter at least one trading pair"),V(!1);return}const x=S.split(/[\n,]/).map(W=>W.trim().toUpperCase()).filter(W=>W.length>0);if(x.length===0){X("Please enter at least one valid trading pair"),V(!1);return}const U=x.filter(W=>!/^[A-Z0-9]{2,20}USDT$/.test(W));if(U.length>0){X(`Invalid pair format: ${U.join(", ")}. Must be uppercase and end with USDT`),V(!1);return}A=x,t=x[0],F=S.trim()}else{if(u.trim()){const x=u.trim().toUpperCase();if(!/^[A-Z0-9]{2,20}USDT$/.test(x)){o("Symbol must be uppercase and end with USDT (e.g., DOGEUSDT)"),V(!1);return}o(""),t=x}A=[t]}const E={name:i.name,exchange:i.exchange,tradingType:i.tradingType,symbol:t,symbols:A.length>1?A:void 0,customPairs:F||void 0,timeframe:i.timeframe,leverage:i.leverage,riskLevel:i.riskLevel,tradeAmount:i.tradeAmount,stopLoss:i.stopLoss,takeProfit:i.takeProfit,paperTrading:i.paperTrading,strategy:I,strategyConfig:c,status:"stopped",pnl:0,pnlPercentage:0,totalTrades:0,winRate:0,lastTradeAt:void 0};console.log("Frontend: Sending bot data:",E),console.log("Frontend: Exchange value:",i.exchange,"Type:",typeof i.exchange),await p(E),B("/bots",{state:{message:`Bot "${i.name}" created successfully!`}})}catch(t){X(t.message||"Failed to create bot")}finally{V(!1)}},O=(s,t)=>{y(A=>({...A,[s]:t}))},z=(s,t)=>{G(A=>({...A,[s]:t}))},pe=s=>{G({...s.strategy}),g(t=>({...t,...s.advanced,allowed_hours_utc:[...s.advanced.allowed_hours_utc]})),Z(!0),y(t=>({...t,tradeAmount:s.recommendedTradeAmount??t.tradeAmount,stopLoss:s.recommendedStopLoss??t.stopLoss,takeProfit:s.recommendedTakeProfit??t.takeProfit,riskLevel:s.recommendedRiskLevel??t.riskLevel})),console.log("Applied strategy preset:",s.key)},he=s=>{s.strategy&&(G(s.strategy),console.log("âœ… Applied Strategy Parameters:",s.strategy)),s.advancedConfig&&g(x=>{const U={...x,...s.advancedConfig,allowed_hours_utc:s.advancedConfig.allowed_hours_utc||x.allowed_hours_utc};return console.log("âœ… Applied Advanced Strategy Config:",U),U}),y(x=>({...x,tradeAmount:s.suggestedTradeAmount,leverage:s.suggestedLeverage,stopLoss:s.suggestedStopLoss,takeProfit:s.suggestedTakeProfit,riskLevel:s.riskAssessment}));const t=s.changes.filter(x=>x.parameter.startsWith("Strategy.")).length,A=s.changes.filter(x=>x.parameter.startsWith("Advanced.")).length,F=s.changes.length,E=`âœ… AI Recommendations Applied!

ğŸ“Š Summary:
â€¢ Strategy Parameters: ${t} optimized
â€¢ Advanced Config: ${A} optimized
â€¢ Basic Settings: Updated
â€¢ Total Changes: ${F} parameters

All settings have been applied to your bot configuration.`;alert(E),console.log("ğŸ“‹ All Applied Changes:",s.changes)},se=d?S.trim()?S.split(/[\n,]/).map(s=>s.trim().toUpperCase()).filter(s=>s.length>0)[0]:i.symbol:u.trim()?u.trim().toUpperCase():i.symbol;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ye,{title:"Create New Bot"}),e.jsx("div",{className:"pt-16 pb-6 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>B("/bots"),className:"mr-3 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Bot"})]}),ee&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:ee})]})}),m&&r&&e.jsx(H,{className:"p-4 mb-6 bg-green-50 border-2 border-green-300",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900 mb-1",children:"âœ… Form Pre-filled from Backtest"}),e.jsx("p",{className:"text-sm text-green-700 mb-2",children:'Your bot settings have been automatically filled from the backtest results. Review and adjust as needed, then click "Create Bot" to create your trading bot.'}),(r==null?void 0:r.backtestResults)&&e.jsxs("div",{className:"text-xs text-green-600 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Backtest Performance:"})," ",((xe=r.backtestResults.win_rate)==null?void 0:xe.toFixed(1))||0,"% win rate, $",(r.backtestResults.net_profit||r.backtestResults.total_pnl||0).toFixed(2)," net profit"]})]})]})}),e.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[e.jsxs(H,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Basic Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bot Name"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>O("name",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bot name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange"}),e.jsxs("select",{value:i.exchange,onChange:s=>O("exchange",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"bybit",children:"Bybit"}),e.jsx("option",{value:"okx",children:"OKX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Type"}),e.jsxs("select",{value:i.tradingType,onChange:s=>O("tradingType",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"spot",children:"Spot Trading"}),e.jsx("option",{value:"futures",children:"Futures Trading"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair"}),e.jsx("select",{value:i.symbol,onChange:s=>O("symbol",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ge.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pairMode",checked:!d,onChange:()=>h(!1),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Single Pair"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pairMode",checked:d,onChange:()=>h(!0),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Multiple Pairs"})]})]}),d?e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter multiple trading pairs"}),e.jsx("textarea",{value:S,onChange:s=>K(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase font-mono text-sm",placeholder:`BTCUSDT
ETHUSDT
SOLUSDT

Or comma-separated: BTCUSDT, ETHUSDT, SOLUSDT`,rows:6}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter pairs separated by commas or new lines. Each pair must be uppercase and end with USDT.",e.jsx("br",{}),"Example: ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"BTCUSDT, ETHUSDT, SOLUSDT"})," or one per line"]}),S.trim()&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded border border-blue-200",children:[e.jsxs("p",{className:"text-xs font-medium text-blue-900 mb-1",children:[S.split(/[\n,]/).filter(s=>s.trim().length>0).length," pair(s) detected:"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:S.split(/[\n,]/).map(s=>s.trim().toUpperCase()).filter(s=>s.length>0).map((s,t)=>e.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 text-blue-700",children:s},t))})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Or enter a custom pair (e.g., DOGEUSDT)"}),e.jsx("input",{type:"text",value:u,onChange:s=>L(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",placeholder:"e.g., PEPEUSDT"}),$&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:$}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uppercase; must end with USDT. If provided, overrides dropdown."})]})]}),se&&e.jsx("div",{className:"mt-4",children:e.jsx(Se,{symbol:se,tradingType:i.tradingType,currentStrategy:I,currentAdvancedConfig:c,currentTradeAmount:i.tradeAmount,currentLeverage:i.leverage,currentStopLoss:i.stopLoss,currentTakeProfit:i.takeProfit,onApplyRecommendation:he})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Frame"}),e.jsxs("select",{value:i.timeframe,onChange:s=>O("timeframe",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1m",children:"1 Minute"}),e.jsx("option",{value:"5m",children:"5 Minutes"}),e.jsx("option",{value:"15m",children:"15 Minutes"}),e.jsx("option",{value:"1h",children:"1 Hour"}),e.jsx("option",{value:"2h",children:"2 Hours"}),e.jsx("option",{value:"3h",children:"3 Hours"}),e.jsx("option",{value:"4h",children:"4 Hours"}),e.jsx("option",{value:"1d",children:"1 Day"}),e.jsx("option",{value:"1w",children:"1 Week"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Chart interval for technical analysis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leverage"}),e.jsxs("select",{value:i.leverage,onChange:s=>O("leverage",parseInt(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:5,children:"5x"}),e.jsx("option",{value:10,children:"10x"}),e.jsx("option",{value:20,children:"20x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),e.jsxs("select",{value:i.riskLevel,onChange:s=>O("riskLevel",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Low Risk"}),e.jsx("option",{value:"medium",children:"Medium Risk"}),e.jsx("option",{value:"high",children:"High Risk"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Amount (USD)"}),e.jsx("input",{type:"number",value:i.tradeAmount,onChange:s=>O("tradeAmount",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"10",max:"10000",step:"10",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Base trade amount in USD (will be multiplied by leverage and risk level)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stop Loss (%)"}),e.jsx("input",{type:"number",value:i.stopLoss,onChange:s=>O("stopLoss",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"10",step:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum loss percentage before closing position"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Take Profit (%)"}),e.jsx("input",{type:"number",value:i.takeProfit,onChange:s=>O("takeProfit",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"20",step:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target profit percentage before closing position"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cooldown (Bars)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`text-xs mr-2 ${c.cooldown_bars>0?"text-green-600":"text-gray-400"}`,children:c.cooldown_bars>0?"ON":"OFF"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.cooldown_bars>0,onChange:s=>{g(t=>({...t,cooldown_bars:s.target.checked?t.cooldown_bars||8:0}))},className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),c.cooldown_bars>0?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",value:c.cooldown_bars,onChange:s=>g(t=>({...t,cooldown_bars:parseInt(s.target.value)||8})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"100",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of bars to wait between trades (prevents overtrading)"})]}):e.jsx("p",{className:"text-xs text-gray-400 italic mt-1",children:"Cooldown disabled - bot can trade on every bar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Trading Hours (EST)"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:(c.allowed_hours_utc||[]).length===24,onChange:s=>{s.target.checked?g(t=>({...t,allowed_hours_utc:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],session_filter_enabled:!1})):g(t=>({...t,allowed_hours_utc:[],session_filter_enabled:!0}))},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All (24/7)"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:24},(s,t)=>{const A=(t-5+24)%24,F=(c.allowed_hours_utc||[]).includes(t);return e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:E=>{E.target.checked?g(x=>({...x,allowed_hours_utc:[...x.allowed_hours_utc||[],t].sort((U,W)=>U-W),session_filter_enabled:!0})):g(x=>({...x,allowed_hours_utc:(x.allowed_hours_utc||[]).filter(U=>U!==t),session_filter_enabled:(x.allowed_hours_utc||[]).filter(U=>U!==t).length>0}))},className:"mr-1 h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("span",{className:"text-xs text-gray-700",children:[A.toString().padStart(2,"0"),":00 EST"]})]},t)})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select hours when bot is allowed to trade (stored in UTC, displayed in EST)"})]})]})]}),e.jsx(H,{className:"p-6 bg-yellow-50 border-2 border-yellow-200",children:e.jsxs("div",{className:"flex items-start mb-2",children:[e.jsx("input",{type:"checkbox",id:"paperTrading",checked:i.paperTrading,onChange:s=>y(t=>({...t,paperTrading:s.target.checked})),className:"mr-3 h-5 w-5 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"paperTrading",className:"text-lg font-semibold text-gray-900 cursor-pointer",children:"ğŸ“ Enable Paper Trading (Simulation Mode)"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Uses REAL mainnet market data but simulates all trades. Perfect for testing strategies risk-free. No real orders will be placed when this is enabled."}),i.paperTrading&&e.jsxs("div",{className:"mt-3 p-3 bg-white rounded border border-yellow-300",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-2",children:"âœ… Paper Trading Enabled - All trades will be simulated"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["â€¢ Uses real mainnet market data for accuracy",e.jsx("br",{}),"â€¢ Virtual balance: $10,000 (can be adjusted in settings)",e.jsx("br",{}),"â€¢ No real API orders will be placed",e.jsx("br",{}),"â€¢ Perfect for strategy testing"]})]})]})]})}),e.jsxs(H,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Strategy Parameters"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 flex items-center gap-2 text-sm md:text-base",children:[e.jsx("i",{className:"ri-brain-line"}),"AI Strategy Presets"]}),e.jsx("span",{className:"hidden md:block text-xs text-purple-700",children:"Apply vetted AI configurations in one click"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:je.map(s=>e.jsxs("button",{type:"button",onClick:()=>pe(s),className:"px-3 py-2 rounded-lg border border-purple-300 bg-white text-purple-700 hover:bg-purple-100 text-sm font-medium flex items-center gap-2 transition-colors",children:[e.jsx("i",{className:"ri-flashlight-line"}),s.label]},s.key))}),e.jsx("p",{className:"text-xs text-purple-700 mt-3",children:"Presets automatically tune core indicators, risk controls, and recommended trade sizing."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Threshold"}),e.jsx("input",{type:"number",value:I.rsiThreshold,onChange:s=>z("rsiThreshold",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"30",max:"90",step:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ADX Threshold"}),e.jsx("input",{type:"number",value:I.adxThreshold,onChange:s=>z("adxThreshold",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"10",max:"50",step:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BB Width Threshold"}),e.jsx("input",{type:"number",value:I.bbWidthThreshold,onChange:s=>z("bbWidthThreshold",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.01",max:"0.1",step:"0.005"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EMA Slope"}),e.jsx("input",{type:"number",value:I.emaSlope,onChange:s=>z("emaSlope",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.1",max:"2",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ATR Percentage"}),e.jsx("input",{type:"number",value:I.atrPercentage,onChange:s=>z("atrPercentage",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"10",step:"0.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VWAP Distance"}),e.jsx("input",{type:"number",value:I.vwapDistance,onChange:s=>z("vwapDistance",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"3",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Momentum Threshold"}),e.jsx("input",{type:"number",value:I.momentumThreshold,onChange:s=>z("momentumThreshold",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.1",max:"2",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Samples for ML"}),e.jsx("input",{type:"number",value:I.minSamplesForML,onChange:s=>z("minSamplesForML",parseInt(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"50",max:"500",step:"25"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:I.useMLPrediction,onChange:s=>z("useMLPrediction",s.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable ML Prediction (fallback to rules until min samples)"})]})})]}),e.jsxs(H,{className:"p-6",children:[e.jsxs("button",{type:"button",onClick:()=>Z(!Y),className:"w-full flex items-center justify-between text-left",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"âš™ï¸ Advanced Strategy Configuration"}),e.jsx("i",{className:`ri-arrow-${Y?"up":"down"}-s-line text-2xl text-gray-600`})]}),Y&&e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"ğŸ¯ Directional Bias"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bias Mode"}),e.jsxs("select",{value:c.bias_mode,onChange:s=>g(t=>({...t,bias_mode:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"auto",children:"Auto (Follow HTF Trend)"}),e.jsx("option",{value:"long-only",children:"Long Only"}),e.jsx("option",{value:"short-only",children:"Short Only"}),e.jsx("option",{value:"both",children:"Both Directions"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HTF Timeframe"}),e.jsx("select",{value:c.htf_timeframe,onChange:s=>g(t=>({...t,htf_timeframe:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HTF Trend Indicator"}),e.jsx("select",{value:c.htf_trend_indicator,onChange:s=>g(t=>({...t,htf_trend_indicator:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Te.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ADX Min (HTF): ",c.adx_min_htf]}),e.jsx("input",{type:"range",value:c.adx_min_htf,onChange:s=>g(t=>({...t,adx_min_htf:parseFloat(s.target.value)})),className:"w-full",min:"15",max:"35",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum ADX for trend confirmation"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-indigo-500 pl-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"ğŸ“ Indicator Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EMA Length"}),e.jsx("input",{type:"number",value:c.ema_fast_period??50,onChange:s=>g(t=>({...t,ema_fast_period:parseInt(s.target.value)||50})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:1,max:500})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ATR Length"}),e.jsx("input",{type:"number",value:c.atr_period??14,onChange:s=>g(t=>({...t,atr_period:parseInt(s.target.value)||14})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:1,max:200})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ATR TP Multiplier"}),e.jsx("input",{type:"number",value:c.atr_tp_multiplier??3,onChange:s=>g(t=>({...t,atr_tp_multiplier:parseFloat(s.target.value)||3})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:.5,max:10,step:.1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ATR SL Multiplier"}),e.jsx("input",{type:"number",value:c.sl_atr_mult,onChange:s=>g(t=>({...t,sl_atr_mult:parseFloat(s.target.value)||t.sl_atr_mult})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:.5,max:5,step:.1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Length"}),e.jsx("input",{type:"number",value:c.rsi_period??14,onChange:s=>g(t=>({...t,rsi_period:parseInt(s.target.value)||14})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:5,max:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Overbought"}),e.jsx("input",{type:"number",value:c.rsi_overbought??70,onChange:s=>g(t=>({...t,rsi_overbought:parseInt(s.target.value)||70})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:50,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Oversold"}),e.jsx("input",{type:"number",value:c.rsi_oversold??30,onChange:s=>g(t=>({...t,rsi_oversold:parseInt(s.target.value)||30})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:0,max:50})]})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"ğŸ“Š Regime Filter"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Regime Mode"}),e.jsxs("select",{value:c.regime_mode,onChange:s=>g(t=>({...t,regime_mode:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"auto",children:"Auto Detect"}),e.jsx("option",{value:"trend",children:"Trend Only"}),e.jsx("option",{value:"mean-reversion",children:"Mean Reversion Only"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ADX Trend Min: ",c.adx_trend_min]}),e.jsx("input",{type:"range",value:c.adx_trend_min,onChange:s=>g(t=>({...t,adx_trend_min:parseFloat(s.target.value)})),className:"w-full",min:"20",max:"35",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ADX â‰¥ this = trending"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ADX Mean Rev Max: ",c.adx_meanrev_max]}),e.jsx("input",{type:"range",value:c.adx_meanrev_max,onChange:s=>g(t=>({...t,adx_meanrev_max:parseFloat(s.target.value)})),className:"w-full",min:"15",max:"25",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ADX â‰¤ this = ranging"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"ğŸ›¡ï¸ Risk Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Risk Per Trade: ",c.risk_per_trade_pct,"%"]}),e.jsx("input",{type:"range",value:c.risk_per_trade_pct,onChange:s=>g(t=>({...t,risk_per_trade_pct:parseFloat(s.target.value)})),className:"w-full",min:"0.25",max:"2.0",step:"0.25"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Daily Loss Limit: ",c.daily_loss_limit_pct,"%"]}),e.jsx("input",{type:"range",value:c.daily_loss_limit_pct,onChange:s=>g(t=>({...t,daily_loss_limit_pct:parseFloat(s.target.value)})),className:"w-full",min:"1",max:"10",step:"0.5"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Max Trades/Day: ",c.max_trades_per_day]}),e.jsx("input",{type:"range",value:c.max_trades_per_day,onChange:s=>g(t=>({...t,max_trades_per_day:parseInt(s.target.value)})),className:"w-full",min:"1",max:"200",step:"1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Weekly Loss Limit: ",c.weekly_loss_limit_pct,"%"]}),e.jsx("input",{type:"range",value:c.weekly_loss_limit_pct,onChange:s=>g(t=>({...t,weekly_loss_limit_pct:parseFloat(s.target.value)})),className:"w-full",min:"2",max:"15",step:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-pause if weekly loss exceeds"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Max Concurrent Positions: ",c.max_concurrent]}),e.jsx("input",{type:"range",value:c.max_concurrent,onChange:s=>g(t=>({...t,max_concurrent:parseInt(s.target.value)})),className:"w-full",min:"1",max:"5",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Max open positions simultaneously"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-orange-500 pl-4 mt-6",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"ğŸ›¡ï¸ Safety Features"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure automatic safety limits to protect your bot from excessive losses."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Max Consecutive Losses: ",c.max_consecutive_losses||5]}),e.jsx("input",{type:"range",value:c.max_consecutive_losses||5,onChange:s=>g(t=>({...t,max_consecutive_losses:parseInt(s.target.value)})),className:"w-full",min:"2",max:"10",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-pause bot after this many consecutive losses"})]})})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"ğŸ¯ Exit Strategy"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["TP1 (R): ",c.tp1_r]}),e.jsx("input",{type:"range",value:c.tp1_r,onChange:s=>g(t=>({...t,tp1_r:parseFloat(s.target.value)})),className:"w-full",min:"0.5",max:"3.0",step:"0.25"}),e.jsx("p",{className:"text-xs text-gray-500",children:"First take profit (R = Risk units)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["TP2 (R): ",c.tp2_r]}),e.jsx("input",{type:"range",value:c.tp2_r,onChange:s=>g(t=>({...t,tp2_r:parseFloat(s.target.value)})),className:"w-full",min:"1.0",max:"5.0",step:"0.25"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Second take profit"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["TP1 Size: ",(c.tp1_size*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",value:c.tp1_size,onChange:s=>g(t=>({...t,tp1_size:parseFloat(s.target.value)})),className:"w-full",min:"0.25",max:"0.75",step:"0.05"}),e.jsx("p",{className:"text-xs text-gray-500",children:"% to close at TP1"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"âš¡ Quick Presets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>g({...c,bias_mode:"auto",regime_mode:"trend",risk_per_trade_pct:.5,max_trades_per_day:6,tp1_r:1.5,tp2_r:3}),className:"px-4 py-2 bg-white border-2 border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 font-medium",children:"ğŸ¢ Conservative"}),e.jsx("button",{type:"button",onClick:()=>g({...c,bias_mode:"auto",regime_mode:"auto",risk_per_trade_pct:.75,max_trades_per_day:8,tp1_r:1,tp2_r:2}),className:"px-4 py-2 bg-white border-2 border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 font-medium",children:"âš–ï¸ Balanced"}),e.jsx("button",{type:"button",onClick:()=>g({...c,bias_mode:"both",regime_mode:"auto",risk_per_trade_pct:1,max_trades_per_day:12,tp1_r:.8,tp2_r:1.5}),className:"px-4 py-2 bg-white border-2 border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 font-medium",children:"ğŸš€ Aggressive"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(q,{type:"button",variant:"secondary",onClick:()=>B("/bots"),className:"flex-1",children:"Cancel"}),e.jsx(q,{type:"submit",variant:"primary",loading:Q,className:"flex-1",children:Q?"Creating Bot...":"Create Bot"})]})]})]})})]})}export{Ie as default};
