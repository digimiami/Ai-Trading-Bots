import{r as i,s as u,j as a}from"./index-41a0ae00.js";import{C as p}from"./Card-0516a8f2.js";import{H as f}from"./Header-b24d545e.js";import{N as h}from"./Navigation-ce370d60.js";import{P as x}from"./PaperTradingPerformance-59563d2c.js";import{P as b}from"./PaperTradingBalance-7a088af8.js";import"./Button-0b498d06.js";function v(){const[s,t]=i.useState(""),[l,o]=i.useState([]),n=i.useCallback(async()=>{try{const{data:{user:r}}=await u.auth.getUser();if(!r){o([]),t("");return}const[d,c]=await Promise.all([u.from("paper_trading_positions").select("symbol").eq("user_id",r.id).eq("status","open"),u.from("paper_trading_trades").select("symbol").eq("user_id",r.id).eq("status","closed")]),m=new Set;d.data&&d.data.length>0&&d.data.forEach(e=>{e.symbol&&m.add(e.symbol)}),c.data&&c.data.length>0&&c.data.forEach(e=>{e.symbol&&m.add(e.symbol)});const g=Array.from(m).sort();o(g),t(e=>g.length===0?"":!e||e===""||e==="all"?"all":e&&g.includes(e)?e:"all")}catch(r){console.error("Error fetching pairs:",r),o([]),t("")}},[]);return i.useEffect(()=>{n()},[n]),a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(f,{title:"ðŸ“ Paper Trading Dashboard"}),a.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-6",children:[a.jsxs(p,{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Trading Pair"}),a.jsxs("select",{value:s,onChange:r=>t(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"-- Select a Pair --"}),a.jsx("option",{value:"all",children:"Select All"}),l.map(r=>a.jsx("option",{value:r,children:r},r))]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:s==="all"||!s||s===""?l.length>0?`Showing report for all pairs (${l.length} ${l.length===1?"pair":"pairs"})`:"Showing report for all pairs (no pairs available yet)":a.jsxs(a.Fragment,{children:["Showing report for ",a.jsx("span",{className:"font-semibold",children:s})]})})]}),a.jsx(b,{}),a.jsx(x,{selectedPair:s==="all"||!s||s===""?"":s,onReset:n})]}),a.jsx(h,{})]})}export{v as default};
