import{a as k,u as w,r as C,j as e}from"./index-a5d801a8.js";import{C as i}from"./Card-c3de768e.js";import{B as o}from"./Button-90bd3460.js";import{N as _}from"./Navigation-1350973f.js";import{H as A}from"./Header-d0707f46.js";import{u as P,i as M}from"./useAcademy-8e76432a.js";function R(){const d=k(),{user:p}=w(),{modules:t,summary:a,lessonProgress:g,loading:h,error:b}=P(),f=C.useMemo(()=>t.map(s=>{const l=s.lessons.length||1,n=s.lessons.filter(r=>g.find(m=>m.lesson_id===r.id&&m.status==="completed")).length,u=Math.round(n/l*100),x=M(s,g);return{module:s,completedLessons:n,total:l,percent:u,completed:x}}),[t,g]),c=(a==null?void 0:a.modules_completed)??0,y=(a==null?void 0:a.modules_available)??t.length,j=(a==null?void 0:a.badge_foundation_finisher)??!1;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:[e.jsx(A,{title:"Pablo Academy",subtitle:"Master automation fundamentals with curated learning paths.",rightAction:e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>d(a!=null&&a.badge_foundation_finisher?"/dashboard":"/academy/orientation-setup"),children:c>0?"Continue Learning":"Start Orientation"})}),e.jsx("main",{className:"px-4 pt-24 pb-16",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6 lg:flex-row",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[b&&e.jsx(i,{className:"border border-red-200 bg-red-50 p-5 text-red-700",children:e.jsx("p",{children:"We couldn't load Academy modules right now. Please try again shortly."})}),h&&!t.length?e.jsx(i,{className:"p-6 text-center text-gray-500 dark:text-gray-300",children:e.jsx("p",{children:"Loading Pablo Academy..."})}):f.map(({module:s,completed:l,percent:n,completedLessons:u,total:x})=>e.jsx(i,{className:"group overflow-hidden border border-gray-200/70 bg-white/90 shadow-sm transition hover:-translate-y-1 hover:border-blue-300 hover:shadow-lg dark:border-gray-700 dark:bg-gray-900/90",children:e.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:gap-6",children:[e.jsxs("div",{className:"flex w-full flex-col gap-3 md:w-[220px]",children:[e.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 relative",children:s.media_url?(()=>{const r=s.media_url.toLowerCase(),m=/\.(jpg|jpeg|png|gif|webp|svg|avif)$/i.test(r)||r.includes("/images/")||r.includes("/img/"),N=/\.(mp4|webm|ogg|mov|avi)$/i.test(r)||r.includes("/videos/")||r.includes("/video/");return m?e.jsx("img",{src:s.media_url,alt:s.title,className:"h-full w-full object-cover",loading:"lazy"}):N?e.jsx("video",{src:s.media_url,className:"h-full w-full object-cover",muted:!0,playsInline:!0}):e.jsx("img",{src:s.media_url,alt:s.title,className:"h-full w-full object-cover",loading:"lazy",onError:v=>{v.currentTarget.style.display="none"}})})():e.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:e.jsx("i",{className:"ri-image-line text-3xl"})})}),e.jsxs("div",{className:"rounded-xl bg-blue-50 px-3 py-2 text-xs font-medium uppercase tracking-[0.3em] text-blue-600 dark:bg-blue-900/30 dark:text-blue-200/90",children:["Module ",s.order_index??t.indexOf(s)+1]})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),l&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200",children:[e.jsx("i",{className:"ri-checkbox-circle-fill mr-1"}),"Completed"]})]}),s.summary&&e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-300",children:s.summary})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs font-medium text-gray-400 dark:text-gray-400",children:[s.audience&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 dark:bg-gray-800",children:[e.jsx("i",{className:"ri-user-star-line text-base"}),s.audience]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 dark:bg-gray-800",children:[e.jsx("i",{className:"ri-time-line text-base"}),s.duration_minutes||0," minutes"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 dark:bg-gray-800",children:[e.jsx("i",{className:"ri-play-list-2-line text-base"}),x," lessons"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-gray-400",children:[e.jsxs("span",{children:[u," of ",x," lessons"]}),e.jsxs("span",{children:[n,"%"]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-sky-400 via-indigo-500 to-purple-500 transition-all",style:{width:`${n}%`}})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(o,{onClick:()=>d(`/academy/${s.slug}`),size:"sm",children:l?"Review Module":c>0?"Continue Module":"Start Module"}),!l&&e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>d(`/academy/${s.slug}`),className:"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",children:"View Lessons"})]})]})]})},s.id))]}),e.jsxs("aside",{className:"w-full max-w-xs space-y-6 lg:w-80",children:[e.jsxs(i,{className:"space-y-4 border border-blue-100 bg-gradient-to-br from-white to-blue-50 p-6 shadow-sm dark:border-blue-900/40 dark:from-gray-900 dark:to-blue-950/40",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Your Progress"}),e.jsxs("div",{className:"text-3xl font-semibold text-blue-600 dark:text-blue-300",children:[h?"--":c,e.jsxs("span",{className:"text-base font-medium text-gray-500 dark:text-gray-300",children:[" ","/ ",y||t.length," modules"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Track your progress as you unlock Pabloâ€™s capabilities. Complete the first three modules to earn your foundation badge."}),e.jsx(o,{onClick:()=>d("/academy/orientation-setup"),size:"sm",children:c>0?"Resume Learning":"Start Now"})]}),j&&e.jsx(i,{className:"space-y-3 border border-emerald-200 bg-emerald-50 p-5 text-emerald-800 dark:border-emerald-900/40 dark:bg-emerald-900/30 dark:text-emerald-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-emerald-100 text-emerald-600 dark:bg-emerald-900/60 dark:text-emerald-200",children:e.jsx("i",{className:"ri-award-fill text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Foundation Finisher"}),e.jsx("p",{className:"text-xs opacity-80",children:"You completed the orientation trilogy. Keep going!"})]})]})}),!p&&e.jsxs(i,{className:"space-y-3 border border-gray-200 bg-white p-5 text-sm text-gray-600 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",children:[e.jsx("p",{children:"Create a Pablo account to save progress, unlock badges, and sync Academy outcomes to your automation workspace."}),e.jsx(o,{variant:"secondary",onClick:()=>d("/auth"),size:"sm",children:"Sign In"})]})]})]})}),e.jsx(_,{})]})}export{R as default};
