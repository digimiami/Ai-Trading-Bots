import{r as l,s as u,j as a}from"./index-e05b471b.js";import{C as f}from"./Card-940a9205.js";import{H as p}from"./Header-c6d5fb71.js";import{N as h}from"./Navigation-5ea4ae50.js";import{P as x}from"./PaperTradingPerformance-cfba443a.js";import{P as b}from"./PaperTradingBalance-319e94e7.js";import"./Button-dfed951d.js";function E(){const[s,t]=l.useState(""),[i,o]=l.useState([]),n=l.useCallback(async()=>{try{const{data:{user:r}}=await u.auth.getUser();if(!r){o([]),t("");return}const[d,c]=await Promise.all([u.from("paper_trading_positions").select("symbol").eq("user_id",r.id).eq("status","open"),u.from("paper_trading_trades").select("symbol").eq("user_id",r.id).eq("status","closed")]),m=new Set;d.data&&d.data.length>0&&d.data.forEach(e=>{e.symbol&&m.add(e.symbol)}),c.data&&c.data.length>0&&c.data.forEach(e=>{e.symbol&&m.add(e.symbol)});const g=Array.from(m).sort();o(g),t(e=>g.length===0?"":!e||e===""||e==="all"?"all":e&&g.includes(e)?e:"all")}catch(r){console.error("Error fetching pairs:",r),o([]),t("")}},[]);return l.useEffect(()=>{n()},[n]),a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(p,{title:"ðŸ“ Paper Trading Dashboard"}),a.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-6",children:[a.jsxs(f,{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Trading Pair"}),a.jsxs("select",{value:s,onChange:r=>t(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"-- Select a Pair --"}),a.jsx("option",{value:"all",children:"Select All"}),i.map(r=>a.jsx("option",{value:r,children:r},r))]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:s==="all"?`Showing report for all pairs${i.length>0?` (${i.length} pairs)`:""}`:s?a.jsxs(a.Fragment,{children:["Showing report for ",a.jsx("span",{className:"font-semibold",children:s})]}):"Showing report for all pairs"})]}),a.jsx(b,{}),a.jsx(x,{selectedPair:s==="all"?"":s,onReset:n})]}),a.jsx(h,{})]})}export{E as default};
