import{r,s as k,a as Bs,u as Es,d as Ps,j as e}from"./index-d4470588.js";import{H as Rs}from"./Header-d5af8d5d.js";import{N as Ds}from"./Navigation-7964d774.js";import{B as i}from"./Button-76050445.js";import{C as d}from"./Card-8d141ced.js";import As from"./page-403bc5be.js";import"./useBots-41529e67.js";function Is(){const[O,y]=r.useState(!1),[$,F]=r.useState(null),h=async(l,o={})=>{try{y(!0),F(null);const{data:m,error:T}=await k.functions.invoke("admin-management-enhanced",{body:{action:l,...o}});if(T){console.error("Edge function invoke error:",T);const L=T.message||"Unknown error occurred";throw F(L),new Error(L)}if(m!=null&&m.error){console.error("Edge function returned error:",m);const L=m.details?`${m.error}: ${m.details}`:m.error||"Unknown error occurred";throw F(L),new Error(L)}return m}catch(m){console.error("Admin function error:",m);const T=m.message||m.error||m.details||"Unknown error occurred";throw F(T),new Error(T)}finally{y(!1)}};return{loading:O,error:$,getUsers:async()=>(await h("getUsers")).users||[],createUser:async(l,o,m="user")=>await h("createUser",{email:l,password:o,role:m}),deleteUser:async l=>await h("deleteUser",{userId:l}),updateUserRole:async(l,o)=>await h("updateUserRole",{userId:l,role:o}),updateUserStatus:async(l,o)=>await h("updateUserStatus",{userId:l,status:o}),sendPasswordResetLink:async l=>await h("sendPasswordResetLink",{email:l}),getInvitationCodes:async()=>(await h("getInvitationCodes")).codes||[],generateInvitationCode:async(l,o=7)=>await h("generateInvitationCode",{email:l,expiresInDays:o}),getAllBots:async()=>(await h("getAllBots")).bots||[],adminControlBot:async(l,o)=>await h("adminControlBot",{botId:l,action:o}),getBotAnalytics:async()=>(await h("getBotAnalytics")).analytics||[],getSystemStats:async()=>(await h("getSystemStats")).stats,getTradingAnalytics:async(l="7")=>(await h("getTradingAnalytics",{period:l})).analytics,getFinancialOverview:async()=>(await h("getFinancialOverview")).financial,getUserActivity:async()=>(await h("getUserActivity")).userActivity||[],getSystemLogs:async(l=100)=>(await h("getSystemLogs",{limit:l})).logs||[],getLatestTrades:async(l=100,o=null)=>(await h("getLatestTrades",{limit:l,user_id:o})).trades||[],getRiskMetrics:async()=>(await h("getRiskMetrics")).risk,exportData:async(l,o)=>(await h("exportData",{type:l,userId:o})).data}}function Gs(){var We,He,Ge,Je,Ke,Xe,Ye,Qe;const O=Bs(),{user:y,loading:$}=Es(),{executeBot:F}=Ps(),{createUser:h,generateInvitationCode:de,getUsers:M,getInvitationCodes:ce,getAllBots:oe,adminControlBot:xe,getBotAnalytics:ts,getSystemStats:me,getTradingAnalytics:ge,getFinancialOverview:he,getUserActivity:ye,getSystemLogs:pe,getLatestTrades:ue,getRiskMetrics:je,exportData:be,deleteUser:fe,updateUserRole:Ne,updateUserStatus:ve,sendPasswordResetLink:ke}=Is(),[p,l]=r.useState("overview"),[o,m]=r.useState([]),[T,L]=r.useState([]),[q,as]=r.useState([]),[we,rs]=r.useState([]),[Te,Ce]=r.useState(!1),[ls,Z]=r.useState(null),[ee,V]=r.useState(""),[Se,_e]=r.useState(null),[W,Le]=r.useState({}),[x,j]=r.useState(null),[H,Ue]=r.useState(null),[$e,is]=r.useState([]),[Fe,Be]=r.useState(!1),[Ee,Pe]=r.useState(null),[b,ns]=r.useState(null),[g,ds]=r.useState(null),[u,cs]=r.useState(null),[se,os]=r.useState([]),[te,xs]=r.useState([]),[f,ms]=r.useState(null),[Re,De]=r.useState([]),[Ae,Ie]=r.useState(!1),[B,gs]=r.useState("all"),[I,hs]=r.useState("all"),[w,ze]=r.useState(!0),[ys,G]=r.useState(!1),[ps,J]=r.useState(!1),[K,E]=r.useState(null),[X,P]=r.useState(null),[us,js]=r.useState({}),[C,Y]=r.useState({email:"",password:"",role:"user"}),[R,ae]=r.useState({email:"",expiresInDays:7});r.useEffect(()=>{if(console.log("ðŸ”§ Admin page loaded - User:",y==null?void 0:y.email,"Role:",y==null?void 0:y.role,"Auth Loading:",$),$){console.log("â³ Still loading auth data...");return}if(!y||(y==null?void 0:y.role)!=="admin"){console.log("âŒ User is not admin, redirecting to home"),O("/dashboard");return}console.log("âœ… User is admin, loading admin data..."),S()},[y,$,O]),r.useEffect(()=>{p==="latest-trades"&&o.length===0&&(console.log("ðŸ”„ Latest Trades tab active but no users, loading users..."),(async()=>{try{const t=await M();console.log("âœ… Users loaded in useEffect:",(t==null?void 0:t.length)||0,"users"),console.log("ðŸ“‹ Users data sample:",t==null?void 0:t[0]),t&&t.length>0?(m(t),console.log("âœ… Users state updated with",t.length,"users")):console.warn("âš ï¸ getUsers() returned empty array or null")}catch(t){console.error("âŒ Failed to load users in useEffect:",t)}})())},[p]);const U=async()=>{try{Ce(!0);const{data:s,error:t}=await k.from("pablo_ready_bots").select("*").order("order_index",{ascending:!0}).order("created_at",{ascending:!1});if(t)throw t;rs(s||[])}catch(s){console.error("Error fetching Pablo Ready bots:",s),alert(`Failed to load Pablo Ready bots: ${(s==null?void 0:s.message)||s}`)}finally{Ce(!1)}},re=async()=>{try{Be(!0);const{data:s,error:t}=await k.from("trading_bots").select("*").is("user_id",null).order("created_at",{ascending:!1});if(t)throw t;is(s||[])}catch(s){console.error("Error fetching orphaned bots:",s),alert(`Failed to load orphaned bots: ${(s==null?void 0:s.message)||s}`)}finally{Be(!1)}},bs=async(s,t)=>{if(confirm(`âš ï¸ Delete bot "${t}"?

This bot has no user and cannot trade. This action cannot be undone.`))try{Pe(s);const{error:a}=await k.from("trading_bots").delete().eq("id",s);if(a)throw a;alert(`âœ… Bot "${t}" deleted successfully`),await re()}catch(a){console.error("Error deleting orphaned bot:",a),alert(`âŒ Failed to delete bot: ${(a==null?void 0:a.message)||a}`)}finally{Pe(null)}},fs=async(s,t)=>{try{const{error:a}=await k.from("pablo_ready_bots").update({enabled:!t}).eq("id",s);if(a)throw a;await U(),alert(`âœ… Bot ${t?"disabled":"enabled"} successfully`)}catch(a){console.error("Error toggling Pablo Ready bot:",a),alert(`âŒ Failed to ${t?"disable":"enable"} bot: ${(a==null?void 0:a.message)||a}`)}},Ns=s=>{Z(s.id),V(s.name)},Oe=()=>{Z(null),V("")},Me=async s=>{if(!ee.trim()){alert("âŒ Bot name cannot be empty");return}try{const{error:t}=await k.from("pablo_ready_bots").update({name:ee.trim()}).eq("id",s);if(t)throw t;await U(),Z(null),V(""),alert("âœ… Bot name updated successfully")}catch(t){console.error("Error updating bot name:",t),alert(`âŒ Failed to update bot name: ${(t==null?void 0:t.message)||t}`)}},vs=async(s,t)=>{if(confirm(`âš ï¸ Are you sure you want to delete "${t}"?

This action cannot be undone.`))try{_e(s);const{error:a}=await k.from("pablo_ready_bots").delete().eq("id",s);if(a)throw a;await U(),alert(`âœ… Bot "${t}" deleted successfully`)}catch(a){console.error("Error deleting Pablo Ready bot:",a),alert(`âŒ Failed to delete bot: ${(a==null?void 0:a.message)||a}`)}finally{_e(null)}},ks=s=>{j(s)},ws=async s=>{try{const{error:t}=await k.from("pablo_ready_bots").update(s).eq("id",s.id);if(t)throw t;await U(),j(null),alert("âœ… Bot updated successfully")}catch(t){console.error("Error updating Pablo Ready bot:",t),alert(`âŒ Failed to update bot: ${(t==null?void 0:t.message)||t}`)}},qe=async(s,t="paper")=>{if(confirm(`ðŸ§ª Test "${s.name}" in ${t.toUpperCase()} mode?

This will create a temporary bot and execute it.`))try{Ue(s.id);const a={name:`[TEST] ${s.name}`,exchange:s.exchange,trading_type:s.trading_type,symbol:s.symbol,timeframe:s.timeframe,leverage:s.leverage||1,risk_level:s.risk_level||"medium",trade_amount:s.trade_amount||100,stop_loss:s.stop_loss||2,take_profit:s.take_profit||4,paper_trading:t==="paper",strategy:s.strategy||{},strategy_config:s.strategy_config||{},status:"running"},{data:n,error:N}=await k.from("trading_bots").insert(a).select().single();if(N)throw N;await F(n.id),setTimeout(async()=>{await k.from("trading_bots").delete().eq("id",n.id)},5e3),alert(`âœ… Test bot created and executed successfully!

Bot ID: ${n.id}
Mode: ${t.toUpperCase()}

The temporary bot will be deleted in 5 seconds.`)}catch(a){console.error("Error testing Pablo Ready bot:",a),alert(`âŒ Failed to test bot: ${(a==null?void 0:a.message)||a}`)}finally{Ue(null)}},le=async()=>{try{Ie(!0);const t=await ue(100,I==="all"?null:I);De(t)}catch(s){console.error("Error fetching latest trades:",s),alert(`Failed to load latest trades: ${(s==null?void 0:s.message)||s}`),De([])}finally{Ie(!1)}},S=async()=>{var s;try{console.log("ðŸ”„ Loading admin data..."),ze(!0);const[t,a,n,N,c,D,z,A,ne]=await Promise.all([M(),ce(),oe(),me(),ge(),he(),ye(),pe(),je()]);console.log("âœ… Admin data loaded successfully"),console.log("ðŸ“Š Users data received:",t),console.log("ðŸ“Š First user sample:",t==null?void 0:t[0]),console.log("ðŸ“Š First user stats:",(s=t==null?void 0:t[0])==null?void 0:s.stats),m(t||[]),L(a||[]),as(n||[]),ns(N),ds(c),cs(D),os(z||[]),xs(A||[]),ms(ne),p==="pablo-ready"&&await U()}catch(t){console.error("âŒ Error loading admin data:",t),console.error("âŒ Error details:",t.message)}finally{ze(!1)}},Ts=async s=>{s.preventDefault(),E(null),P(null);try{const t=await h(C.email,C.password,C.role);P((t==null?void 0:t.message)||"User created successfully"),Y({email:"",password:"",role:"user"}),setTimeout(()=>{G(!1),S()},1e3)}catch(t){console.error("Error creating user:",t),E((t==null?void 0:t.message)||(t==null?void 0:t.error)||"Failed to create user. Please try again.")}},Cs=async s=>{s.preventDefault(),E(null),P(null);try{const t=await de(R.email,R.expiresInDays);P((t==null?void 0:t.message)||"Invitation code created successfully"),ae({email:"",expiresInDays:7}),setTimeout(()=>{J(!1),S()},1e3)}catch(t){console.error("Error creating invitation:",t),E((t==null?void 0:t.message)||(t==null?void 0:t.error)||"Failed to create invitation code. Please try again.")}},_=(s,t)=>{js(a=>({...a,[s]:t}))},Ss=async(s,t)=>{_(s,!0);try{await Ne(s,t),m(a=>a.map(n=>n.id===s?{...n,role:t}:n)),await S(),alert(`âœ… Updated user role to ${t}`)}catch(a){console.error("Error updating user role:",a),alert(`âŒ Failed to update user role: ${(a==null?void 0:a.message)||a}`)}finally{_(s,!1)}},_s=async(s,t)=>{_(s,!0);try{await ve(s,t),m(a=>a.map(n=>n.id===s?{...n,status:t}:n)),await S(),alert(`âœ… Updated user status to ${t}`)}catch(a){console.error("Error updating user status:",a),alert(`âŒ Failed to update user status: ${(a==null?void 0:a.message)||a}`)}finally{_(s,!1)}},Ls=async(s,t)=>{if(window.confirm(`Delete user "${t}"? This cannot be undone.`)){_(s,!0);try{await fe(s),await S(),alert("âœ… User deleted successfully")}catch(n){console.error("Error deleting user:",n),alert(`âŒ Failed to delete user: ${(n==null?void 0:n.message)||n}`)}finally{_(s,!1)}}},Us=async(s,t)=>{_(s,!0);try{const a=await ke(t),n=a==null?void 0:a.resetLink;if(n)try{await navigator.clipboard.writeText(n),alert("âœ… Password reset link generated and copied to clipboard.")}catch{alert(`âœ… Password reset link generated:
${n}`)}else alert("âœ… Password reset link generated.")}catch(a){console.error("Error generating password reset link:",a),alert(`âŒ Failed to generate password reset link: ${(a==null?void 0:a.message)||a}`)}finally{_(s,!1)}},ie=async(s,t)=>{try{await xe(s,t),S()}catch(a){console.error("Error controlling bot:",a)}},Ve=async(s,t)=>{var n,N;if(!y){alert("âŒ You must be logged in to test trades");return}const a=t==="real"?`âš ï¸ WARNING: This will execute a REAL trade using live funds!

Bot: ${((n=q.find(c=>c.id===s))==null?void 0:n.name)||s}

Are you sure you want to proceed?`:`Test PAPER trade for bot: ${((N=q.find(c=>c.id===s))==null?void 0:N.name)||s}

This will execute a paper trade (no real funds).`;if(confirm(a))try{Le(v=>({...v,[s]:t}));const{data:c,error:D}=await k.from("trading_bots").select("id, user_id, name, symbol, exchange, trading_type, status").eq("id",s).single();if(D||!c)throw new Error(`Failed to fetch bot: ${(D==null?void 0:D.message)||"Bot not found"}`);if(c.status!=="running")throw new Error(`Bot is not running. Current status: ${c.status}`);const{data:z,error:A}=await k.from("manual_trade_signals").insert({bot_id:s,user_id:c.user_id,mode:t,side:"buy",size_multiplier:1,reason:`Admin test trade (${t.toUpperCase()})`,status:"pending"}).select().single();if(A||!z)throw new Error(`Failed to create test signal: ${(A==null?void 0:A.message)||"Unknown error"}`);console.log(`âœ… Test signal created: ${z.id}`);const ne={}.VITE_PUBLIC_SUPABASE_URL,{data:{session:Ze}}=await k.auth.getSession();if(!Ze)throw new Error("No active session found");const es=`${ne}/functions/v1/bot-executor`,Fs={action:"execute_bot",bot_id:s};console.log("ðŸš€ Triggering bot executor:",{url:es,method:"POST",botId:s,action:"execute_bot",mode:t});try{const v=await fetch(es,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ze.access_token}`,"x-cron-secret":{}.VITE_CRON_SECRET||""},body:JSON.stringify(Fs)}),ss=await v.text();console.log("ðŸ“¥ Bot executor response:",{status:v.status,statusText:v.statusText,ok:v.ok,body:ss.substring(0,200)}),v.ok?console.log("âœ… Bot executor triggered successfully"):console.error("âŒ Bot executor trigger failed:",{status:v.status,statusText:v.statusText,body:ss})}catch(v){console.error("âŒ Failed to trigger bot executor:",{error:v.message,stack:v.stack,name:v.name})}alert(`âœ… Test ${t.toUpperCase()} trade signal created!

Signal ID: ${z.id}

The bot executor will process this trade shortly. Check the bot logs for execution details.`),setTimeout(()=>{S()},2e3)}catch(c){console.error("Error creating test trade:",c),alert(`âŒ Failed to create test trade: ${(c==null?void 0:c.message)||"Unknown error"}`)}finally{Le(c=>({...c,[s]:null}))}},Q=async(s,t)=>{try{const a=await be(s,t),n=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),N=URL.createObjectURL(n),c=document.createElement("a");c.href=N,c.download=`${s}_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(N)}catch(a){console.error("Error exporting data:",a)}};if($)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-4xl text-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"**Loading admin panel...**"})]})});if(!y||(y==null?void 0:y.role)!=="admin")return null;const $s=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"users",label:"Users",icon:"ri-user-line"},{id:"bots",label:"Trading Bots",icon:"ri-robot-line"},{id:"pablo-ready",label:"Pablo Ready",icon:"ri-star-line"},{id:"latest-trades",label:"Latest Trades",icon:"ri-exchange-line"},{id:"webhook-test",label:"Webhook Test",icon:"ri-send-plane-line"},{id:"analytics",label:"Analytics",icon:"ri-bar-chart-line"},{id:"financial",label:"Financial",icon:"ri-money-dollar-circle-line"},{id:"monitoring",label:"Monitoring",icon:"ri-eye-line"},{id:"security",label:"Security",icon:"ri-shield-check-line"},{id:"system",label:"System",icon:"ri-settings-line"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Rs,{title:"Admin Panel",subtitle:"Complete System Management & Control"}),e.jsxs("div",{className:"pt-20 pb-20 px-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:$s.map(s=>e.jsxs(i,{variant:p===s.id?"primary":"secondary",onClick:async()=>{if(l(s.id),s.id==="pablo-ready")U(),re();else if(s.id==="latest-trades"){if(console.log("ðŸ” Latest Trades tab clicked. Current users count:",o.length),o.length===0){console.log("âš ï¸ Users not loaded yet, loading users first...");try{const t=await M();console.log("âœ… Users loaded from getUsers():",(t==null?void 0:t.length)||0,"users"),console.log("ðŸ“‹ Users data:",t),t&&t.length>0?(m(t),console.log("âœ… Users state updated")):console.warn("âš ï¸ No users returned from getUsers()")}catch(t){console.error("âŒ Failed to load users:",t)}}else console.log("âœ… Users already loaded:",o.length,"users");le()}},className:"flex items-center gap-2",children:[e.jsx("i",{className:s.icon}),s.label]},s.id))})}),p==="overview"&&e.jsx("div",{className:"space-y-6",children:w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-4xl text-gray-400"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading overview data..."})]}):b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(d,{className:"text-center p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(b==null?void 0:b.totalUsers)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Users"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(b==null?void 0:b.totalBots)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Bots"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(b==null?void 0:b.totalTrades)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Trades"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",((We=b==null?void 0:b.platformPnL)==null?void 0:We.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Platform PnL"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(i,{variant:"primary",onClick:()=>G(!0),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-user-add-line text-2xl mb-2"}),"Create User"]}),e.jsxs(i,{variant:"secondary",onClick:()=>J(!0),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-mail-send-line text-2xl mb-2"}),"Send Invitation"]}),e.jsxs(i,{variant:"secondary",onClick:()=>Q("all_trades"),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-download-line text-2xl mb-2"}),"Export Data"]}),e.jsxs(i,{variant:"secondary",onClick:()=>l("monitoring"),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-eye-line text-2xl mb-2"}),"View Logs"]})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Trading Activity"}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):!g||!g.trades||g.trades.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-exchange-line text-4xl mb-2"}),e.jsx("p",{children:"No recent trading activity"})]}):e.jsx("div",{className:"space-y-3",children:g.trades.slice(0,10).map((s,t)=>{var a;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.symbol," - ",s.side]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.exchange," â€¢ ",new Date(s.created_at).toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-medium ${s.pnl>=0?"text-green-600":"text-red-600"}`,children:["$",((a=s.pnl)==null?void 0:a.toFixed(2))||"0.00"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.status==="filled"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})]})]},t)})})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"ri-dashboard-line text-4xl mb-2"}),e.jsx("p",{children:"No system statistics available"})]})}),p==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Management"}),e.jsxs(i,{onClick:()=>G(!0),children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Create User"]})]}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):e.jsx("div",{className:"space-y-3",children:o.map(s=>{var a,n,N;const t=!!us[s.id];return e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.email}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:s.role}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${(s.status||"active")==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":(s.status||"active")==="suspended"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:s.status||"active"}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs flex items-center gap-1 ${(a=s.stats)!=null&&a.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${(n=s.stats)!=null&&n.isActive?"bg-green-500":"bg-gray-400"}`}),(N=s.stats)!=null&&N.isActive?"Active":"Inactive"]})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created: ",new Date(s.created_at).toLocaleDateString(),s.last_sign_in_at&&e.jsxs(e.Fragment,{children:[" â€¢ Last active: ",new Date(s.last_sign_in_at).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Role"}),e.jsxs("select",{value:s.role,onChange:c=>Ss(s.id,c.target.value),disabled:t,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{value:s.status||"active",onChange:c=>_s(s.id,c.target.value),disabled:t,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(i,{variant:"secondary",size:"sm",onClick:()=>Us(s.id,s.email),disabled:t,children:[e.jsx("i",{className:"ri-lock-password-line mr-1"}),"Reset Password"]}),e.jsxs(i,{variant:"danger",size:"sm",onClick:()=>Ls(s.id,s.email),disabled:t,children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]})]}),s.stats?e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total PnL"}),e.jsxs("p",{className:`text-sm font-semibold ${s.stats.totalPnL+s.stats.paperPnL>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",(s.stats.totalPnL+s.stats.paperPnL||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Real: $",s.stats.totalPnL.toFixed(2)," â€¢ Paper: $",s.stats.paperPnL.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Trades"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:s.stats.totalTrades+s.stats.paperTradesCount}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Real: ",s.stats.totalTrades," â€¢ Paper: ",s.stats.paperTradesCount]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Active Bots"}),e.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:s.stats.activeBots}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Win Rate: ",s.stats.avgWinRate.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Trading Volume"}),e.jsxs("p",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400",children:["$",(s.stats.totalVolume||0).toLocaleString(void 0,{maximumFractionDigits:2})]})]})]})}):e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading stats..."})})]},s.id)})})]}),e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invitation Codes"}),e.jsxs(i,{onClick:()=>J(!0),children:[e.jsx("i",{className:"ri-mail-send-line mr-2"}),"Create Invitation"]})]}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):T.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-mail-line text-4xl mb-2"}),e.jsx("p",{children:"No invitation codes yet"})]}):e.jsx("div",{className:"space-y-3",children:T.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-mono text-sm mb-1",children:s.code}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email||"No email specified"]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Created: ",new Date(s.created_at).toLocaleDateString()," â€¢ Expires: ",new Date(s.expires_at).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ml-4 ${s.used?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:s.used?"Used":"Active"})]},s.id))})]})]}),p==="bots"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Trading Bots"}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):q.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-robot-line text-4xl mb-2"}),e.jsx("p",{children:"No trading bots found"})]}):e.jsx("div",{className:"space-y-3",children:q.map(s=>{var t;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Owner: ",s.users.email," â€¢ Trades: ",s.total_trades," â€¢ Win Rate: ",(t=s.win_rate)==null?void 0:t.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.status==="running"?"bg-green-100 text-green-800":s.status==="paused"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(i,{size:"sm",variant:"secondary",onClick:()=>ie(s.id,"running"),disabled:s.status==="running",title:"Start bot",children:e.jsx("i",{className:"ri-play-line"})}),e.jsx(i,{size:"sm",variant:"secondary",onClick:()=>ie(s.id,"paused"),disabled:s.status==="paused",title:"Pause bot",children:e.jsx("i",{className:"ri-pause-line"})}),e.jsx(i,{size:"sm",variant:"secondary",onClick:()=>ie(s.id,"stopped"),disabled:s.status==="stopped",title:"Stop bot",children:e.jsx("i",{className:"ri-stop-line"})}),e.jsxs("div",{className:"ml-2 border-l border-gray-300 pl-2 flex space-x-1",children:[e.jsx(i,{size:"sm",variant:"primary",onClick:()=>Ve(s.id,"paper"),disabled:s.status!=="running"||W[s.id]==="paper",title:"Test Paper Trade",className:"bg-blue-600 hover:bg-blue-700",children:W[s.id]==="paper"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-1"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-file-paper-line mr-1"}),"Paper"]})}),e.jsx(i,{size:"sm",variant:"danger",onClick:()=>Ve(s.id,"real"),disabled:s.status!=="running"||W[s.id]==="real",title:"Test Real Trade (WARNING: Uses Live Funds!)",className:"bg-red-600 hover:bg-red-700",children:W[s.id]==="real"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-1"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-money-dollar-circle-line mr-1"}),"Real"]})})]})]})]})]},s.id)})})]})}),p==="pablo-ready"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{className:"p-6 border-2 border-red-200 bg-red-50/50 dark:border-red-900/40 dark:bg-red-900/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 flex items-center gap-2",children:[e.jsx("i",{className:"ri-error-warning-line"}),"Orphaned Bots (No User)"]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"These bots have no user_id and cannot trade. Delete them or they will cause errors."})]}),e.jsxs(i,{onClick:re,variant:"secondary",size:"sm",disabled:Fe,children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]})]}),Fe?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-xl text-red-400"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:"Loading orphaned bots..."})]}):$e.length===0?e.jsxs("div",{className:"text-center py-4 text-green-700 dark:text-green-400",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-2xl mb-2"}),e.jsx("p",{className:"text-sm",children:"âœ… No orphaned bots found"})]}):e.jsx("div",{className:"space-y-3",children:$e.map(s=>e.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-red-300 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200",children:[e.jsx("i",{className:"ri-error-warning-line mr-1"}),"No User"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.status==="running"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Symbol"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.symbols&&s.symbols.length>1?`${s.symbols.join(", ")} (${s.symbols.length} pairs)`:s.symbol})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Exchange"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:s.exchange})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Type"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:s.trading_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Created"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-xs",children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(i,{onClick:()=>bs(s.id,s.name),variant:"danger",size:"sm",disabled:Ee===s.id,children:Ee===s.id?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})})})]})},s.id))})]}),e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pablo Ready Bots"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage pre-configured bots available to all users"})]}),e.jsxs(i,{onClick:U,variant:"secondary",size:"sm",disabled:Te,children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]})]}),Te?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading bots..."})]}):we.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-robot-line text-4xl mb-2"}),e.jsx("p",{children:"No Pablo Ready bots found"})]}):e.jsx("div",{className:"space-y-4",children:we.map(s=>e.jsx(d,{className:`p-4 border-2 ${s.enabled?"border-green-200 bg-green-50/50 dark:border-green-900/40 dark:bg-green-900/10":"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ls===s.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"text",value:ee,onChange:t=>V(t.target.value),onKeyDown:t=>{t.key==="Enter"?Me(s.id):t.key==="Escape"&&Oe()},className:"flex-1 px-3 py-1 border border-blue-500 rounded-lg text-lg font-semibold focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-800 dark:text-white",autoFocus:!0}),e.jsx("button",{onClick:()=>Me(s.id),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm",title:"Save (Enter)",children:e.jsx("i",{className:"ri-check-line"})}),e.jsx("button",{onClick:Oe,className:"px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition text-sm",title:"Cancel (Esc)",children:e.jsx("i",{className:"ri-close-line"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("button",{onClick:()=>Ns(s),className:"p-1 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition",title:"Edit name",children:e.jsx("i",{className:"ri-edit-line text-sm"})})]}),s.featured&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200",children:[e.jsx("i",{className:"ri-star-fill mr-1"}),"Featured"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s.enabled?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s.enabled?"Enabled":"Disabled"})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Exchange"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:s.exchange})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Symbol"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.symbols&&s.symbols.length>1?`${s.symbols.join(", ")} (${s.symbols.length} pairs)`:s.symbol})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Type"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:s.trading_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Leverage"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[s.leverage,"x"]})]})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[e.jsxs(i,{onClick:()=>ks(s),variant:"secondary",size:"sm",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),e.jsx(i,{onClick:()=>qe(s,"paper"),variant:"primary",size:"sm",disabled:H===s.id,children:H===s.id?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-flask-line mr-2"}),"Test (Paper)"]})}),e.jsx(i,{onClick:()=>qe(s,"real"),variant:"warning",size:"sm",disabled:H===s.id,children:H===s.id?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-flask-line mr-2"}),"Test (Real)"]})}),e.jsxs(i,{onClick:()=>fs(s.id,s.enabled),variant:s.enabled?"danger":"primary",size:"sm",children:[e.jsx("i",{className:`mr-2 ${s.enabled?"ri-eye-off-line":"ri-eye-line"}`}),s.enabled?"Disable":"Enable"]}),e.jsx(i,{onClick:()=>vs(s.id,s.name),variant:"danger",size:"sm",disabled:Se===s.id,children:Se===s.id?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})})]})]})},s.id))})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(d,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Edit Bot: ",x.name]}),e.jsx("button",{onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:x.name,onChange:s=>j({...x,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description||"",onChange:s=>j({...x,description:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Exchange"}),e.jsxs("select",{value:x.exchange,onChange:s=>j({...x,exchange:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600",children:[e.jsx("option",{value:"bybit",children:"Bybit"}),e.jsx("option",{value:"okx",children:"OKX"}),e.jsx("option",{value:"bitunix",children:"Bitunix"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Trading Type"}),e.jsxs("select",{value:x.trading_type,onChange:s=>j({...x,trading_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600",children:[e.jsx("option",{value:"spot",children:"Spot"}),e.jsx("option",{value:"futures",children:"Futures"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Symbol"}),e.jsx("input",{type:"text",value:x.symbol,onChange:s=>j({...x,symbol:s.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600",placeholder:"BTCUSDT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Timeframe"}),e.jsxs("select",{value:x.timeframe,onChange:s=>j({...x,timeframe:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600",children:[e.jsx("option",{value:"1m",children:"1m"}),e.jsx("option",{value:"5m",children:"5m"}),e.jsx("option",{value:"15m",children:"15m"}),e.jsx("option",{value:"1h",children:"1h"}),e.jsx("option",{value:"4h",children:"4h"}),e.jsx("option",{value:"1d",children:"1d"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Leverage"}),e.jsx("input",{type:"number",min:"1",max:"100",value:x.leverage||1,onChange:s=>j({...x,leverage:parseInt(s.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Risk Level"}),e.jsxs("select",{value:x.risk_level||"medium",onChange:s=>j({...x,risk_level:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Trade Amount ($)"}),e.jsx("input",{type:"number",min:"1",value:x.trade_amount||100,onChange:s=>j({...x,trade_amount:parseFloat(s.target.value)||100}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stop Loss (%)"}),e.jsx("input",{type:"number",min:"0.1",step:"0.1",value:x.stop_loss||2,onChange:s=>j({...x,stop_loss:parseFloat(s.target.value)||2}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Take Profit (%)"}),e.jsx("input",{type:"number",min:"0.1",step:"0.1",value:x.take_profit||4,onChange:s=>j({...x,take_profit:parseFloat(s.target.value)||4}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:bg-gray-800 dark:text-white dark:border-gray-600"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(i,{onClick:()=>j(null),variant:"secondary",size:"sm",children:"Cancel"}),e.jsxs(i,{onClick:()=>ws(x),variant:"primary",size:"sm",children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Save Changes"]})]})]})]})})}),p==="latest-trades"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Latest Trades"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["View the 100 most recent trades ",I==="all"?"from all users":`from ${((He=o.find(s=>s.id===I))==null?void 0:He.email)||"selected user"}`," across the platform"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:I,onChange:s=>{console.log("ðŸ“‹ User filter changed:",s.target.value),hs(s.target.value),setTimeout(()=>le(),100)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white min-w-[200px]",children:[e.jsx("option",{value:"all",children:"All Users"}),o.length===0?e.jsx("option",{value:"",disabled:!0,children:"Loading users..."}):o.map(s=>e.jsx("option",{value:s.id,children:s.email||`User ${s.id.substring(0,8)}...`},s.id))]}),e.jsxs("select",{value:B,onChange:s=>gs(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Trades"}),e.jsx("option",{value:"real",children:"Real Trades Only"}),e.jsx("option",{value:"paper",children:"Paper Trades Only"})]}),e.jsxs(i,{onClick:le,variant:"secondary",size:"sm",disabled:Ae,children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh"]})]})]}),Ae?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading trades..."})]}):Re.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-exchange-line text-4xl mb-2"}),e.jsx("p",{children:"No trades found"}),e.jsx("p",{className:"text-sm mt-1",children:"Trades will appear here once users start trading"})]}):(()=>{const s=Re.filter(t=>B==="all"?!0:B==="real"?t.trade_type==="REAL":B==="paper"?t.trade_type==="PAPER":!0);return s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-exchange-line text-4xl mb-2"}),e.jsxs("p",{children:["No ",B==="real"?"real":B==="paper"?"paper":""," trades found"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Bot"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Symbol"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Side"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300",children:"PnL"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300",children:"Fee"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Time"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.trade_type==="REAL"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t.trade_type})}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:t.user_email}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:t.bot_name}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:t.symbol}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.side==="buy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:t.side.toUpperCase()})}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-700 dark:text-gray-300",children:typeof t.amount=="number"?t.amount.toFixed(4):t.amount}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-700 dark:text-gray-300",children:["$",typeof t.price=="number"?t.price.toFixed(2):t.price]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("span",{className:`font-medium ${t.pnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",typeof t.pnl=="number"?t.pnl.toFixed(2):"0.00"]})}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-700 dark:text-gray-300",children:["$",typeof t.fee=="number"?t.fee.toFixed(2):"0.00"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.status==="filled"||t.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":t.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:t.status})}),e.jsx("td",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-xs",children:t.minutes_ago!==null?t.minutes_ago<60?`${t.minutes_ago}m ago`:t.minutes_ago<1440?`${Math.floor(t.minutes_ago/60)}h ago`:`${Math.floor(t.minutes_ago/1440)}d ago`:t.executed_at?new Date(t.executed_at).toLocaleString():"N/A"})]},`${t.trade_type}-${t.trade_id}`))})]})})})()]})}),p==="analytics"&&e.jsx("div",{className:"space-y-6",children:w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-4xl text-gray-400"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading analytics data..."})]}):g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(d,{className:"text-center p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(g==null?void 0:g.totalTrades)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Trades"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(g==null?void 0:g.filledTrades)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Successful"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:(g==null?void 0:g.failedTrades)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Failed"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((Ge=g==null?void 0:g.successRate)==null?void 0:Ge.toFixed(1))||"0.0","%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Success Rate"})]})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Exchange Statistics"}),!g||Object.keys((g==null?void 0:g.exchangeStats)||{}).length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-bar-chart-line text-4xl mb-2"}),e.jsx("p",{children:"No exchange statistics available"})]}):e.jsx("div",{className:"space-y-3",children:Object.entries((g==null?void 0:g.exchangeStats)||{}).map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.count," trades"]})]}),e.jsxs("div",{className:`font-medium ${t.pnl>=0?"text-green-600":"text-red-600"}`,children:["$",t.pnl.toFixed(2)]})]},s))})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"ri-bar-chart-line text-4xl mb-2"}),e.jsx("p",{children:"No trading analytics available"})]})}),p==="financial"&&e.jsx("div",{className:"space-y-6",children:w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-4xl text-gray-400"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading financial data..."})]}):u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(d,{className:"text-center p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",((Je=u==null?void 0:u.totalVolume)==null?void 0:Je.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Volume"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",((Ke=u==null?void 0:u.totalPnL)==null?void 0:Ke.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total PnL"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",((Xe=u==null?void 0:u.totalFees)==null?void 0:Xe.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Fees"})]}),e.jsxs(d,{className:"text-center p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",((Ye=u==null?void 0:u.netProfit)==null?void 0:Ye.toFixed(2))||"0.00"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Net Profit"})]})]}),u.dailyPnL&&Object.keys(u.dailyPnL).length>0&&e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Daily PnL (Last 30 Days)"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Object.entries(u.dailyPnL).slice(-30).reverse().map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s).toLocaleDateString()}),e.jsxs("span",{className:`font-medium ${t>=0?"text-green-600":"text-red-600"}`,children:["$",t.toFixed(2)]})]},s))})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("i",{className:"ri-money-dollar-circle-line text-4xl mb-2"}),e.jsx("p",{children:"No financial data available"})]})}),p==="monitoring"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Logs"}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):!te||te.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-file-list-line text-4xl mb-2"}),e.jsx("p",{children:"No system logs available"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:te.map((s,t)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${s.level==="error"?"bg-red-500":s.level==="warning"?"bg-yellow-500":s.level==="success"?"bg-green-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.message||s.event_message||"No message"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.category||s.event_type||"System"," â€¢ ",s.created_at?new Date(s.created_at).toLocaleString():"Unknown date"]})]})]},t))})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Activity"}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):!se||se.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-user-line text-4xl mb-2"}),e.jsx("p",{children:"No user activity data available"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:se.slice(0,20).map(s=>{var t,a;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Bots: ",((t=s.trading_bots)==null?void 0:t.length)||0," â€¢ Trades: ",((a=s.trades)==null?void 0:a.length)||0," â€¢ Last Active: ",s.last_sign_in_at?new Date(s.last_sign_in_at).toLocaleDateString():"Never"]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleDateString()})]},s.id)})})]})]}),p==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Risk Monitoring"}),w?e.jsx("div",{className:"text-center py-8",children:e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400"})}):f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:(f==null?void 0:f.riskScore)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Risk Score"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:((Qe=f==null?void 0:f.largeTrades)==null?void 0:Qe.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Large Trades"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Large Trades (â‰¥ $1000)"}),!f.largeTrades||f.largeTrades.length===0?e.jsx("div",{className:"text-center py-4 text-gray-400 text-sm",children:"No large trades found"}):e.jsx("div",{className:"space-y-2",children:f.largeTrades.slice(0,10).map((s,t)=>{var a;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.symbol," - ",s.side]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.exchange," â€¢ Amount: $",((a=s.amount)==null?void 0:a.toFixed(2))||"0.00"," â€¢ ",s.created_at?new Date(s.created_at).toLocaleString():"Unknown date"]})]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800",children:"Large"})]},t)})})]}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsx("h4",{className:"font-medium",children:"Recent Failed Trades"}),!f.failedTrades||f.failedTrades.length===0?e.jsx("div",{className:"text-center py-4 text-gray-400 text-sm",children:"No failed trades in the last 24 hours"}):e.jsx("div",{className:"space-y-2",children:f.failedTrades.slice(0,10).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.symbol," - ",s.side]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.exchange," â€¢ ",s.created_at?new Date(s.created_at).toLocaleString():"Unknown date"]})]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 text-red-800",children:"Failed"})]},t))})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-shield-check-line text-4xl mb-2"}),e.jsx("p",{children:"No risk metrics available"})]})]})}),p==="system"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data Export"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs(i,{variant:"secondary",onClick:()=>Q("all_trades"),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-download-line text-2xl mb-2"}),"Export All Trades"]}),e.jsxs(i,{variant:"secondary",onClick:()=>Q("users"),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-user-line text-2xl mb-2"}),"Export Users"]}),e.jsxs(i,{variant:"secondary",onClick:()=>Q("all_trades"),className:"h-16 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-database-line text-2xl mb-2"}),"Export System Data"]})]})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Database Status:"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Connected"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"API Status:"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Operational"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Backup:"}),e.jsx("span",{className:"text-gray-800",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"System Uptime:"}),e.jsx("span",{className:"text-gray-800",children:"99.9%"})]})]})]})]}),p==="webhook-test"&&e.jsx(As,{}),ys&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(d,{className:"w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New User"}),K&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:K})}),X&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-600",children:X})}),e.jsxs("form",{onSubmit:Ts,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:C.email,onChange:s=>Y({...C,email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:C.password,onChange:s=>Y({...C,password:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{value:C.role,onChange:s=>Y({...C,role:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(i,{type:"button",variant:"secondary",onClick:()=>{G(!1),E(null),P(null)},className:"flex-1",children:"Cancel"}),e.jsx(i,{type:"submit",variant:"primary",className:"flex-1",children:"Create User"})]})]})]})}),ps&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(d,{className:"w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create Invitation Code"}),K&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:K})}),X&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-600",children:X})}),e.jsxs("form",{onSubmit:Cs,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:R.email,onChange:s=>ae({...R,email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires in (days)"}),e.jsxs("select",{value:R.expiresInDays,onChange:s=>ae({...R,expiresInDays:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1 day"}),e.jsx("option",{value:3,children:"3 days"}),e.jsx("option",{value:7,children:"7 days"}),e.jsx("option",{value:14,children:"14 days"}),e.jsx("option",{value:30,children:"30 days"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(i,{type:"button",variant:"secondary",onClick:()=>{J(!1),E(null),P(null)},className:"flex-1",children:"Cancel"}),e.jsx(i,{type:"submit",variant:"primary",className:"flex-1",children:"Create Invitation"})]})]})]})})]}),e.jsx(Ds,{})]})}export{Gs as default};
