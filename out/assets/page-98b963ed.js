import{u as k,d as S,r as i,j as e}from"./index-8afdbb71.js";import{B as c}from"./Button-358769bf.js";import{C as v}from"./Card-16d51d36.js";import{H as j}from"./Header-13d82181.js";import{u as C}from"./useBots-9ad72fbd.js";function P(){const d=k(),{botId:o}=S(),{bots:m,updateBot:y}=C(),[s,x]=i.useState({name:"",exchange:"bybit",tradingType:"spot",symbol:"BTCUSDT",timeframe:"1h",leverage:5,riskLevel:"medium",tradeAmount:100,stopLoss:2,takeProfit:4}),[t,g]=i.useState({rsiThreshold:70,adxThreshold:25,bbWidthThreshold:.02,emaSlope:.5,atrPercentage:2.5,vwapDistance:1.2,momentumThreshold:.8,useMLPrediction:!0,minSamplesForML:100}),[p,b]=i.useState(!1),[h,f]=i.useState(null),N=["BTCUSDT","ETHUSDT","SOLUSDT","ADAUSDT","DOTUSDT","AVAXUSDT","BNBUSDT","XRPUSDT","MATICUSDT","LINKUSDT","UNIUSDT","LTCUSDT"];i.useEffect(()=>{if(o&&m.length>0){const r=m.find(a=>a.id===o);console.log("Edit bot: Found bot:",r),r?(x({name:r.name,exchange:r.exchange,tradingType:r.tradingType,symbol:r.symbol,timeframe:r.timeframe||"1h",leverage:r.leverage||5,riskLevel:r.riskLevel,tradeAmount:r.tradeAmount||100,stopLoss:r.stopLoss||2,takeProfit:r.takeProfit||4}),r.strategy&&g(r.strategy),console.log("Edit bot: Form data set:",s)):console.log("Edit bot: Bot not found with ID:",o)}},[o,m]);const T=async r=>{if(r.preventDefault(),!!o){b(!0),f(null);try{const a={name:s.name,exchange:s.exchange,tradingType:s.tradingType,symbol:s.symbol,timeframe:s.timeframe,leverage:s.leverage,riskLevel:s.riskLevel,tradeAmount:s.tradeAmount,stopLoss:s.stopLoss,takeProfit:s.takeProfit,strategy:t};console.log("Edit bot: Updating bot data:",a),console.log("Edit bot: Bot ID:",o),await y(o,a),console.log("Edit bot: Update successful, navigating..."),d("/bots",{state:{message:`Bot "${s.name}" updated successfully!`}})}catch(a){console.error("Edit bot: Update failed:",a),f(a.message||"Failed to update bot")}finally{b(!1)}}},l=(r,a)=>{x(u=>({...u,[r]:a}))},n=(r,a)=>{g(u=>({...u,[r]:a}))};return o?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{title:"Edit Bot"}),e.jsx("div",{className:"pt-16 pb-6 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(c,{variant:"secondary",onClick:()=>d("/bots"),className:"mr-4",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to Bots"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Trading Bot"})]}),e.jsx("form",{onSubmit:T,children:e.jsx(v,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bot Name"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>l("name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bot name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange"}),e.jsxs("select",{value:s.exchange,onChange:r=>l("exchange",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"bybit",children:"Bybit"}),e.jsx("option",{value:"okx",children:"OKX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Type"}),e.jsxs("select",{value:s.tradingType,onChange:r=>l("tradingType",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"spot",children:"Spot Trading"}),e.jsx("option",{value:"futures",children:"Futures Trading"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair"}),e.jsx("select",{value:s.symbol,onChange:r=>l("symbol",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:N.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Frame"}),e.jsxs("select",{value:s.timeframe,onChange:r=>l("timeframe",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1m",children:"1 Minute"}),e.jsx("option",{value:"5m",children:"5 Minutes"}),e.jsx("option",{value:"15m",children:"15 Minutes"}),e.jsx("option",{value:"1h",children:"1 Hour"}),e.jsx("option",{value:"2h",children:"2 Hours"}),e.jsx("option",{value:"3h",children:"3 Hours"}),e.jsx("option",{value:"4h",children:"4 Hours"}),e.jsx("option",{value:"1d",children:"1 Day"}),e.jsx("option",{value:"1w",children:"1 Week"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Chart interval for technical analysis"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leverage"}),e.jsxs("select",{value:s.leverage,onChange:r=>l("leverage",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:5,children:"5x"}),e.jsx("option",{value:10,children:"10x"}),e.jsx("option",{value:20,children:"20x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),e.jsxs("select",{value:s.riskLevel,onChange:r=>l("riskLevel",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Low Risk"}),e.jsx("option",{value:"medium",children:"Medium Risk"}),e.jsx("option",{value:"high",children:"High Risk"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Amount (USD)"}),e.jsx("input",{type:"number",value:s.tradeAmount,onChange:r=>l("tradeAmount",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"10",max:"10000",step:"10",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Base trade amount in USD (will be multiplied by leverage and risk level)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stop Loss (%)"}),e.jsx("input",{type:"number",value:s.stopLoss,onChange:r=>l("stopLoss",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"10",step:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum loss percentage before closing position"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Take Profit (%)"}),e.jsx("input",{type:"number",value:s.takeProfit,onChange:r=>l("takeProfit",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"20",step:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target profit percentage before closing position"})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Strategy Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Threshold"}),e.jsx("input",{type:"number",value:t.rsiThreshold,onChange:r=>n("rsiThreshold",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"50",max:"90",step:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ADX Threshold"}),e.jsx("input",{type:"number",value:t.adxThreshold,onChange:r=>n("adxThreshold",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"15",max:"50",step:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bollinger Band Width Threshold"}),e.jsx("input",{type:"number",value:t.bbWidthThreshold,onChange:r=>n("bbWidthThreshold",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.01",max:"0.1",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EMA Slope"}),e.jsx("input",{type:"number",value:t.emaSlope,onChange:r=>n("emaSlope",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.1",max:"2.0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ATR Percentage"}),e.jsx("input",{type:"number",value:t.atrPercentage,onChange:r=>n("atrPercentage",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1.0",max:"5.0",step:"0.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VWAP Distance"}),e.jsx("input",{type:"number",value:t.vwapDistance,onChange:r=>n("vwapDistance",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"3.0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Momentum Threshold"}),e.jsx("input",{type:"number",value:t.momentumThreshold,onChange:r=>n("momentumThreshold",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"2.0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Samples for ML"}),e.jsx("input",{type:"number",value:t.minSamplesForML,onChange:r=>n("minSamplesForML",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"50",max:"1000",step:"50"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.useMLPrediction,onChange:r=>n("useMLPrediction",r.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Use Machine Learning Prediction"})]})})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600",children:h})}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t",children:[e.jsx(c,{type:"submit",variant:"primary",className:"flex-1",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Updating Bot..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Update Bot"]})}),e.jsx(c,{type:"button",variant:"secondary",onClick:()=>d("/bots"),children:"Cancel"})]})]})})})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{title:"Edit Bot"}),e.jsx("div",{className:"pt-16 pb-6 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(v,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"Bot not found"}),e.jsx(c,{variant:"primary",onClick:()=>d("/bots"),className:"mt-4",children:"Back to Bots"})]})})})})]})}export{P as default};
//# sourceMappingURL=page-98b963ed.js.map
