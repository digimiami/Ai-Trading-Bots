{"version":3,"file":"useBots-8702c529.js","sources":["../../src/hooks/useBots.ts"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { supabase, getAuthTokenFast } from '../lib/supabase';\nimport { useAuth } from './useAuth';\nimport type { TradingBot } from '../types/trading';\n\nexport const useBots = () => {\n  const [bots, setBots] = useState<TradingBot[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const { user, loading: authLoading } = useAuth();\n\n  const requireAccessToken = async (): Promise<string> => {\n    let token = await getAuthTokenFast();\n\n    if (!token) {\n      try {\n        const { data: { session } } = await supabase.auth.getSession();\n        token = session?.access_token ?? null;\n      } catch (error) {\n        console.warn('useBots: getSession fallback failed', error);\n      }\n    }\n\n    if (!token) {\n      throw new Error('No active session');\n    }\n\n    return token;\n  };\n\n  const fetchBots = async () => {\n    try {\n      console.log('useBots: Fetching bots');\n      setLoading(true);\n      setError(null);\n      \n      const accessToken = await requireAccessToken();\n\n      const response = await fetch(`${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n        },\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Bot fetch error:', response.status, errorText);\n        throw new Error(`Failed to fetch bots: ${response.status}`);\n      }\n\n      const data = await response.json();\n      setBots(Array.isArray(data.bots) ? data.bots : []);\n    } catch (err) {\n      console.error('Error fetching bots:', err);\n      setError(err instanceof Error ? err.message : 'Failed to fetch bots');\n      setBots([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createBot = async (botData: Omit<TradingBot, 'id' | 'createdAt'>) => {\n    try {\n      const accessToken = await requireAccessToken();\n\n      console.log('useBots: About to send bot data:', botData);\n      console.log('useBots: Exchange value:', botData.exchange, 'Type:', typeof botData.exchange);\n\n      const response = await fetch(`${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management?action=create`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(botData),\n      });\n\n      console.log('useBots: Response status:', response.status);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Bot creation error:', response.status, errorText);\n        throw new Error(`Failed to create bot: ${response.status}`);\n      }\n\n      const data = await response.json();\n      if (data.bot) {\n        setBots(prev => [data.bot, ...prev]);\n        return data.bot;\n      }\n      throw new Error('No bot data returned');\n    } catch (err) {\n      console.error('Error creating bot:', err);\n      throw err;\n    }\n  };\n\n  const startBot = async (botId: string) => {\n    try {\n      const accessToken = await requireAccessToken();\n\n      const url = `${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management?action=start`;\n      console.log('üöÄ Starting bot:', { botId, url, origin: window.location.origin });\n      \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ id: botId }),\n      });\n\n      console.log('üì° Response status:', response.status, response.statusText);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå Bot start error:', {\n          status: response.status,\n          statusText: response.statusText,\n          errorText,\n          headers: Object.fromEntries(response.headers.entries())\n        });\n        \n        // Check for CORS errors\n        if (response.status === 0 || errorText.includes('CORS') || errorText.includes('cors')) {\n          throw new Error(`CORS error: Failed to connect to server. This might be a domain configuration issue.`);\n        }\n        \n        throw new Error(`Failed to start bot: ${response.status} - ${errorText || response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log('‚úÖ Bot started successfully:', data);\n      \n      if (data.bot) {\n        setBots(prev => prev.map(bot => bot.id === botId ? data.bot : bot));\n        return data.bot;\n      }\n      throw new Error('No bot data returned');\n    } catch (err: any) {\n      console.error('‚ùå Error starting bot:', {\n        error: err,\n        message: err?.message,\n        name: err?.name,\n        stack: err?.stack\n      });\n      throw err;\n    }\n  };\n\n  const stopBot = async (botId: string) => {\n    try {\n      const accessToken = await requireAccessToken();\n\n      const url = `${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management?action=stop`;\n      console.log('üõë Stopping bot:', { botId, url, origin: window.location.origin });\n      \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ id: botId }),\n      });\n\n      console.log('üì° Response status:', response.status, response.statusText);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå Bot stop error:', {\n          status: response.status,\n          statusText: response.statusText,\n          errorText,\n          headers: Object.fromEntries(response.headers.entries())\n        });\n        \n        // Check for CORS errors\n        if (response.status === 0 || errorText.includes('CORS') || errorText.includes('cors')) {\n          throw new Error(`CORS error: Failed to connect to server. This might be a domain configuration issue.`);\n        }\n        \n        throw new Error(`Failed to stop bot: ${response.status} - ${errorText || response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log('‚úÖ Bot stopped successfully:', data);\n      \n      if (data.bot) {\n        setBots(prev => prev.map(bot => bot.id === botId ? data.bot : bot));\n        return data.bot;\n      }\n      throw new Error('No bot data returned');\n    } catch (err: any) {\n      console.error('‚ùå Error stopping bot:', {\n        error: err,\n        message: err?.message,\n        name: err?.name,\n        stack: err?.stack\n      });\n      throw err;\n    }\n  };\n\n  const pauseBot = async (botId: string) => {\n    try {\n      const accessToken = await requireAccessToken();\n\n      const url = `${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management?action=pause`;\n      console.log('‚è∏Ô∏è Pausing bot:', { botId, url, origin: window.location.origin });\n\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ id: botId }),\n      });\n\n      console.log('üì° Response status:', response.status, response.statusText);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå Bot pause error:', {\n          status: response.status,\n          statusText: response.statusText,\n          errorText,\n          headers: Object.fromEntries(response.headers.entries())\n        });\n\n        if (response.status === 0 || errorText.includes('CORS') || errorText.includes('cors')) {\n          throw new Error(`CORS error: Failed to connect to server. This might be a domain configuration issue.`);\n        }\n\n        throw new Error(`Failed to pause bot: ${response.status} - ${errorText || response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log('‚úÖ Bot paused successfully:', data);\n\n      if (data.bot) {\n        setBots(prev => prev.map(bot => bot.id === botId ? data.bot : bot));\n        return data.bot;\n      }\n      throw new Error('No bot data returned');\n    } catch (err: any) {\n      console.error('‚ùå Error pausing bot:', {\n        error: err,\n        message: err?.message,\n        name: err?.name,\n        stack: err?.stack\n      });\n      throw err;\n    }\n  };\n\n  const updateBot = async (botId: string, updates: Partial<TradingBot>) => {\n    try {\n      const accessToken = await requireAccessToken();\n\n      const url = `${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management?action=update`;\n      console.log('üìù Updating bot:', { botId, url, origin: window.location.origin, updates });\n      \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          id: botId,\n          ...updates\n        }),\n      });\n\n      console.log('üì° Response status:', response.status, response.statusText);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå Bot update error:', {\n          status: response.status,\n          statusText: response.statusText,\n          errorText,\n          headers: Object.fromEntries(response.headers.entries())\n        });\n        \n        // Check for CORS errors\n        if (response.status === 0 || errorText.includes('CORS') || errorText.includes('cors')) {\n          throw new Error(`CORS error: Failed to connect to server. This might be a domain configuration issue.`);\n        }\n        \n        throw new Error(`Failed to update bot: ${response.status} - ${errorText || response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log('‚úÖ Bot updated successfully:', data);\n      \n      if (data.bot) {\n        setBots(prev => prev.map(bot => bot.id === botId ? data.bot : bot));\n        return data.bot;\n      }\n      throw new Error('No bot data returned');\n    } catch (err: any) {\n      console.error('‚ùå Error updating bot:', {\n        error: err,\n        message: err?.message,\n        name: err?.name,\n        stack: err?.stack\n      });\n      throw err;\n    }\n  };\n\n  const deleteBot = async (botId: string) => {\n    try {\n      const accessToken = await requireAccessToken();\n\n      const response = await fetch(`${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/bot-management`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          id: botId\n        }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Bot deletion error:', response.status, errorText);\n        throw new Error(`Failed to delete bot: ${response.status}`);\n      }\n\n      setBots(prev => prev.filter(bot => bot.id !== botId));\n    } catch (err) {\n      console.error('Error deleting bot:', err);\n      throw err;\n    }\n  };\n\n  // Fetch when auth state is ready; avoid firing before session exists\n  useEffect(() => {\n    console.log('useBots: authLoading:', authLoading);\n    console.log('useBots: user:', user);\n    if (authLoading) {\n      // Still determining auth; keep loading true for bots\n      setLoading(true);\n      return;\n    }\n    if (!user) {\n      // Not authenticated; clear data and stop loading\n      setBots([]);\n      setLoading(false);\n      return;\n    }\n    fetchBots();\n    // Re-fetch when the signed-in user changes\n  }, [authLoading, user?.id]);\n\n  return {\n    bots,\n    loading,\n    error,\n    fetchBots,\n    createBot,\n    startBot,\n    stopBot,\n    pauseBot,\n    updateBot,\n    deleteBot,\n  };\n};"],"names":["useBots","bots","setBots","useState","loading","setLoading","error","setError","user","authLoading","useAuth","requireAccessToken","token","getAuthTokenFast","session","supabase","fetchBots","accessToken","response","errorText","data","err","createBot","botData","prev","startBot","botId","url","bot","stopBot","pauseBot","updateBot","updates","deleteBot","useEffect"],"mappings":"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"}