import{r as j,j as e}from"./index-8a16c905.js";import{H as N}from"./Header-613465f2.js";import{N as b}from"./Navigation-19e2325e.js";import{B as n}from"./Button-18f9c519.js";import{C as i}from"./Card-775b16c0.js";import{u as f}from"./useBotActivity-121308b9.js";import{u as y}from"./useBots-aa7c8a22.js";function v({activity:r,onClearLogs:a,onSimulateActivity:g}){const[l,h]=j.useState(!1),[c,d]=j.useState("all"),x=s=>{switch(s){case"info":return"text-blue-600 bg-blue-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"success":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},o=s=>{switch(s){case"market":return"ri-line-chart-line";case"trade":return"ri-exchange-line";case"strategy":return"ri-brain-line";case"system":return"ri-settings-line";case"error":return"ri-error-warning-line";default:return"ri-information-line"}},u=s=>{switch(s){case"running":return"ri-play-circle-fill text-green-500";case"paused":return"ri-pause-circle-fill text-yellow-500";case"stopped":return"ri-stop-circle-fill text-red-500";default:return"ri-question-mark-circle-fill text-gray-500"}},m=r.logs.filter(s=>c==="all"||s.level===c),t=s=>new Date(s).toLocaleTimeString();return e.jsxs(i,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`${u(r.status)} text-xl`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:r.botName}),e.jsx("p",{className:"text-sm text-gray-500",children:r.currentAction||"No recent activity"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status}),e.jsx(n,{variant:"secondary",size:"sm",onClick:()=>h(!l),children:e.jsx("i",{className:`ri-${l?"arrow-up":"arrow-down"}-line`})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:r.logs.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Logs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:r.successCount}),e.jsx("div",{className:"text-xs text-gray-500",children:"Success"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600",children:r.logs.filter(s=>s.level==="warning").length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Warnings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:r.errorCount}),e.jsx("div",{className:"text-xs text-gray-500",children:"Errors"})]})]}),r.waitingFor&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-time-line text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-800",children:["Waiting for: ",r.waitingFor]})]})}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex space-x-2",children:["all","info","warning","error","success"].map(s=>e.jsx("button",{onClick:()=>d(s),className:`px-3 py-1 rounded-full text-xs font-medium ${c===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-file-list-line text-2xl mb-2"}),e.jsx("p",{children:"No logs found"})]}):m.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x(s.level)}`,children:e.jsx("i",{className:`${o(s.category)} text-sm`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(s.level)}`,children:s.level}),e.jsx("span",{className:"text-xs text-gray-500",children:t(s.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-900 mb-1",children:s.message}),s.details&&e.jsxs("details",{className:"text-xs text-gray-600",children:[e.jsx("summary",{className:"cursor-pointer hover:text-gray-800",children:"Details"}),e.jsx("pre",{className:"mt-1 p-2 bg-white rounded border text-xs overflow-x-auto",children:JSON.stringify(s.details,null,2)})]})]})]},s.id))}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs(n,{variant:"secondary",size:"sm",onClick:()=>g(r.botId),children:[e.jsx("i",{className:"ri-play-line mr-1"}),"Simulate Activity"]}),e.jsxs(n,{variant:"danger",size:"sm",onClick:()=>a(r.botId),children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Clear Logs"]})]})]})]})}function I(){const{bots:r}=y(),{activities:a,loading:g,addLog:l,clearBotLogs:h,simulateBotActivity:c}=f(r),[d,x]=j.useState("all"),o=a.filter(t=>d==="all"||t.status===d),u=async t=>{await l(t,{level:"info",category:"system",message:"Manual test log added",details:{timestamp:new Date().toISOString(),source:"manual"}})},m=async t=>{await l(t,{level:"error",category:"error",message:"Simulated error for testing",details:{error:"Connection timeout",retry:!0}})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(N,{title:"Bot Activity Logs",subtitle:"Monitor bot operations and debug issues",rightAction:e.jsx("div",{className:"flex space-x-2",children:e.jsxs(n,{variant:"primary",size:"sm",onClick:()=>window.location.reload(),children:[e.jsx("i",{className:"ri-refresh-line mr-1"}),"Refresh"]})})}),e.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-6",children:[e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:["all","running","paused","stopped"].map(t=>e.jsx("button",{onClick:()=>x(t),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${d===t?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Bots"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(t=>t.status==="running").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.reduce((t,s)=>t+s.logs.filter(p=>p.level==="warning").length,0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Warnings"})]}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.reduce((t,s)=>t+s.errorCount,0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Errors"})]})]}),e.jsx("div",{className:"space-y-4",children:g?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading bot activities..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-robot-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bots found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create some bots to see their activity logs"})]}):o.map(t=>e.jsx(v,{activity:t,onClearLogs:h,onSimulateActivity:c},t.botId))}),e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Debug Tools"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Test Logging"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Add test logs to verify the logging system is working"}),e.jsx("div",{className:"space-x-2",children:a.slice(0,3).map(t=>e.jsxs(n,{variant:"secondary",size:"sm",onClick:()=>u(t.botId),children:["Test ",t.botName]},t.botId))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Error Simulation"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Simulate errors to test error handling and logging"}),e.jsx("div",{className:"space-x-2",children:a.slice(0,3).map(t=>e.jsxs(n,{variant:"danger",size:"sm",onClick:()=>m(t.botId),children:["Error ",t.botName]},t.botId))})]})]})]})]}),e.jsx(b,{})]})}export{I as default};
//# sourceMappingURL=page-cb7a56cb.js.map
