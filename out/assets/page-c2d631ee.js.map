{"version":3,"file":"page-c2d631ee.js","sources":["../../src/pages/paper-trading/page.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport Card from '../../components/base/Card';\nimport Button from '../../components/base/Button';\nimport Header from '../../components/feature/Header';\nimport Navigation from '../../components/feature/Navigation';\nimport PaperTradingPerformance from '../../components/paper/PaperTradingPerformance';\nimport PaperTradingBalance from '../../components/paper/PaperTradingBalance';\n\nexport default function PaperTradingDashboard() {\n  const [selectedPair, setSelectedPair] = useState<string>('');\n  const [availablePairs, setAvailablePairs] = useState<string[]>([]);\n\n  const fetchPairs = useCallback(async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        setAvailablePairs([]);\n        setSelectedPair('');\n        return;\n      }\n\n      const { data: positions } = await supabase\n        .from('paper_trading_positions')\n        .select('symbol')\n        .eq('user_id', user.id)\n        .eq('status', 'open');\n\n      const uniquePairs = positions && positions.length > 0\n        ? [...new Set(positions.map(p => p.symbol))].sort()\n        : [];\n\n      setAvailablePairs(uniquePairs);\n      setSelectedPair(prev => {\n        if (uniquePairs.length === 0) {\n          return '';\n        }\n        if (prev === 'all') {\n          return 'all';\n        }\n        if (prev && uniquePairs.includes(prev)) {\n          return prev;\n        }\n        return '';\n      });\n    } catch (error) {\n      console.error('Error fetching pairs:', error);\n      setAvailablePairs([]);\n      setSelectedPair('');\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchPairs();\n  }, [fetchPairs]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      <Header title=\"ðŸ“ Paper Trading Dashboard\" />\n      \n      <div className=\"pt-20 pb-20 px-4 space-y-6\">\n        {/* Pair Selection */}\n        <Card className=\"p-4\">\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n            Select Trading Pair\n          </label>\n          <select\n            value={selectedPair}\n            onChange={(e) => setSelectedPair(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n          >\n            <option value=\"\">-- Select a Pair --</option>\n            <option value=\"all\">Select All</option>\n            {availablePairs.map((pair) => (\n              <option key={pair} value={pair}>\n                {pair}\n              </option>\n            ))}\n          </select>\n          {selectedPair && (\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n              {selectedPair === 'all' \n                ? `Showing report for all pairs (${availablePairs.length} pairs)`\n                : (\n                  <>\n                    Showing report for <span className=\"font-semibold\">{selectedPair}</span>\n                  </>\n                )\n              }\n            </p>\n          )}\n        </Card>\n\n        {/* Paper Trading Balance */}\n        <PaperTradingBalance />\n        \n        {/* Paper Trading Performance - Show when a pair is selected or \"all\" is selected */}\n        {selectedPair ? (\n          <PaperTradingPerformance\n            selectedPair={selectedPair === 'all' ? '' : selectedPair}\n            onReset={fetchPairs}\n          />\n        ) : availablePairs.length > 0 ? (\n          <Card className=\"p-6 text-center\">\n            <i className=\"ri-search-line text-4xl text-gray-300 dark:text-gray-600 mb-4\"></i>\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              Select a Trading Pair\n            </h3>\n            <p className=\"text-gray-500 dark:text-gray-400\">\n              {availablePairs.length > 0 \n                ? `Choose a pair from the dropdown above to view detailed performance report and open positions (${availablePairs.length} pairs available).`\n                : 'No open positions found. Start trading to see positions here.'}\n            </p>\n          </Card>\n        ) : (\n          <PaperTradingPerformance onReset={fetchPairs} />\n        )}\n      </div>\n      \n      <Navigation />\n    </div>\n  );\n}\n\n"],"names":["PaperTradingDashboard","selectedPair","setSelectedPair","useState","availablePairs","setAvailablePairs","fetchPairs","useCallback","user","supabase","positions","uniquePairs","p","prev","error","useEffect","jsxs","jsx","Header","Card","e","pair","Fragment","PaperTradingBalance","PaperTradingPerformance","Navigation"],"mappings":"gUASA,SAAwBA,GAAwB,CAC9C,KAAM,CAACC,EAAcC,CAAe,EAAIC,WAAiB,EAAE,EACrD,CAACC,EAAgBC,CAAiB,EAAIF,EAAA,SAAmB,CAAE,CAAA,EAE3DG,EAAaC,EAAAA,YAAY,SAAY,CACrC,GAAA,CACI,KAAA,CAAE,KAAM,CAAE,KAAAC,IAAW,MAAMC,EAAS,KAAK,UAC/C,GAAI,CAACD,EAAM,CACTH,EAAkB,CAAE,CAAA,EACpBH,EAAgB,EAAE,EAClB,MACF,CAEA,KAAM,CAAE,KAAMQ,GAAc,MAAMD,EAC/B,KAAK,yBAAyB,EAC9B,OAAO,QAAQ,EACf,GAAG,UAAWD,EAAK,EAAE,EACrB,GAAG,SAAU,MAAM,EAEhBG,EAAcD,GAAaA,EAAU,OAAS,EAChD,CAAC,GAAG,IAAI,IAAIA,EAAU,IAAIE,GAAKA,EAAE,MAAM,CAAC,CAAC,EAAE,OAC3C,GAEJP,EAAkBM,CAAW,EAC7BT,EAAwBW,GAClBF,EAAY,SAAW,EAClB,GAELE,IAAS,MACJ,MAELA,GAAQF,EAAY,SAASE,CAAI,EAC5BA,EAEF,EACR,QACMC,EAAO,CACN,QAAA,MAAM,wBAAyBA,CAAK,EAC5CT,EAAkB,CAAE,CAAA,EACpBH,EAAgB,EAAE,CACpB,CACF,EAAG,CAAE,CAAA,EAELa,OAAAA,EAAAA,UAAU,IAAM,CACHT,GAAA,EACV,CAACA,CAAU,CAAC,EAGbU,EAAA,KAAC,MAAI,CAAA,UAAU,2CACb,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAO,MAAM,4BAA6B,CAAA,EAE3CF,EAAAA,KAAC,MAAI,CAAA,UAAU,6BAEb,SAAA,CAACA,EAAAA,KAAAG,EAAA,CAAK,UAAU,MACd,SAAA,CAACF,EAAA,IAAA,QAAA,CAAM,UAAU,kEAAkE,SAEnF,sBAAA,EACAD,EAAA,KAAC,SAAA,CACC,MAAOf,EACP,SAAWmB,GAAMlB,EAAgBkB,EAAE,OAAO,KAAK,EAC/C,UAAU,mKAEV,SAAA,CAACH,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAmB,sBAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAU,aAAA,EAC7Bb,EAAe,IAAKiB,GACnBJ,EAAA,IAAC,UAAkB,MAAOI,EACvB,SADUA,CAAA,EAAAA,CAEb,CACD,CAAA,CAAA,CACH,EACCpB,GACEgB,EAAA,IAAA,IAAA,CAAE,UAAU,gDACV,SAAiBhB,IAAA,MACd,iCAAiCG,EAAe,MAAM,UAEpDY,OAAAM,EAAAA,SAAA,CAAA,SAAA,CAAA,sBACoBL,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAiB,SAAahB,EAAA,CAAA,CAAA,CACnE,CAGN,CAAA,CAAA,EAEJ,QAGCsB,EAAoB,EAAA,EAGpBtB,EACCgB,EAAA,IAACO,EAAA,CACC,aAAcvB,IAAiB,MAAQ,GAAKA,EAC5C,QAASK,CAAA,CAAA,EAETF,EAAe,OAAS,EACzBY,EAAAA,KAAAG,EAAA,CAAK,UAAU,kBACd,SAAA,CAACF,EAAAA,IAAA,IAAA,CAAE,UAAU,+DAAgE,CAAA,EAC5EA,EAAA,IAAA,KAAA,CAAG,UAAU,yDAAyD,SAEvE,wBAAA,EACAA,EAAA,IAAC,IAAE,CAAA,UAAU,mCACV,SAAAb,EAAe,OAAS,EACrB,iGAAiGA,EAAe,MAAM,qBACtH,gEACN,CAAA,CACF,CAAA,EAEAa,EAAAA,IAACO,EAAwB,CAAA,QAASlB,CAAY,CAAA,CAAA,EAElD,QAECmB,EAAW,EAAA,CACd,CAAA,CAAA,CAEJ"}