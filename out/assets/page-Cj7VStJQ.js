import{u,j as e,a as g,C as m,B as h,r as d,b as j,A as f,H as p,N as v}from"./index-jXAUH4OH.js";function b({title:a,value:l,change:i,changeType:n,icon:t}){const c={positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"};return e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:l}),e.jsx("p",{className:`text-sm mt-1 ${c[n]}`,children:i})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${t} text-blue-600 text-xl`})})]})})}function w(){const{bots:a}=u(),l=a.reduce((s,r)=>s+(r.performance?.pnl||0),0),i=a.filter(s=>s.status==="running").length,n=a.reduce((s,r)=>s+(r.performance?.totalTrades||0),0),t=a.length>0?a.reduce((s,r)=>s+(r.performance?.winRate||0),0)/a.length:0,c=[{title:"Total PnL",value:`$${l.toFixed(2)}`,change:l>=0?"+8.2% today":"-2.1% today",changeType:l>=0?"positive":"negative",icon:"ri-money-dollar-circle-line"},{title:"Active Bots",value:i.toString(),change:`${a.length} total`,changeType:"neutral",icon:"ri-robot-line"},{title:"Win Rate",value:`${t.toFixed(1)}%`,change:"+2.1% this week",changeType:"positive",icon:"ri-trophy-line"},{title:"Total Trades",value:n.toString(),change:"89 today",changeType:"neutral",icon:"ri-exchange-line"}];return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((s,r)=>e.jsx(b,{...s},r))})}function B({bots:a}){const l=g(),i=s=>{switch(s){case"running":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"stopped":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=s=>s==="bybit"?"ri-currency-line":"ri-exchange-line",t=s=>s>=0?"text-green-600":"text-red-600",c=s=>s.performance?.pnl||0;return e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Active Bots"}),e.jsxs(h,{variant:"secondary",size:"sm",onClick:()=>l("/create-bot"),children:[e.jsx("i",{className:"ri-add-line mr-1"}),"New Bot"]})]}),e.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${n(s.exchange)} text-blue-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.symbol," â€¢ ",s.exchange.toUpperCase()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(s.status)}`,children:s.status})}),e.jsxs("p",{className:`text-sm font-medium mt-1 ${t(c(s))}`,children:[c(s)>=0?"+":"",c(s).toFixed(2)]})]})]},s.id))})]})}function C(a="BTCUSDT",l="bybit"){const[i,n]=d.useState(null),[t,c]=d.useState(!0),[s,r]=d.useState(null),o=async()=>{try{c(!0);const x=await j(`${f.MARKET_DATA}?symbol=${a}&exchange=${l}`);n(x),r(null)}catch(x){r(x instanceof Error?x.message:"Failed to fetch market data")}finally{c(!1)}};return d.useEffect(()=>{o();const x=setInterval(o,3e4);return()=>clearInterval(x)},[a,l]),{data:i,loading:t,error:s,refetch:o}}function S({marketData:a}){const l=n=>n>=0?"text-green-600":"text-red-600",i=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4});return!a||a.length===0?e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Overview"}),e.jsx("button",{className:"text-blue-600 text-sm font-medium",children:"Refresh"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-line-chart-line text-4xl mb-2"}),e.jsx("p",{children:"No market data available"})]})]}):e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Overview"}),e.jsx("button",{className:"text-blue-600 text-sm font-medium",children:"Refresh"})]}),e.jsx("div",{className:"space-y-3",children:a.slice(0,6).map((n,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-currency-line text-orange-600 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.symbol}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Volume: ",n.volume24h.toLocaleString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:i(n.price)}),e.jsxs("p",{className:`text-sm ${l(n.change24h)}`,children:[n.change24h>=0?"+":"",n.change24h.toFixed(2),"%"]})]})]},t))})]})}function E(){const[a,l]=d.useState([]),[i,n]=d.useState(!0),[t,c]=d.useState(null),s=async()=>{try{n(!0);const r=await j(`${f.API_KEYS}/balances`);l(r.balances||[]),c(null)}catch(r){c(r instanceof Error?r.message:"Failed to fetch balances")}finally{n(!1)}};return d.useEffect(()=>{s();const r=setInterval(s,6e4);return()=>clearInterval(r)},[]),{balances:a,loading:i,error:t,refetch:s}}function T({balances:a}){const l=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),i=t=>{switch(t.toLowerCase()){case"bybit":return"ri-currency-line";case"okx":return"ri-exchange-line";default:return"ri-exchange-line"}},n=t=>{switch(t.toLowerCase()){case"bybit":return"text-yellow-600 bg-yellow-100";case"okx":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}};return!a||a.length===0?e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Exchange Balances"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-wallet-line text-4xl mb-2"}),e.jsx("p",{children:"No exchange connections found"}),e.jsx("p",{className:"text-sm",children:"Connect your exchange API keys to view balances"})]})]}):e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Exchange Balances"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]})]}),e.jsx("div",{className:"space-y-4",children:a.map((t,c)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${n(t.exchange)}`,children:e.jsx("i",{className:`${i(t.exchange)} text-lg`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.exchange.toUpperCase()}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Updated ",new Date(t.lastUpdated).toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l(t.totalBalance)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Available: ",l(t.availableBalance)]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.assets.slice(0,4).map((s,r)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s.asset}),e.jsx("span",{className:"font-medium",children:s.total.toFixed(4)})]},r))})]},c))})]})}function D(){const a=g(),[l,i]=d.useState(!1),{bots:n,fetchBots:t}=u(),{data:c,refetch:s}=C("BTCUSDT","bybit"),{balances:r,refetch:o}=E(),x=async()=>{i(!0);try{await Promise.all([t(),s(),o()])}catch(N){console.error("Failed to refresh data:",N)}finally{i(!1)}},y=()=>{a("/create-bot")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(p,{title:"Pablo AI Trading",subtitle:"Multi-Exchange Bot Platform",action:e.jsxs(h,{size:"sm",onClick:x,loading:l,children:[e.jsx("i",{className:"ri-refresh-line mr-1"}),"Refresh"]})}),e.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Ready to Trade?"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Create your first AI trading bot"})]}),e.jsxs(h,{variant:"secondary",size:"sm",onClick:y,children:[e.jsx("i",{className:"ri-add-line mr-1"}),"New Bot"]})]})}),e.jsx(w,{}),e.jsx(T,{balances:r}),e.jsx(B,{bots:n}),e.jsx(S,{marketData:c?[c]:[]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Exchange Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-currency-line text-yellow-600"})}),e.jsx("span",{className:"font-medium",children:"Bybit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-exchange-line text-blue-600"})}),e.jsx("span",{className:"font-medium",children:"OKX"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]})]})]})]})]}),e.jsx(v,{})]})}export{D as default};
//# sourceMappingURL=page-Cj7VStJQ.js.map
