import{j as e,u as N,r as h,a as p,A as y,b as C}from"./index-8a16c905.js";import{H as S}from"./Header-613465f2.js";import{N as T}from"./Navigation-19e2325e.js";import{C as u}from"./Card-775b16c0.js";import{B as j}from"./Button-18f9c519.js";import{u as v}from"./useBots-aa7c8a22.js";function B({title:t,value:a,change:l,changeType:n,icon:r}){const i={positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"};return e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:a}),e.jsx("p",{className:`text-sm mt-1 ${i[n]}`,children:l})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${r} text-blue-600 text-xl`})})]})})}function k(){const{bots:t,loading:a}=v(),l=t.filter(o=>o.status==="running"||o.status==="active"),n=t.reduce((o,m)=>o+(m.pnl||0),0),r=t.reduce((o,m)=>o+(m.totalTrades||0),0),i=t.filter(o=>(o.totalTrades||0)>0),s=i.length>0?i.reduce((o,m)=>o+(m.winRate||0),0)/i.length:0,d=n>0?"+"+(n*.1).toFixed(2):(n*.1).toFixed(2),g=Math.floor(r*.15),c=[{title:"Total PnL",value:a?"...":`$${n.toFixed(2)}`,change:a?"...":`${d}% today`,changeType:n>=0?"positive":"negative",icon:"ri-money-dollar-circle-line"},{title:"Active Bots",value:a?"...":l.length.toString(),change:a?"...":`${t.length} total`,changeType:"positive",icon:"ri-robot-line"},{title:"Win Rate",value:a?"...":`${s.toFixed(1)}%`,change:a?"...":"Average across all bots",changeType:s>=60?"positive":s>=50?"neutral":"negative",icon:"ri-trophy-line"},{title:"Total Trades",value:a?"...":r.toLocaleString(),change:a?"...":`${g} today`,changeType:"neutral",icon:"ri-exchange-line"}];return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((o,m)=>e.jsx(B,{...o},m))})}function $({bots:t=[]}){const a=N(),l=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"stopped":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=s=>s==="bybit"?"ri-currency-line":"ri-exchange-line",r=s=>s>=0?"text-green-600":"text-red-600",i=Array.isArray(t)?t:[];return e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Active Bots"}),e.jsxs(j,{variant:"secondary",size:"sm",onClick:()=>a("/create-bot"),children:[e.jsx("i",{className:"ri-add-line mr-1"}),"New Bot"]})]}),e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-robot-line text-2xl text-gray-400"})}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No active bots yet"}),e.jsx(j,{variant:"primary",onClick:()=>a("/create-bot"),className:"text-sm",children:"Create Your First Bot"})]}):i.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${n(s.exchange)} text-blue-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.symbol," â€¢ ",s.exchange.toUpperCase()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(s.status)}`,children:s.status})}),e.jsxs("p",{className:`text-sm font-medium mt-1 ${r(s.pnl||0)}`,children:[(s.pnl||0)>=0?"+":"",(s.pnl||0).toFixed(2)]})]})]},s.id))})]})}function A({marketData:t}){const a=r=>r>=0?"text-green-600":"text-red-600",l=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}),n=t||[];return e.jsxs(u,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Market Overview"}),e.jsx("button",{className:"text-blue-600 text-sm font-medium",children:"Refresh"})]}),e.jsx("div",{className:"space-y-3",children:n.length>0?n.slice(0,6).map((r,i)=>{var s;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-currency-line text-orange-600 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.symbol}),e.jsxs("p",{className:"text-xs text-gray-500",children:["RSI: ",((s=r.rsi)==null?void 0:s.toFixed(1))||"N/A"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:l(r.price)}),e.jsxs("p",{className:`text-sm ${a(r.change24h)}`,children:[r.change24h>=0?"+":"",r.change24h.toFixed(2),"%"]})]})]},i)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"ri-line-chart-line text-gray-400 text-lg"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No market data available"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Check your connection and try again"})]})})]})}function E(t="BTCUSDT",a="bybit"){const[l,n]=h.useState(null),[r,i]=h.useState(!0),[s,d]=h.useState(null),g=async()=>{try{i(!0);const c=await p(`${y.MARKET_DATA}?symbol=${t}&exchange=${a}`);n(c),d(null)}catch(c){d(c instanceof Error?c.message:"Failed to fetch market data")}finally{i(!1)}};return h.useEffect(()=>{g();const c=setInterval(g,3e4);return()=>clearInterval(c)},[t,a]),{data:l,loading:r,error:s,refetch:g}}function F(){const[t,a]=h.useState([]),[l,n]=h.useState(!0),[r,i]=h.useState(null),s=async()=>{try{n(!0);const d=await p(`${y.API_KEYS}/balances`);a(d.balances||[]),i(null)}catch(d){i(d instanceof Error?d.message:"Failed to fetch balances")}finally{n(!1)}};return h.useEffect(()=>{s();const d=setInterval(s,6e4);return()=>clearInterval(d)},[]),{balances:t,loading:l,error:r,refetch:s}}function L({balances:t}){const a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),l=s=>{switch(s.toLowerCase()){case"bybit":return"ri-currency-line";case"okx":return"ri-exchange-line";default:return"ri-exchange-line"}},n=s=>{switch(s.toLowerCase()){case"bybit":return"text-yellow-600 bg-yellow-100";case"okx":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},r=s=>{switch(s){case"connected":return"text-green-600 bg-green-100";case"disconnected":return"text-gray-600 bg-gray-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},i=s=>{switch(s){case"connected":return"ri-check-line";case"disconnected":return"ri-close-line";case"error":return"ri-error-warning-line";default:return"ri-question-line"}};return!t||t.length===0?e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Exchange Balances"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("i",{className:"ri-wallet-line text-4xl mb-2"}),e.jsx("p",{children:"No exchange connections found"}),e.jsx("p",{className:"text-sm",children:"Connect your exchange API keys to view balances"})]})]}):e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Exchange Balances"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600",children:"Connected"})]})]}),e.jsx("div",{className:"space-y-4",children:t.map((s,d)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${n(s.exchange)}`,children:e.jsx("i",{className:`${l(s.exchange)} text-lg`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.exchange.toUpperCase()}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${r(s.status)}`,children:[e.jsx("i",{className:`${i(s.status)} text-xs`}),e.jsx("span",{children:s.status})]})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Updated ",new Date(s.lastUpdated).toLocaleTimeString()]}),s.error&&e.jsxs("p",{className:"text-sm text-red-500 mt-1",children:["Error: ",s.error]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:a(s.totalBalance)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Available: ",a(s.availableBalance)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Locked: ",a(s.lockedBalance)]})]})]}),s.assets&&s.assets.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.assets.slice(0,4).map((g,c)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:g.asset}),e.jsx("span",{className:"font-medium",children:g.total.toFixed(4)})]},c))})]},d))})]})}function W(){const t=N(),{user:a}=C(),{bots:l,loading:n}=v(),{marketData:r,loading:i}=E(),{balances:s,loading:d}=F(),[g,c]=h.useState(!1);h.useEffect(()=>{!localStorage.getItem("welcome_shown")&&a&&(c(!0),localStorage.setItem("welcome_shown","true"))},[a]);const o=l.filter(x=>x.status==="active"),m=l.reduce((x,f)=>x+(f.totalPnL||0),0),b=()=>{c(!1),t("/create-bot")},w=()=>{confirm("Are you sure you want to reset all data? This will clear all bots, trades, and settings.")&&(localStorage.clear(),window.location.reload())};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(S,{title:"Pablo",subtitle:"AI Trading Platform",rightAction:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(j,{variant:"danger",size:"sm",onClick:w,children:[e.jsx("i",{className:"ri-refresh-line mr-1"}),"Reset"]}),e.jsx("button",{onClick:()=>t("/help"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-notification-line text-xl text-gray-600"})})]})}),e.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-6",children:[g&&e.jsx(u,{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-robot-line text-2xl text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Welcome to Pablo! ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Ready to start automated trading? Create your first AI trading bot and let it work 24/7 for you."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(j,{variant:"primary",onClick:b,className:"text-sm",children:"Create First Bot"}),e.jsx(j,{variant:"secondary",onClick:()=>c(!1),className:"text-sm",children:"Maybe Later"})]})]}),e.jsx("button",{onClick:()=>c(!1),className:"p-1 hover:bg-blue-100 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-gray-500"})})]})}),e.jsx(k,{}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(j,{variant:"primary",onClick:()=>t("/create-bot"),className:"h-12 flex items-center justify-center",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Create Bot"]}),e.jsxs(j,{variant:"secondary",onClick:()=>t("/bots"),className:"h-12 flex items-center justify-center",children:[e.jsx("i",{className:"ri-robot-line mr-2"}),"Manage Bots"]})]})]}),e.jsx($,{bots:o}),e.jsx(L,{balances:s}),e.jsx(A,{marketData:r}),e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),e.jsx(j,{variant:"secondary",onClick:()=>t("/trades"),className:"text-sm",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:[{type:"trade",message:"BTC Scalper opened LONG position",time:"2 minutes ago",icon:"ri-arrow-up-line",color:"green"},{type:"profit",message:"ETH Momentum closed with +$45.20 profit",time:"15 minutes ago",icon:"ri-money-dollar-circle-line",color:"green"},{type:"alert",message:"SOL Trader hit stop loss at -2.5%",time:"1 hour ago",icon:"ri-alert-line",color:"red"},{type:"bot",message:'New bot "DOGE Swing" created',time:"2 hours ago",icon:"ri-robot-line",color:"blue"}].map((x,f)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-8 h-8 bg-${x.color}-100 rounded-full flex items-center justify-center`,children:e.jsx("i",{className:`${x.icon} text-${x.color}-600`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.message}),e.jsx("p",{className:"text-xs text-gray-500",children:x.time})]})]},f))})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Performance"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:`text-2xl font-bold ${m>=0?"text-green-600":"text-red-600"}`,children:[m>=0?"+":"","$",m.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total P&L"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.reduce((x,f)=>x+(f.totalTrades||0),0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Trades"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[l.length>0?(l.reduce((x,f)=>x+(f.winRate||0),0)/l.length).toFixed(1):"0.0","%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Win Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Bots"})]})]})]}),e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trading Tips"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-lightbulb-line text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Risk Management"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Never risk more than 2-3% of your capital on a single trade. Use stop losses to protect your investments."})]})]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-bar-chart-line text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 mb-1",children:"Diversification"}),e.jsx("p",{className:"text-sm text-green-700",children:"Spread your trades across different cryptocurrencies and strategies to reduce overall risk."})]})]})})]})]})]}),e.jsx(T,{})]})}export{W as default};
//# sourceMappingURL=page-d6c06d76.js.map
