{"version":3,"file":"page-9f77f9b4.js","sources":["../../src/hooks/useAdmin.ts","../../src/pages/admin/page.tsx"],"sourcesContent":["\nimport { useState } from 'react';\nimport { supabase } from '../lib/supabase';\n\ninterface User {\n  id: string;\n  email: string;\n  role: string;\n  status?: string;\n  status_updated_at?: string;\n  created_at: string;\n  last_sign_in_at: string;\n}\n\ninterface InvitationCode {\n  id: string;\n  code: string;\n  email: string;\n  used: boolean;\n  created_at: string;\n  expires_at: string;\n}\n\ninterface TradingBot {\n  id: string;\n  name: string;\n  status: string;\n  total_trades: number;\n  win_rate: number;\n  pnl: number;\n  users: { email: string };\n}\n\ninterface SystemStats {\n  totalUsers: number;\n  totalBots: number;\n  totalTrades: number;\n  totalAlerts: number;\n  platformPnL: number;\n  recentTrades: number;\n}\n\ninterface TradingAnalytics {\n  totalTrades: number;\n  filledTrades: number;\n  failedTrades: number;\n  pendingTrades: number;\n  totalPnL: number;\n  successRate: number;\n  exchangeStats: Record<string, { count: number; pnl: number }>;\n  trades: any[];\n}\n\ninterface FinancialOverview {\n  totalVolume: number;\n  totalFees: number;\n  totalPnL: number;\n  dailyPnL: Record<string, number>;\n  netProfit: number;\n}\n\ninterface UserActivity {\n  id: string;\n  email: string;\n  created_at: string;\n  last_sign_in_at: string;\n  trading_bots: any[];\n  trades: any[];\n}\n\ninterface RiskMetrics {\n  largeTrades: any[];\n  failedTrades: any[];\n  riskScore: number;\n}\n\nexport function useAdmin() {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const callAdminFunction = async (action: string, params: any = {}) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const { data, error: invokeError } = await supabase.functions.invoke('admin-management-enhanced', {\n        body: { action, ...params }\n      });\n\n      if (invokeError) {\n        console.error('Edge function invoke error:', invokeError);\n        const errorMessage = invokeError.message || 'Unknown error occurred';\n        setError(errorMessage);\n        throw new Error(errorMessage);\n      }\n      \n      // Check if response contains an error\n      if (data?.error) {\n        console.error('Edge function returned error:', data);\n        const errorMessage = data.details ? `${data.error}: ${data.details}` : (data.error || 'Unknown error occurred');\n        setError(errorMessage);\n        throw new Error(errorMessage);\n      }\n      \n      return data;\n    } catch (err: any) {\n      console.error('Admin function error:', err);\n      const errorMessage = err.message || err.error || err.details || 'Unknown error occurred';\n      setError(errorMessage);\n      throw new Error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Existing user management functions\n  const getUsers = async (): Promise<User[]> => {\n    const data = await callAdminFunction('getUsers');\n    return data.users || [];\n  };\n\n  const createUser = async (email: string, password: string, role: string = 'user') => {\n    return await callAdminFunction('createUser', { email, password, role });\n  };\n\n  const deleteUser = async (userId: string) => {\n    return await callAdminFunction('deleteUser', { userId });\n  };\n\n  const updateUserRole = async (userId: string, role: string) => {\n    return await callAdminFunction('updateUserRole', { userId, role });\n  };\n\n  const updateUserStatus = async (userId: string, status: string) => {\n    return await callAdminFunction('updateUserStatus', { userId, status });\n  };\n\n  const sendPasswordResetLink = async (email: string) => {\n    return await callAdminFunction('sendPasswordResetLink', { email });\n  };\n\n  const getInvitationCodes = async (): Promise<InvitationCode[]> => {\n    const data = await callAdminFunction('getInvitationCodes');\n    return data.codes || [];\n  };\n\n  const generateInvitationCode = async (email: string, expiresInDays: number = 7) => {\n    return await callAdminFunction('generateInvitationCode', { email, expiresInDays });\n  };\n\n  // NEW: Trading Bot Management\n  const getAllBots = async (): Promise<TradingBot[]> => {\n    const data = await callAdminFunction('getAllBots');\n    return data.bots || [];\n  };\n\n  const adminControlBot = async (botId: string, action: string) => {\n    return await callAdminFunction('adminControlBot', { botId, action });\n  };\n\n  const getBotAnalytics = async () => {\n    const data = await callAdminFunction('getBotAnalytics');\n    return data.analytics || [];\n  };\n\n  // NEW: System Monitoring\n  const getSystemStats = async (): Promise<SystemStats> => {\n    const data = await callAdminFunction('getSystemStats');\n    return data.stats;\n  };\n\n  const getTradingAnalytics = async (period: string = '7'): Promise<TradingAnalytics> => {\n    const data = await callAdminFunction('getTradingAnalytics', { period });\n    return data.analytics;\n  };\n\n  // NEW: Financial Oversight\n  const getFinancialOverview = async (): Promise<FinancialOverview> => {\n    const data = await callAdminFunction('getFinancialOverview');\n    return data.financial;\n  };\n\n  // NEW: User Activity Monitoring\n  const getUserActivity = async (): Promise<UserActivity[]> => {\n    const data = await callAdminFunction('getUserActivity');\n    return data.userActivity || [];\n  };\n\n  // NEW: System Logs\n  const getSystemLogs = async (limit: number = 100) => {\n    const data = await callAdminFunction('getSystemLogs', { limit });\n    return data.logs || [];\n  };\n\n  // NEW: Latest Trades (All Users or specific user)\n  const getLatestTrades = async (limit: number = 100, userId: string | null = null) => {\n    const data = await callAdminFunction('getLatestTrades', { limit, user_id: userId });\n    return data.trades || [];\n  };\n\n  // NEW: Risk Monitoring\n  const getRiskMetrics = async (): Promise<RiskMetrics> => {\n    const data = await callAdminFunction('getRiskMetrics');\n    return data.risk;\n  };\n\n  // NEW: Data Export\n  const exportData = async (type: string, userId?: string) => {\n    const data = await callAdminFunction('exportData', { type, userId });\n    return data.data;\n  };\n\n  return {\n    loading,\n    error,\n    // User Management\n    getUsers,\n    createUser,\n    deleteUser,\n    updateUserRole,\n    updateUserStatus,\n    sendPasswordResetLink,\n    getInvitationCodes,\n    generateInvitationCode,\n    // Trading Bot Management\n    getAllBots,\n    adminControlBot,\n    getBotAnalytics,\n    // System Monitoring\n    getSystemStats,\n    getTradingAnalytics,\n    // Financial Oversight\n    getFinancialOverview,\n    // User Activity\n    getUserActivity,\n    // System Administration\n    getSystemLogs,\n    // Latest Trades\n    getLatestTrades,\n    // Risk & Security\n    getRiskMetrics,\n    exportData\n  };\n}\n","\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Header from '../../components/feature/Header';\nimport Navigation from '../../components/feature/Navigation';\nimport Button from '../../components/base/Button';\nimport Card from '../../components/base/Card';\nimport { useAuth } from '../../hooks/useAuth';\nimport { useAdmin } from '../../hooks/useAdmin';\nimport { supabase } from '../../lib/supabase';\n\ninterface User {\n  id: string;\n  email: string;\n  role: string;\n  status?: string;\n  status_updated_at?: string;\n  created_at: string;\n  last_sign_in_at: string;\n  stats?: {\n    totalPnL: number;\n    totalTrades: number;\n    activeBots: number;\n    avgWinRate: number;\n    totalVolume: number;\n    paperPnL: number;\n    paperTradesCount: number;\n    isActive: boolean;\n  };\n}\n\ninterface InvitationCode {\n  id: string;\n  code: string;\n  email: string;\n  used: boolean;\n  created_at: string;\n  expires_at: string;\n}\n\ninterface TradingBot {\n  id: string;\n  name: string;\n  status: string;\n  total_trades: number;\n  win_rate: number;\n  pnl: number;\n  users: { email: string };\n}\n\ninterface SystemStats {\n  totalUsers: number;\n  totalBots: number;\n  totalTrades: number;\n  totalAlerts: number;\n  platformPnL: number;\n  recentTrades: number;\n}\n\ninterface TradingAnalytics {\n  totalTrades: number;\n  filledTrades: number;\n  failedTrades: number;\n  pendingTrades: number;\n  totalPnL: number;\n  successRate: number;\n  exchangeStats: Record<string, { count: number; pnl: number }>;\n  trades: any[];\n}\n\ninterface FinancialOverview {\n  totalVolume: number;\n  totalFees: number;\n  totalPnL: number;\n  dailyPnL: Record<string, number>;\n  netProfit: number;\n}\n\ninterface UserActivity {\n  id: string;\n  email: string;\n  created_at: string;\n  last_sign_in_at: string;\n  trading_bots: any[];\n  trades: any[];\n}\n\ninterface RiskMetrics {\n  largeTrades: any[];\n  failedTrades: any[];\n  riskScore: number;\n}\n\nexport default function AdminPage() {\n  const navigate = useNavigate();\n  const { user, loading: authLoading } = useAuth();\n  const { \n    createUser, \n    generateInvitationCode, \n    getUsers, \n    getInvitationCodes,\n    getAllBots,\n    adminControlBot,\n    getBotAnalytics,\n    getSystemStats,\n    getTradingAnalytics,\n    getFinancialOverview,\n    getUserActivity,\n    getSystemLogs,\n    getLatestTrades,\n    getRiskMetrics,\n    exportData,\n    deleteUser,\n    updateUserRole,\n    updateUserStatus,\n    sendPasswordResetLink\n  } = useAdmin();\n  \n  const [activeTab, setActiveTab] = useState('overview');\n  const [users, setUsers] = useState<User[]>([]);\n  const [invitationCodes, setInvitationCodes] = useState<InvitationCode[]>([]);\n  const [allBots, setAllBots] = useState<TradingBot[]>([]);\n  const [pabloReadyBots, setPabloReadyBots] = useState<any[]>([]);\n  const [pabloReadyLoading, setPabloReadyLoading] = useState(false);\n  const [editingBotId, setEditingBotId] = useState<string | null>(null);\n  const [editingBotName, setEditingBotName] = useState<string>('');\n  const [deletingBotId, setDeletingBotId] = useState<string | null>(null);\n  const [testingBotId, setTestingBotId] = useState<Record<string, 'real' | 'paper' | null>>({});\n  const [systemStats, setSystemStats] = useState<SystemStats | null>(null);\n  const [tradingAnalytics, setTradingAnalytics] = useState<TradingAnalytics | null>(null);\n  const [financialOverview, setFinancialOverview] = useState<FinancialOverview | null>(null);\n  const [userActivity, setUserActivity] = useState<UserActivity[]>([]);\n  const [systemLogs, setSystemLogs] = useState<any[]>([]);\n  const [riskMetrics, setRiskMetrics] = useState<RiskMetrics | null>(null);\n  const [latestTrades, setLatestTrades] = useState<any[]>([]);\n  const [latestTradesLoading, setLatestTradesLoading] = useState(false);\n  const [latestTradesFilter, setLatestTradesFilter] = useState<'all' | 'real' | 'paper'>('all');\n  const [latestTradesUserFilter, setLatestTradesUserFilter] = useState<string>('all');\n  const [loading, setLoading] = useState(true);\n  const [showCreateUser, setShowCreateUser] = useState(false);\n  const [showCreateInvitation, setShowCreateInvitation] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [userActionLoading, setUserActionLoading] = useState<Record<string, boolean>>({});\n  \n  const [newUser, setNewUser] = useState({\n    email: '',\n    password: '',\n    role: 'user'\n  });\n  \n  const [newInvitation, setNewInvitation] = useState({\n    email: '',\n    expiresInDays: 7\n  });\n\n  useEffect(() => {\n    console.log('ðŸ”§ Admin page loaded - User:', user?.email, 'Role:', user?.role, 'Auth Loading:', authLoading);\n    \n    // Wait for auth to finish loading before checking role\n    if (authLoading) {\n      console.log('â³ Still loading auth data...');\n      return;\n    }\n    \n    // After loading is complete, check if user is admin\n    if (!user || user?.role !== 'admin') {\n      console.log('âŒ User is not admin, redirecting to home');\n      navigate('/dashboard');\n      return;\n    }\n    \n    console.log('âœ… User is admin, loading admin data...');\n    loadData();\n  }, [user, authLoading, navigate]);\n\n  // Ensure users are loaded when Latest Trades tab is active\n  useEffect(() => {\n    if (activeTab === 'latest-trades' && users.length === 0) {\n      console.log('ðŸ”„ Latest Trades tab active but no users, loading users...');\n      const loadUsersForDropdown = async () => {\n        try {\n          const usersData = await getUsers();\n          console.log('âœ… Users loaded in useEffect:', usersData?.length || 0, 'users');\n          console.log('ðŸ“‹ Users data sample:', usersData?.[0]);\n          if (usersData && usersData.length > 0) {\n            setUsers(usersData);\n            console.log('âœ… Users state updated with', usersData.length, 'users');\n          } else {\n            console.warn('âš ï¸ getUsers() returned empty array or null');\n          }\n        } catch (error) {\n          console.error('âŒ Failed to load users in useEffect:', error);\n        }\n      };\n      loadUsersForDropdown();\n    }\n  }, [activeTab]); // Only depend on activeTab to avoid infinite loops\n\n  const fetchPabloReadyBots = async () => {\n    try {\n      setPabloReadyLoading(true);\n      const { data, error } = await supabase\n        .from('pablo_ready_bots')\n        .select('*')\n        .order('order_index', { ascending: true })\n        .order('created_at', { ascending: false });\n      \n      if (error) throw error;\n      setPabloReadyBots(data || []);\n    } catch (error: any) {\n      console.error('Error fetching Pablo Ready bots:', error);\n      alert(`Failed to load Pablo Ready bots: ${error?.message || error}`);\n    } finally {\n      setPabloReadyLoading(false);\n    }\n  };\n\n  const togglePabloReadyBot = async (botId: string, enabled: boolean) => {\n    try {\n      const { error } = await supabase\n        .from('pablo_ready_bots')\n        .update({ enabled: !enabled })\n        .eq('id', botId);\n      \n      if (error) throw error;\n      await fetchPabloReadyBots();\n      alert(`âœ… Bot ${enabled ? 'disabled' : 'enabled'} successfully`);\n    } catch (error: any) {\n      console.error('Error toggling Pablo Ready bot:', error);\n      alert(`âŒ Failed to ${enabled ? 'disable' : 'enable'} bot: ${error?.message || error}`);\n    }\n  };\n\n  const startEditingBotName = (bot: any) => {\n    setEditingBotId(bot.id);\n    setEditingBotName(bot.name);\n  };\n\n  const cancelEditingBotName = () => {\n    setEditingBotId(null);\n    setEditingBotName('');\n  };\n\n  const saveBotName = async (botId: string) => {\n    if (!editingBotName.trim()) {\n      alert('âŒ Bot name cannot be empty');\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('pablo_ready_bots')\n        .update({ name: editingBotName.trim() })\n        .eq('id', botId);\n      \n      if (error) throw error;\n      await fetchPabloReadyBots();\n      setEditingBotId(null);\n      setEditingBotName('');\n      alert('âœ… Bot name updated successfully');\n    } catch (error: any) {\n      console.error('Error updating bot name:', error);\n      alert(`âŒ Failed to update bot name: ${error?.message || error}`);\n    }\n  };\n\n  const deletePabloReadyBot = async (botId: string, botName: string) => {\n    if (!confirm(`âš ï¸ Are you sure you want to delete \"${botName}\"?\\n\\nThis action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      setDeletingBotId(botId);\n      const { error } = await supabase\n        .from('pablo_ready_bots')\n        .delete()\n        .eq('id', botId);\n      \n      if (error) throw error;\n      await fetchPabloReadyBots();\n      alert(`âœ… Bot \"${botName}\" deleted successfully`);\n    } catch (error: any) {\n      console.error('Error deleting Pablo Ready bot:', error);\n      alert(`âŒ Failed to delete bot: ${error?.message || error}`);\n    } finally {\n      setDeletingBotId(null);\n    }\n  };\n\n  const fetchLatestTrades = async () => {\n    try {\n      setLatestTradesLoading(true);\n      \n      // Use admin Edge Function which uses service role key to bypass RLS\n      // Pass user_id filter if a specific user is selected\n      const userId = latestTradesUserFilter === 'all' ? null : latestTradesUserFilter;\n      const trades = await getLatestTrades(100, userId);\n      setLatestTrades(trades);\n    } catch (error: any) {\n      console.error('Error fetching latest trades:', error);\n      alert(`Failed to load latest trades: ${error?.message || error}`);\n      setLatestTrades([]);\n    } finally {\n      setLatestTradesLoading(false);\n    }\n  };\n\n  const loadData = async () => {\n    try {\n      console.log('ðŸ”„ Loading admin data...');\n      setLoading(true);\n      const [\n        usersData, \n        codesData, \n        botsData, \n        statsData, \n        analyticsData, \n        financialData, \n        activityData, \n        logsData, \n        riskData\n      ] = await Promise.all([\n        getUsers(),\n        getInvitationCodes(),\n        getAllBots(),\n        getSystemStats(),\n        getTradingAnalytics(),\n        getFinancialOverview(),\n        getUserActivity(),\n        getSystemLogs(),\n        getRiskMetrics()\n      ]);\n      \n      console.log('âœ… Admin data loaded successfully');\n      \n      console.log('ðŸ“Š Users data received:', usersData);\n      console.log('ðŸ“Š First user sample:', usersData?.[0]);\n      console.log('ðŸ“Š First user stats:', usersData?.[0]?.stats);\n      \n      setUsers(usersData || []);\n      setInvitationCodes(codesData || []);\n      setAllBots(botsData || []);\n      setSystemStats(statsData);\n      setTradingAnalytics(analyticsData);\n      setFinancialOverview(financialData);\n      setUserActivity(activityData || []);\n      setSystemLogs(logsData || []);\n      setRiskMetrics(riskData);\n      \n      // Load Pablo Ready bots if on that tab\n      if (activeTab === 'pablo-ready') {\n        await fetchPabloReadyBots();\n      }\n    } catch (error) {\n      console.error('âŒ Error loading admin data:', error);\n      console.error('âŒ Error details:', error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccessMessage(null);\n    try {\n      const result = await createUser(newUser.email, newUser.password, newUser.role);\n      setSuccessMessage(result?.message || 'User created successfully');\n      setNewUser({ email: '', password: '', role: 'user' });\n      setTimeout(() => {\n        setShowCreateUser(false);\n        loadData();\n      }, 1000);\n    } catch (error: any) {\n      console.error('Error creating user:', error);\n      setError(error?.message || error?.error || 'Failed to create user. Please try again.');\n    }\n  };\n\n  const handleCreateInvitation = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccessMessage(null);\n    try {\n      const result = await generateInvitationCode(newInvitation.email, newInvitation.expiresInDays);\n      setSuccessMessage(result?.message || 'Invitation code created successfully');\n      setNewInvitation({ email: '', expiresInDays: 7 });\n      setTimeout(() => {\n        setShowCreateInvitation(false);\n        loadData();\n      }, 1000);\n    } catch (error: any) {\n      console.error('Error creating invitation:', error);\n      setError(error?.message || error?.error || 'Failed to create invitation code. Please try again.');\n    }\n  };\n\n  const setUserLoadingState = (userId: string, value: boolean) => {\n    setUserActionLoading(prev => ({ ...prev, [userId]: value }));\n  };\n\n  const handleUserRoleChange = async (userId: string, role: 'user' | 'admin') => {\n    setUserLoadingState(userId, true);\n    try {\n      await updateUserRole(userId, role);\n      setUsers(prev => prev.map(user => user.id === userId ? { ...user, role } : user));\n      await loadData();\n      alert(`âœ… Updated user role to ${role}`);\n    } catch (error: any) {\n      console.error('Error updating user role:', error);\n      alert(`âŒ Failed to update user role: ${error?.message || error}`);\n    } finally {\n      setUserLoadingState(userId, false);\n    }\n  };\n\n  const handleUserStatusChange = async (userId: string, status: 'active' | 'suspended' | 'disabled') => {\n    setUserLoadingState(userId, true);\n    try {\n      await updateUserStatus(userId, status);\n      setUsers(prev => prev.map(user => user.id === userId ? { ...user, status } : user));\n      await loadData();\n      alert(`âœ… Updated user status to ${status}`);\n    } catch (error: any) {\n      console.error('Error updating user status:', error);\n      alert(`âŒ Failed to update user status: ${error?.message || error}`);\n    } finally {\n      setUserLoadingState(userId, false);\n    }\n  };\n\n  const handleDeleteUserAccount = async (userId: string, email: string) => {\n    const confirmed = window.confirm(`Delete user \"${email}\"? This cannot be undone.`);\n    if (!confirmed) return;\n\n    setUserLoadingState(userId, true);\n    try {\n      await deleteUser(userId);\n      await loadData();\n      alert('âœ… User deleted successfully');\n    } catch (error: any) {\n      console.error('Error deleting user:', error);\n      alert(`âŒ Failed to delete user: ${error?.message || error}`);\n    } finally {\n      setUserLoadingState(userId, false);\n    }\n  };\n\n  const handleSendPasswordReset = async (userId: string, email: string) => {\n    setUserLoadingState(userId, true);\n    try {\n      const result = await sendPasswordResetLink(email);\n      const resetLink = result?.resetLink;\n      if (resetLink) {\n        try {\n          await navigator.clipboard.writeText(resetLink);\n          alert('âœ… Password reset link generated and copied to clipboard.');\n        } catch {\n          alert(`âœ… Password reset link generated:\\n${resetLink}`);\n        }\n      } else {\n        alert('âœ… Password reset link generated.');\n      }\n    } catch (error: any) {\n      console.error('Error generating password reset link:', error);\n      alert(`âŒ Failed to generate password reset link: ${error?.message || error}`);\n    } finally {\n      setUserLoadingState(userId, false);\n    }\n  };\n\n  const handleBotControl = async (botId: string, action: string) => {\n    try {\n      await adminControlBot(botId, action);\n      loadData();\n    } catch (error) {\n      console.error('Error controlling bot:', error);\n    }\n  };\n\n  const handleTestTrade = async (botId: string, mode: 'real' | 'paper') => {\n    if (!user) {\n      alert('âŒ You must be logged in to test trades');\n      return;\n    }\n\n    const confirmMessage = mode === 'real' \n      ? `âš ï¸ WARNING: This will execute a REAL trade using live funds!\\n\\nBot: ${allBots.find(b => b.id === botId)?.name || botId}\\n\\nAre you sure you want to proceed?`\n      : `Test PAPER trade for bot: ${allBots.find(b => b.id === botId)?.name || botId}\\n\\nThis will execute a paper trade (no real funds).`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    try {\n      setTestingBotId(prev => ({ ...prev, [botId]: mode }));\n\n      // Get bot details\n      const { data: botData, error: botError } = await supabase\n        .from('trading_bots')\n        .select('id, user_id, name, symbol, exchange, trading_type, status')\n        .eq('id', botId)\n        .single();\n\n      if (botError || !botData) {\n        throw new Error(`Failed to fetch bot: ${botError?.message || 'Bot not found'}`);\n      }\n\n      if (botData.status !== 'running') {\n        throw new Error(`Bot is not running. Current status: ${botData.status}`);\n      }\n\n      // Create manual trade signal\n      const { data: signalData, error: signalError } = await supabase\n        .from('manual_trade_signals')\n        .insert({\n          bot_id: botId,\n          user_id: botData.user_id,\n          mode: mode,\n          side: 'buy',\n          size_multiplier: 1.0,\n          reason: `Admin test trade (${mode.toUpperCase()})`,\n          status: 'pending'\n        })\n        .select()\n        .single();\n\n      if (signalError || !signalData) {\n        throw new Error(`Failed to create test signal: ${signalError?.message || 'Unknown error'}`);\n      }\n\n      console.log(`âœ… Test signal created: ${signalData.id}`);\n\n      // Trigger bot executor immediately\n      const supabaseUrl = import.meta.env.VITE_PUBLIC_SUPABASE_URL;\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        throw new Error('No active session found');\n      }\n\n      const requestUrl = `${supabaseUrl}/functions/v1/bot-executor`;\n      const requestBody = {\n        action: 'execute_bot',\n        bot_id: botId\n      };\n      \n      console.log(`ðŸš€ Triggering bot executor:`, {\n        url: requestUrl,\n        method: 'POST',\n        botId: botId,\n        action: 'execute_bot',\n        mode: mode\n      });\n\n      try {\n        const triggerResponse = await fetch(requestUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${session.access_token}`,\n            'x-cron-secret': import.meta.env.VITE_CRON_SECRET || ''\n          },\n          body: JSON.stringify(requestBody)\n        });\n\n        const triggerText = await triggerResponse.text();\n        \n        console.log(`ðŸ“¥ Bot executor response:`, {\n          status: triggerResponse.status,\n          statusText: triggerResponse.statusText,\n          ok: triggerResponse.ok,\n          body: triggerText.substring(0, 200)\n        });\n        \n        if (!triggerResponse.ok) {\n          console.error(`âŒ Bot executor trigger failed:`, {\n            status: triggerResponse.status,\n            statusText: triggerResponse.statusText,\n            body: triggerText\n          });\n          // Don't fail the test - the signal is created and will be processed by the next cron run\n        } else {\n          console.log(`âœ… Bot executor triggered successfully`);\n        }\n      } catch (fetchError: any) {\n        console.error(`âŒ Failed to trigger bot executor:`, {\n          error: fetchError.message,\n          stack: fetchError.stack,\n          name: fetchError.name\n        });\n        // Don't fail the test - the signal is created and will be processed by the next cron run\n      }\n\n      alert(`âœ… Test ${mode.toUpperCase()} trade signal created!\\n\\nSignal ID: ${signalData.id}\\n\\nThe bot executor will process this trade shortly. Check the bot logs for execution details.`);\n      \n      // Refresh data after a short delay\n      setTimeout(() => {\n        loadData();\n      }, 2000);\n\n    } catch (error: any) {\n      console.error('Error creating test trade:', error);\n      alert(`âŒ Failed to create test trade: ${error?.message || 'Unknown error'}`);\n    } finally {\n      setTestingBotId(prev => ({ ...prev, [botId]: null }));\n    }\n  };\n\n  const handleExportData = async (type: string, userId?: string) => {\n    try {\n      const data = await exportData(type, userId);\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${type}_export_${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error exporting data:', error);\n    }\n  };\n\n  // Show loading state while auth is loading\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n          <p className=\"mt-4 text-gray-600\">**Loading admin panel...**</p>\n        </div>\n      </div>\n    );\n  }\n\n  // After loading, check if user is admin\n  if (!user || user?.role !== 'admin') {\n    return null;\n  }\n\n  const tabs = [\n    { id: 'overview', label: 'Overview', icon: 'ri-dashboard-line' },\n    { id: 'users', label: 'Users', icon: 'ri-user-line' },\n    { id: 'bots', label: 'Trading Bots', icon: 'ri-robot-line' },\n    { id: 'pablo-ready', label: 'Pablo Ready', icon: 'ri-star-line' },\n    { id: 'latest-trades', label: 'Latest Trades', icon: 'ri-exchange-line' },\n    { id: 'analytics', label: 'Analytics', icon: 'ri-bar-chart-line' },\n    { id: 'financial', label: 'Financial', icon: 'ri-money-dollar-circle-line' },\n    { id: 'monitoring', label: 'Monitoring', icon: 'ri-eye-line' },\n    { id: 'security', label: 'Security', icon: 'ri-shield-check-line' },\n    { id: 'system', label: 'System', icon: 'ri-settings-line' }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header \n        title=\"Admin Panel\"\n        subtitle=\"Complete System Management & Control\"\n      />\n      \n      <div className=\"pt-20 pb-20 px-4\">\n        {/* Tab Navigation */}\n        <div className=\"mb-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            {tabs.map((tab) => (\n              <Button\n                key={tab.id}\n                variant={activeTab === tab.id ? 'primary' : 'secondary'}\n                onClick={async () => {\n                  setActiveTab(tab.id);\n                  if (tab.id === 'pablo-ready') {\n                    fetchPabloReadyBots();\n                  } else if (tab.id === 'latest-trades') {\n                    // Ensure users are loaded before showing dropdown\n                    console.log('ðŸ” Latest Trades tab clicked. Current users count:', users.length);\n                    if (users.length === 0) {\n                      console.log('âš ï¸ Users not loaded yet, loading users first...');\n                      // Load users directly to ensure they're available\n                      try {\n                        const usersData = await getUsers();\n                        console.log('âœ… Users loaded from getUsers():', usersData?.length || 0, 'users');\n                        console.log('ðŸ“‹ Users data:', usersData);\n                        if (usersData && usersData.length > 0) {\n                          setUsers(usersData);\n                          console.log('âœ… Users state updated');\n                        } else {\n                          console.warn('âš ï¸ No users returned from getUsers()');\n                        }\n                      } catch (error) {\n                        console.error('âŒ Failed to load users:', error);\n                      }\n                    } else {\n                      console.log('âœ… Users already loaded:', users.length, 'users');\n                    }\n                    fetchLatestTrades();\n                  }\n                }}\n                className=\"flex items-center gap-2\"\n              >\n                <i className={tab.icon}></i>\n                {tab.label}\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* Overview Tab */}\n        {activeTab === 'overview' && (\n          <div className=\"space-y-6\">\n            {/* Quick Stats */}\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-loader-4-line animate-spin text-4xl text-gray-400\"></i>\n                <p className=\"mt-4 text-gray-500\">Loading overview data...</p>\n              </div>\n            ) : !systemStats ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                <i className=\"ri-dashboard-line text-4xl mb-2\"></i>\n                <p>No system statistics available</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{systemStats?.totalUsers || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Total Users</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-green-600\">{systemStats?.totalBots || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Active Bots</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{systemStats?.totalTrades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Total Trades</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-orange-600\">${systemStats?.platformPnL?.toFixed(2) || '0.00'}</div>\n                    <div className=\"text-sm text-gray-500\">Platform PnL</div>\n                  </Card>\n                </div>\n\n            {/* Quick Actions */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <Button\n                variant=\"primary\"\n                onClick={() => setShowCreateUser(true)}\n                className=\"h-16 flex flex-col items-center justify-center\"\n              >\n                <i className=\"ri-user-add-line text-2xl mb-2\"></i>\n                Create User\n              </Button>\n              <Button\n                variant=\"secondary\"\n                onClick={() => setShowCreateInvitation(true)}\n                className=\"h-16 flex flex-col items-center justify-center\"\n              >\n                <i className=\"ri-mail-send-line text-2xl mb-2\"></i>\n                Send Invitation\n              </Button>\n              <Button\n                variant=\"secondary\"\n                onClick={() => handleExportData('all_trades')}\n                className=\"h-16 flex flex-col items-center justify-center\"\n              >\n                <i className=\"ri-download-line text-2xl mb-2\"></i>\n                Export Data\n              </Button>\n              <Button\n                variant=\"secondary\"\n                onClick={() => setActiveTab('monitoring')}\n                className=\"h-16 flex flex-col items-center justify-center\"\n              >\n                <i className=\"ri-eye-line text-2xl mb-2\"></i>\n                View Logs\n              </Button>\n            </div>\n\n            {/* Recent Activity */}\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">Recent Trading Activity</h3>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : !tradingAnalytics || !tradingAnalytics.trades || tradingAnalytics.trades.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-exchange-line text-4xl mb-2\"></i>\n                  <p>No recent trading activity</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {tradingAnalytics.trades.slice(0, 10).map((trade, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <div className=\"font-medium\">{trade.symbol} - {trade.side}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          {trade.exchange} â€¢ {new Date(trade.created_at).toLocaleString()}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className={`font-medium ${trade.pnl >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                          ${trade.pnl?.toFixed(2) || '0.00'}\n                        </div>\n                        <span className={`px-2 py-1 rounded-full text-xs ${\n                          trade.status === 'filled' ? 'bg-green-100 text-green-800' :\n                          trade.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {trade.status}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Users Tab */}\n        {activeTab === 'users' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold\">User Management</h3>\n                <Button onClick={() => setShowCreateUser(true)}>\n                  <i className=\"ri-user-add-line mr-2\"></i>\n                  Create User\n                </Button>\n              </div>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {users.map((user) => {\n                    const isActionLoading = !!userActionLoading[user.id];\n                    return (\n                    <div key={user.id} className=\"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className=\"font-medium text-gray-900 dark:text-white\">{user.email}</span>\n                        <span className={`px-2 py-1 rounded-full text-xs ${\n                              user.role === 'admin' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' : 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                        }`}>\n                          {user.role}\n                        </span>\n                            <span className={`px-2 py-1 rounded-full text-xs ${\n                              (user.status || 'active') === 'active'\n                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                                : (user.status || 'active') === 'suspended'\n                                  ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                                  : 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\n                            }`}>\n                              {user.status || 'active'}\n                            </span>\n                            <span className={`px-2 py-1 rounded-full text-xs flex items-center gap-1 ${\n                              user.stats?.isActive \n                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' \n                                : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\n                            }`}>\n                              <span className={`w-2 h-2 rounded-full ${\n                                user.stats?.isActive ? 'bg-green-500' : 'bg-gray-400'\n                              }`}></span>\n                              {user.stats?.isActive ? 'Active' : 'Inactive'}\n                            </span>\n                      </div>\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                            Created: {new Date(user.created_at).toLocaleDateString()}\n                            {user.last_sign_in_at && (\n                              <> â€¢ Last active: {new Date(user.last_sign_in_at).toLocaleDateString()}</>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"mt-3 flex flex-wrap gap-3\">\n                        <div>\n                          <label className=\"block text-xs text-gray-500 dark:text-gray-400 mb-1\">Role</label>\n                          <select\n                            value={user.role}\n                            onChange={(e) => handleUserRoleChange(user.id, e.target.value as 'user' | 'admin')}\n                            disabled={isActionLoading}\n                            className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700\"\n                          >\n                            <option value=\"user\">User</option>\n                            <option value=\"admin\">Admin</option>\n                          </select>\n                        </div>\n                        <div>\n                          <label className=\"block text-xs text-gray-500 dark:text-gray-400 mb-1\">Status</label>\n                          <select\n                            value={user.status || 'active'}\n                            onChange={(e) => handleUserStatusChange(user.id, e.target.value as 'active' | 'suspended' | 'disabled')}\n                            disabled={isActionLoading}\n                            className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-900 dark:border-gray-700\"\n                          >\n                            <option value=\"active\">Active</option>\n                            <option value=\"suspended\">Suspended</option>\n                            <option value=\"disabled\">Disabled</option>\n                          </select>\n                        </div>\n                        <div className=\"flex items-end gap-2\">\n                          <Button\n                            variant=\"secondary\"\n                            size=\"sm\"\n                            onClick={() => handleSendPasswordReset(user.id, user.email)}\n                            disabled={isActionLoading}\n                          >\n                            <i className=\"ri-lock-password-line mr-1\"></i>\n                            Reset Password\n                          </Button>\n                          <Button\n                            variant=\"danger\"\n                            size=\"sm\"\n                            onClick={() => handleDeleteUserAccount(user.id, user.email)}\n                            disabled={isActionLoading}\n                          >\n                            <i className=\"ri-delete-bin-line mr-1\"></i>\n                            Delete\n                          </Button>\n                        </div>\n                      </div>\n                      \n                      {/* Trading Stats */}\n                      {user.stats ? (\n                        <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                            <div>\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Total PnL</p>\n                              <p className={`text-sm font-semibold ${\n                                (user.stats.totalPnL + user.stats.paperPnL) >= 0 \n                                  ? 'text-green-600 dark:text-green-400' \n                                  : 'text-red-600 dark:text-red-400'\n                              }`}>\n                                ${((user.stats.totalPnL + user.stats.paperPnL) || 0).toFixed(2)}\n                              </p>\n                              <p className=\"text-xs text-gray-400 dark:text-gray-500\">\n                                Real: ${user.stats.totalPnL.toFixed(2)} â€¢ Paper: ${user.stats.paperPnL.toFixed(2)}\n                              </p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Total Trades</p>\n                              <p className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                {user.stats.totalTrades + user.stats.paperTradesCount}\n                              </p>\n                              <p className=\"text-xs text-gray-400 dark:text-gray-500\">\n                                Real: {user.stats.totalTrades} â€¢ Paper: {user.stats.paperTradesCount}\n                              </p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Active Bots</p>\n                              <p className=\"text-sm font-semibold text-blue-600 dark:text-blue-400\">\n                                {user.stats.activeBots}\n                              </p>\n                              <p className=\"text-xs text-gray-400 dark:text-gray-500\">\n                                Win Rate: {user.stats.avgWinRate.toFixed(1)}%\n                              </p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Trading Volume</p>\n                              <p className=\"text-sm font-semibold text-purple-600 dark:text-purple-400\">\n                                ${(user.stats.totalVolume || 0).toLocaleString(undefined, { maximumFractionDigits: 2 })}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">Loading stats...</p>\n                        </div>\n                      )}\n                    </div>\n                  )})}\n                </div>\n              )}\n            </Card>\n\n            <Card className=\"p-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold\">Invitation Codes</h3>\n                <Button onClick={() => setShowCreateInvitation(true)}>\n                  <i className=\"ri-mail-send-line mr-2\"></i>\n                  Create Invitation\n                </Button>\n              </div>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : invitationCodes.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-mail-line text-4xl mb-2\"></i>\n                  <p>No invitation codes yet</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {invitationCodes.map((code) => (\n                    <div key={code.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex-1\">\n                        <div className=\"font-mono text-sm mb-1\">{code.code}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          <span className=\"font-medium\">Email:</span> {code.email || 'No email specified'}\n                        </div>\n                        <div className=\"text-xs text-gray-400 mt-1\">\n                          Created: {new Date(code.created_at).toLocaleDateString()} â€¢ \n                          Expires: {new Date(code.expires_at).toLocaleDateString()}\n                        </div>\n                      </div>\n                      <span className={`px-2 py-1 rounded-full text-xs ml-4 ${\n                        code.used ? 'bg-gray-100 text-gray-800' : 'bg-green-100 text-green-800'\n                      }`}>\n                        {code.used ? 'Used' : 'Active'}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n          </div>\n        )}\n\n        {/* Trading Bots Tab */}\n        {activeTab === 'bots' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">All Trading Bots</h3>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : allBots.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-robot-line text-4xl mb-2\"></i>\n                  <p>No trading bots found</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {allBots.map((bot) => (\n                    <div key={bot.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <div className=\"font-medium\">{bot.name}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          Owner: {bot.users.email} â€¢ Trades: {bot.total_trades} â€¢ Win Rate: {bot.win_rate?.toFixed(1)}%\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`px-2 py-1 rounded-full text-xs ${\n                          bot.status === 'running' ? 'bg-green-100 text-green-800' :\n                          bot.status === 'paused' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {bot.status}\n                        </span>\n                        <div className=\"flex space-x-1\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"secondary\"\n                            onClick={() => handleBotControl(bot.id, 'running')}\n                            disabled={bot.status === 'running'}\n                            title=\"Start bot\"\n                          >\n                            <i className=\"ri-play-line\"></i>\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"secondary\"\n                            onClick={() => handleBotControl(bot.id, 'paused')}\n                            disabled={bot.status === 'paused'}\n                            title=\"Pause bot\"\n                          >\n                            <i className=\"ri-pause-line\"></i>\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"secondary\"\n                            onClick={() => handleBotControl(bot.id, 'stopped')}\n                            disabled={bot.status === 'stopped'}\n                            title=\"Stop bot\"\n                          >\n                            <i className=\"ri-stop-line\"></i>\n                          </Button>\n                          <div className=\"ml-2 border-l border-gray-300 pl-2 flex space-x-1\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"primary\"\n                              onClick={() => handleTestTrade(bot.id, 'paper')}\n                              disabled={bot.status !== 'running' || testingBotId[bot.id] === 'paper'}\n                              title=\"Test Paper Trade\"\n                              className=\"bg-blue-600 hover:bg-blue-700\"\n                            >\n                              {testingBotId[bot.id] === 'paper' ? (\n                                <>\n                                  <i className=\"ri-loader-4-line animate-spin mr-1\"></i>\n                                  Testing...\n                                </>\n                              ) : (\n                                <>\n                                  <i className=\"ri-file-paper-line mr-1\"></i>\n                                  Paper\n                                </>\n                              )}\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"danger\"\n                              onClick={() => handleTestTrade(bot.id, 'real')}\n                              disabled={bot.status !== 'running' || testingBotId[bot.id] === 'real'}\n                              title=\"Test Real Trade (WARNING: Uses Live Funds!)\"\n                              className=\"bg-red-600 hover:bg-red-700\"\n                            >\n                              {testingBotId[bot.id] === 'real' ? (\n                                <>\n                                  <i className=\"ri-loader-4-line animate-spin mr-1\"></i>\n                                  Testing...\n                                </>\n                              ) : (\n                                <>\n                                  <i className=\"ri-money-dollar-circle-line mr-1\"></i>\n                                  Real\n                                </>\n                              )}\n                          </Button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n          </div>\n        )}\n\n        {/* Pablo Ready Tab */}\n        {activeTab === 'pablo-ready' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Pablo Ready Bots</h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                    Manage pre-configured bots available to all users\n                  </p>\n                </div>\n                <Button\n                  onClick={fetchPabloReadyBots}\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  disabled={pabloReadyLoading}\n                >\n                  <i className=\"ri-refresh-line mr-2\"></i>\n                  Refresh\n                </Button>\n              </div>\n\n              {pabloReadyLoading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                  <p className=\"text-sm text-gray-500 mt-2\">Loading bots...</p>\n                </div>\n              ) : pabloReadyBots.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-robot-line text-4xl mb-2\"></i>\n                  <p>No Pablo Ready bots found</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {pabloReadyBots.map((bot) => (\n                    <Card\n                      key={bot.id}\n                      className={`p-4 border-2 ${\n                        bot.enabled\n                          ? 'border-green-200 bg-green-50/50 dark:border-green-900/40 dark:bg-green-900/10'\n                          : 'border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50'\n                      }`}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-2\">\n                            {editingBotId === bot.id ? (\n                              <div className=\"flex items-center gap-2 flex-1\">\n                                <input\n                                  type=\"text\"\n                                  value={editingBotName}\n                                  onChange={(e) => setEditingBotName(e.target.value)}\n                                  onKeyDown={(e) => {\n                                    if (e.key === 'Enter') {\n                                      saveBotName(bot.id);\n                                    } else if (e.key === 'Escape') {\n                                      cancelEditingBotName();\n                                    }\n                                  }}\n                                  className=\"flex-1 px-3 py-1 border border-blue-500 rounded-lg text-lg font-semibold focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-gray-800 dark:text-white\"\n                                  autoFocus\n                                />\n                                <button\n                                  onClick={() => saveBotName(bot.id)}\n                                  className=\"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm\"\n                                  title=\"Save (Enter)\"\n                                >\n                                  <i className=\"ri-check-line\"></i>\n                                </button>\n                                <button\n                                  onClick={cancelEditingBotName}\n                                  className=\"px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition text-sm\"\n                                  title=\"Cancel (Esc)\"\n                                >\n                                  <i className=\"ri-close-line\"></i>\n                                </button>\n                              </div>\n                            ) : (\n                              <>\n                                <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                                  {bot.name}\n                                </h4>\n                                <button\n                                  onClick={() => startEditingBotName(bot)}\n                                  className=\"p-1 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition\"\n                                  title=\"Edit name\"\n                                >\n                                  <i className=\"ri-edit-line text-sm\"></i>\n                                </button>\n                              </>\n                            )}\n                            {bot.featured && (\n                              <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200\">\n                                <i className=\"ri-star-fill mr-1\"></i>\n                                Featured\n                              </span>\n                            )}\n                            <span\n                              className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${\n                                bot.enabled\n                                  ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200'\n                                  : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\n                              }`}\n                            >\n                              {bot.enabled ? 'Enabled' : 'Disabled'}\n                            </span>\n                          </div>\n                          {bot.description && (\n                            <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">\n                              {bot.description}\n                            </p>\n                          )}\n                          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\n                            <div>\n                              <span className=\"text-gray-500 dark:text-gray-400 block text-xs mb-1\">Exchange</span>\n                              <span className=\"font-medium text-gray-900 dark:text-white capitalize\">\n                                {bot.exchange}\n                              </span>\n                            </div>\n                            <div>\n                              <span className=\"text-gray-500 dark:text-gray-400 block text-xs mb-1\">Symbol</span>\n                              <span className=\"font-medium text-gray-900 dark:text-white\">\n                                {bot.symbol}\n                              </span>\n                            </div>\n                            <div>\n                              <span className=\"text-gray-500 dark:text-gray-400 block text-xs mb-1\">Type</span>\n                              <span className=\"font-medium text-gray-900 dark:text-white capitalize\">\n                                {bot.trading_type}\n                              </span>\n                            </div>\n                            <div>\n                              <span className=\"text-gray-500 dark:text-gray-400 block text-xs mb-1\">Leverage</span>\n                              <span className=\"font-medium text-gray-900 dark:text-white\">\n                                {bot.leverage}x\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"ml-4 flex flex-col gap-2\">\n                          <Button\n                            onClick={() => togglePabloReadyBot(bot.id, bot.enabled)}\n                            variant={bot.enabled ? 'danger' : 'primary'}\n                            size=\"sm\"\n                          >\n                            <i className={`mr-2 ${bot.enabled ? 'ri-eye-off-line' : 'ri-eye-line'}`}></i>\n                            {bot.enabled ? 'Disable' : 'Enable'}\n                          </Button>\n                          <Button\n                            onClick={() => deletePabloReadyBot(bot.id, bot.name)}\n                            variant=\"danger\"\n                            size=\"sm\"\n                            disabled={deletingBotId === bot.id}\n                          >\n                            {deletingBotId === bot.id ? (\n                              <>\n                                <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                                Deleting...\n                              </>\n                            ) : (\n                              <>\n                                <i className=\"ri-delete-bin-line mr-2\"></i>\n                                Delete\n                              </>\n                            )}\n                          </Button>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </Card>\n          </div>\n        )}\n\n        {/* Latest Trades Tab */}\n        {activeTab === 'latest-trades' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Latest Trades</h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                    View the 100 most recent trades {latestTradesUserFilter === 'all' ? 'from all users' : `from ${users.find(u => u.id === latestTradesUserFilter)?.email || 'selected user'}`} across the platform\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <select\n                    value={latestTradesUserFilter}\n                    onChange={(e) => {\n                      console.log('ðŸ“‹ User filter changed:', e.target.value);\n                      setLatestTradesUserFilter(e.target.value);\n                      // Auto-refresh when user filter changes\n                      setTimeout(() => fetchLatestTrades(), 100);\n                    }}\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white min-w-[200px]\"\n                  >\n                    <option value=\"all\">All Users</option>\n                    {users.length === 0 ? (\n                      <option value=\"\" disabled>Loading users...</option>\n                    ) : (\n                      users.map((user) => (\n                        <option key={user.id} value={user.id}>\n                          {user.email || `User ${user.id.substring(0, 8)}...`}\n                        </option>\n                      ))\n                    )}\n                  </select>\n                  <select\n                    value={latestTradesFilter}\n                    onChange={(e) => setLatestTradesFilter(e.target.value as 'all' | 'real' | 'paper')}\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-600 dark:text-white\"\n                  >\n                    <option value=\"all\">All Trades</option>\n                    <option value=\"real\">Real Trades Only</option>\n                    <option value=\"paper\">Paper Trades Only</option>\n                  </select>\n                  <Button\n                    onClick={fetchLatestTrades}\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    disabled={latestTradesLoading}\n                  >\n                    <i className=\"ri-refresh-line mr-2\"></i>\n                    Refresh\n                  </Button>\n                </div>\n              </div>\n\n              {latestTradesLoading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                  <p className=\"text-sm text-gray-500 mt-2\">Loading trades...</p>\n                </div>\n              ) : latestTrades.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-exchange-line text-4xl mb-2\"></i>\n                  <p>No trades found</p>\n                  <p className=\"text-sm mt-1\">Trades will appear here once users start trading</p>\n                </div>\n              ) : (() => {\n                // Filter trades based on selected filter\n                const filteredTrades = latestTrades.filter(trade => {\n                  if (latestTradesFilter === 'all') return true;\n                  if (latestTradesFilter === 'real') return trade.trade_type === 'REAL';\n                  if (latestTradesFilter === 'paper') return trade.trade_type === 'PAPER';\n                  return true;\n                });\n\n                if (filteredTrades.length === 0) {\n                  return (\n                    <div className=\"text-center py-8 text-gray-500\">\n                      <i className=\"ri-exchange-line text-4xl mb-2\"></i>\n                      <p>No {latestTradesFilter === 'real' ? 'real' : latestTradesFilter === 'paper' ? 'paper' : ''} trades found</p>\n                    </div>\n                  );\n                }\n\n                return (\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-sm\">\n                      <thead className=\"bg-gray-100 dark:bg-gray-800\">\n                        <tr>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">Type</th>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">User</th>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">Bot</th>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">Symbol</th>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">Side</th>\n                          <th className=\"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300\">Amount</th>\n                          <th className=\"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300\">Price</th>\n                          <th className=\"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300\">PnL</th>\n                          <th className=\"px-4 py-3 text-right font-semibold text-gray-700 dark:text-gray-300\">Fee</th>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">Status</th>\n                          <th className=\"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-300\">Time</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                        {filteredTrades.map((trade) => (\n                        <tr key={`${trade.trade_type}-${trade.trade_id}`} className=\"hover:bg-gray-50 dark:hover:bg-gray-800/50\">\n                          <td className=\"px-4 py-3\">\n                            <span className={`px-2 py-1 rounded text-xs font-medium ${\n                              trade.trade_type === 'REAL'\n                                ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200'\n                                : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\n                            }`}>\n                              {trade.trade_type}\n                            </span>\n                          </td>\n                          <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">\n                            {trade.user_email}\n                          </td>\n                          <td className=\"px-4 py-3 text-gray-700 dark:text-gray-300\">\n                            {trade.bot_name}\n                          </td>\n                          <td className=\"px-4 py-3 font-medium text-gray-900 dark:text-white\">\n                            {trade.symbol}\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <span className={`px-2 py-1 rounded text-xs font-medium ${\n                              trade.side === 'buy'\n                                ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200'\n                                : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200'\n                            }`}>\n                              {trade.side.toUpperCase()}\n                            </span>\n                          </td>\n                          <td className=\"px-4 py-3 text-right text-gray-700 dark:text-gray-300\">\n                            {typeof trade.amount === 'number' ? trade.amount.toFixed(4) : trade.amount}\n                          </td>\n                          <td className=\"px-4 py-3 text-right text-gray-700 dark:text-gray-300\">\n                            ${typeof trade.price === 'number' ? trade.price.toFixed(2) : trade.price}\n                          </td>\n                          <td className=\"px-4 py-3 text-right\">\n                            <span className={`font-medium ${\n                              trade.pnl >= 0\n                                ? 'text-green-600 dark:text-green-400'\n                                : 'text-red-600 dark:text-red-400'\n                            }`}>\n                              ${typeof trade.pnl === 'number' ? trade.pnl.toFixed(2) : '0.00'}\n                            </span>\n                          </td>\n                          <td className=\"px-4 py-3 text-right text-gray-700 dark:text-gray-300\">\n                            ${typeof trade.fee === 'number' ? trade.fee.toFixed(2) : '0.00'}\n                          </td>\n                          <td className=\"px-4 py-3\">\n                            <span className={`px-2 py-1 rounded text-xs font-medium ${\n                              trade.status === 'filled' || trade.status === 'completed'\n                                ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200'\n                                : trade.status === 'pending'\n                                  ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200'\n                                  : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200'\n                            }`}>\n                              {trade.status}\n                            </span>\n                          </td>\n                          <td className=\"px-4 py-3 text-gray-500 dark:text-gray-400 text-xs\">\n                            {trade.minutes_ago !== null ? (\n                              trade.minutes_ago < 60\n                                ? `${trade.minutes_ago}m ago`\n                                : trade.minutes_ago < 1440\n                                  ? `${Math.floor(trade.minutes_ago / 60)}h ago`\n                                  : `${Math.floor(trade.minutes_ago / 1440)}d ago`\n                            ) : trade.executed_at ? (\n                              new Date(trade.executed_at).toLocaleString()\n                            ) : (\n                              'N/A'\n                            )}\n                          </td>\n                        </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                );\n              })()}\n            </Card>\n          </div>\n        )}\n\n        {activeTab === 'analytics' && (\n          <div className=\"space-y-6\">\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-loader-4-line animate-spin text-4xl text-gray-400\"></i>\n                <p className=\"mt-4 text-gray-500\">Loading analytics data...</p>\n              </div>\n            ) : !tradingAnalytics ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                <i className=\"ri-bar-chart-line text-4xl mb-2\"></i>\n                <p>No trading analytics available</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{tradingAnalytics?.totalTrades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Total Trades</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-green-600\">{tradingAnalytics?.filledTrades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Successful</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-red-600\">{tradingAnalytics?.failedTrades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Failed</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{tradingAnalytics?.successRate?.toFixed(1) || '0.0'}%</div>\n                    <div className=\"text-sm text-gray-500\">Success Rate</div>\n                  </Card>\n                </div>\n\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">Exchange Statistics</h3>\n              {!tradingAnalytics || Object.keys(tradingAnalytics?.exchangeStats || {}).length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-bar-chart-line text-4xl mb-2\"></i>\n                  <p>No exchange statistics available</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {Object.entries(tradingAnalytics?.exchangeStats || {}).map(([exchange, stats]) => (\n                    <div key={exchange} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <div className=\"font-medium\">{exchange}</div>\n                        <div className=\"text-sm text-gray-500\">{stats.count} trades</div>\n                      </div>\n                      <div className={`font-medium ${stats.pnl >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                        ${stats.pnl.toFixed(2)}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Financial Tab */}\n        {activeTab === 'financial' && (\n          <div className=\"space-y-6\">\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-loader-4-line animate-spin text-4xl text-gray-400\"></i>\n                <p className=\"mt-4 text-gray-500\">Loading financial data...</p>\n              </div>\n            ) : !financialOverview ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                <i className=\"ri-money-dollar-circle-line text-4xl mb-2\"></i>\n                <p>No financial data available</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-blue-600\">${financialOverview?.totalVolume?.toFixed(2) || '0.00'}</div>\n                    <div className=\"text-sm text-gray-500\">Total Volume</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-green-600\">${financialOverview?.totalPnL?.toFixed(2) || '0.00'}</div>\n                    <div className=\"text-sm text-gray-500\">Total PnL</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-red-600\">${financialOverview?.totalFees?.toFixed(2) || '0.00'}</div>\n                    <div className=\"text-sm text-gray-500\">Total Fees</div>\n                  </Card>\n                  <Card className=\"text-center p-4\">\n                    <div className=\"text-2xl font-bold text-purple-600\">${financialOverview?.netProfit?.toFixed(2) || '0.00'}</div>\n                    <div className=\"text-sm text-gray-500\">Net Profit</div>\n                  </Card>\n                </div>\n                {financialOverview.dailyPnL && Object.keys(financialOverview.dailyPnL).length > 0 && (\n                  <Card className=\"p-4\">\n                    <h3 className=\"text-lg font-semibold mb-4\">Daily PnL (Last 30 Days)</h3>\n                    <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                      {Object.entries(financialOverview.dailyPnL).slice(-30).reverse().map(([date, pnl]) => (\n                        <div key={date} className=\"flex items-center justify-between p-2 bg-gray-50 rounded-lg\">\n                          <span className=\"text-sm text-gray-600\">{new Date(date).toLocaleDateString()}</span>\n                          <span className={`font-medium ${pnl >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                            ${pnl.toFixed(2)}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </Card>\n                )}\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Monitoring Tab */}\n        {activeTab === 'monitoring' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">System Logs</h3>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : !systemLogs || systemLogs.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-file-list-line text-4xl mb-2\"></i>\n                  <p>No system logs available</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {systemLogs.map((log, index) => (\n                    <div key={index} className=\"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg\">\n                      <div className={`w-2 h-2 rounded-full mt-2 ${\n                        log.level === 'error' ? 'bg-red-500' :\n                        log.level === 'warning' ? 'bg-yellow-500' :\n                        log.level === 'success' ? 'bg-green-500' :\n                        'bg-blue-500'\n                      }`}></div>\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium\">{log.message || log.event_message || 'No message'}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          {log.category || log.event_type || 'System'} â€¢ {log.created_at ? new Date(log.created_at).toLocaleString() : 'Unknown date'}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">User Activity</h3>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : !userActivity || userActivity.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-user-line text-4xl mb-2\"></i>\n                  <p>No user activity data available</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {userActivity.slice(0, 20).map((activity) => (\n                    <div key={activity.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <div className=\"font-medium\">{activity.email}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          Bots: {activity.trading_bots?.length || 0} â€¢ \n                          Trades: {activity.trades?.length || 0} â€¢ \n                          Last Active: {activity.last_sign_in_at ? new Date(activity.last_sign_in_at).toLocaleDateString() : 'Never'}\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-gray-400\">\n                        {new Date(activity.created_at).toLocaleDateString()}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n          </div>\n        )}\n\n        {/* Security Tab */}\n        {activeTab === 'security' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">Risk Monitoring</h3>\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\n                </div>\n              ) : !riskMetrics ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-shield-check-line text-4xl mb-2\"></i>\n                  <p>No risk metrics available</p>\n                </div>\n              ) : (\n                <>\n                  <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                    <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"text-2xl font-bold text-red-600\">{riskMetrics?.riskScore || 0}</div>\n                      <div className=\"text-sm text-gray-500\">Risk Score</div>\n                    </div>\n                    <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                      <div className=\"text-2xl font-bold text-orange-600\">{riskMetrics?.largeTrades?.length || 0}</div>\n                      <div className=\"text-sm text-gray-500\">Large Trades</div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-3\">\n                    <h4 className=\"font-medium\">Large Trades (â‰¥ $1000)</h4>\n                    {!riskMetrics.largeTrades || riskMetrics.largeTrades.length === 0 ? (\n                      <div className=\"text-center py-4 text-gray-400 text-sm\">No large trades found</div>\n                    ) : (\n                      <div className=\"space-y-2\">\n                        {riskMetrics.largeTrades.slice(0, 10).map((trade, index) => (\n                          <div key={index} className=\"flex items-center justify-between p-3 bg-yellow-50 rounded-lg\">\n                            <div>\n                              <div className=\"font-medium\">{trade.symbol} - {trade.side}</div>\n                              <div className=\"text-sm text-gray-500\">\n                                {trade.exchange} â€¢ Amount: ${trade.amount?.toFixed(2) || '0.00'} â€¢ {trade.created_at ? new Date(trade.created_at).toLocaleString() : 'Unknown date'}\n                              </div>\n                            </div>\n                            <span className=\"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800\">\n                              Large\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"space-y-3 mt-4\">\n                    <h4 className=\"font-medium\">Recent Failed Trades</h4>\n                    {!riskMetrics.failedTrades || riskMetrics.failedTrades.length === 0 ? (\n                      <div className=\"text-center py-4 text-gray-400 text-sm\">No failed trades in the last 24 hours</div>\n                    ) : (\n                      <div className=\"space-y-2\">\n                        {riskMetrics.failedTrades.slice(0, 10).map((trade, index) => (\n                          <div key={index} className=\"flex items-center justify-between p-3 bg-red-50 rounded-lg\">\n                            <div>\n                              <div className=\"font-medium\">{trade.symbol} - {trade.side}</div>\n                              <div className=\"text-sm text-gray-500\">\n                                {trade.exchange} â€¢ {trade.created_at ? new Date(trade.created_at).toLocaleString() : 'Unknown date'}\n                              </div>\n                            </div>\n                            <span className=\"px-2 py-1 rounded-full text-xs bg-red-100 text-red-800\">\n                              Failed\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </>\n              )}\n            </Card>\n          </div>\n        )}\n\n        {/* System Tab */}\n        {activeTab === 'system' && (\n          <div className=\"space-y-6\">\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">Data Export</h3>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                <Button\n                  variant=\"secondary\"\n                  onClick={() => handleExportData('all_trades')}\n                  className=\"h-16 flex flex-col items-center justify-center\"\n                >\n                  <i className=\"ri-download-line text-2xl mb-2\"></i>\n                  Export All Trades\n                </Button>\n                <Button\n                  variant=\"secondary\"\n                  onClick={() => handleExportData('users')}\n                  className=\"h-16 flex flex-col items-center justify-center\"\n                >\n                  <i className=\"ri-user-line text-2xl mb-2\"></i>\n                  Export Users\n                </Button>\n                <Button\n                  variant=\"secondary\"\n                  onClick={() => handleExportData('all_trades')}\n                  className=\"h-16 flex flex-col items-center justify-center\"\n                >\n                  <i className=\"ri-database-line text-2xl mb-2\"></i>\n                  Export System Data\n                </Button>\n              </div>\n            </Card>\n\n            <Card className=\"p-4\">\n              <h3 className=\"text-lg font-semibold mb-4\">System Information</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Database Status:</span>\n                  <span className=\"text-green-600 font-medium\">Connected</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">API Status:</span>\n                  <span className=\"text-green-600 font-medium\">Operational</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Last Backup:</span>\n                  <span className=\"text-gray-800\">{new Date().toLocaleDateString()}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">System Uptime:</span>\n                  <span className=\"text-gray-800\">99.9%</span>\n                </div>\n              </div>\n            </Card>\n          </div>\n        )}\n\n        {/* Create User Modal */}\n        {showCreateUser && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <Card className=\"w-full max-w-md p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Create New User</h3>\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-sm text-red-600\">{error}</p>\n                </div>\n              )}\n              {successMessage && (\n                <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg\">\n                  <p className=\"text-sm text-green-600\">{successMessage}</p>\n                </div>\n              )}\n              <form onSubmit={handleCreateUser} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={newUser.email}\n                    onChange={(e) => setNewUser({...newUser, email: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n                  <input\n                    type=\"password\"\n                    value={newUser.password}\n                    onChange={(e) => setNewUser({...newUser, password: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                    minLength={6}\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Role</label>\n                  <select\n                    value={newUser.role}\n                    onChange={(e) => setNewUser({...newUser, role: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"user\">User</option>\n                    <option value=\"admin\">Admin</option>\n                  </select>\n                </div>\n                <div className=\"flex space-x-3\">\n                  <Button\n                    type=\"button\"\n                    variant=\"secondary\"\n                    onClick={() => {\n                      setShowCreateUser(false);\n                      setError(null);\n                      setSuccessMessage(null);\n                    }}\n                    className=\"flex-1\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button type=\"submit\" variant=\"primary\" className=\"flex-1\">\n                    Create User\n                  </Button>\n                </div>\n              </form>\n            </Card>\n          </div>\n        )}\n\n        {/* Create Invitation Modal */}\n        {showCreateInvitation && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <Card className=\"w-full max-w-md p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Create Invitation Code</h3>\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-sm text-red-600\">{error}</p>\n                </div>\n              )}\n              {successMessage && (\n                <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg\">\n                  <p className=\"text-sm text-green-600\">{successMessage}</p>\n                </div>\n              )}\n              <form onSubmit={handleCreateInvitation} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={newInvitation.email}\n                    onChange={(e) => setNewInvitation({...newInvitation, email: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Expires in (days)</label>\n                  <select\n                    value={newInvitation.expiresInDays}\n                    onChange={(e) => setNewInvitation({...newInvitation, expiresInDays: parseInt(e.target.value)})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value={1}>1 day</option>\n                    <option value={3}>3 days</option>\n                    <option value={7}>7 days</option>\n                    <option value={14}>14 days</option>\n                    <option value={30}>30 days</option>\n                  </select>\n                </div>\n                <div className=\"flex space-x-3\">\n                  <Button\n                    type=\"button\"\n                    variant=\"secondary\"\n                    onClick={() => {\n                      setShowCreateInvitation(false);\n                      setError(null);\n                      setSuccessMessage(null);\n                    }}\n                    className=\"flex-1\"\n                  >\n                    Cancel\n                  </Button>\n                  <Button type=\"submit\" variant=\"primary\" className=\"flex-1\">\n                    Create Invitation\n                  </Button>\n                </div>\n              </form>\n            </Card>\n          </div>\n        )}\n      </div>\n\n      <Navigation />\n    </div>\n  );\n}\n"],"names":["useAdmin","loading","setLoading","useState","error","setError","callAdminFunction","action","params","data","invokeError","supabase","errorMessage","err","email","password","role","userId","status","expiresInDays","botId","period","limit","type","AdminPage","navigate","useNavigate","user","authLoading","useAuth","createUser","generateInvitationCode","getUsers","getInvitationCodes","getAllBots","adminControlBot","getBotAnalytics","getSystemStats","getTradingAnalytics","getFinancialOverview","getUserActivity","getSystemLogs","getLatestTrades","getRiskMetrics","exportData","deleteUser","updateUserRole","updateUserStatus","sendPasswordResetLink","activeTab","setActiveTab","users","setUsers","invitationCodes","setInvitationCodes","allBots","setAllBots","pabloReadyBots","setPabloReadyBots","pabloReadyLoading","setPabloReadyLoading","editingBotId","setEditingBotId","editingBotName","setEditingBotName","deletingBotId","setDeletingBotId","testingBotId","setTestingBotId","systemStats","setSystemStats","tradingAnalytics","setTradingAnalytics","financialOverview","setFinancialOverview","userActivity","setUserActivity","systemLogs","setSystemLogs","riskMetrics","setRiskMetrics","latestTrades","setLatestTrades","latestTradesLoading","setLatestTradesLoading","latestTradesFilter","setLatestTradesFilter","latestTradesUserFilter","setLatestTradesUserFilter","showCreateUser","setShowCreateUser","showCreateInvitation","setShowCreateInvitation","successMessage","setSuccessMessage","userActionLoading","setUserActionLoading","newUser","setNewUser","newInvitation","setNewInvitation","useEffect","loadData","usersData","fetchPabloReadyBots","togglePabloReadyBot","enabled","startEditingBotName","bot","cancelEditingBotName","saveBotName","deletePabloReadyBot","botName","fetchLatestTrades","trades","codesData","botsData","statsData","analyticsData","financialData","activityData","logsData","riskData","_a","handleCreateUser","e","result","handleCreateInvitation","setUserLoadingState","value","prev","handleUserRoleChange","handleUserStatusChange","handleDeleteUserAccount","handleSendPasswordReset","resetLink","handleBotControl","handleTestTrade","mode","confirmMessage","b","_b","botData","botError","signalData","signalError","supabaseUrl","session","requestUrl","requestBody","triggerResponse","triggerText","fetchError","handleExportData","blob","url","a","jsxs","jsx","tabs","Header","tab","Button","Fragment","Card","trade","index","isActionLoading","code","u","filteredTrades","_c","exchange","stats","_d","_e","_f","_g","date","pnl","log","activity","_h","Navigation"],"mappings":"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"}