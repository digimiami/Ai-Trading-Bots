import{r as c,A as j,a as f,j as e}from"./index-C82VpSt2.js";import{H as b}from"./Header-DxbA-G9Q.js";import{N as v}from"./Navigation-k2cL_U1O.js";import{C as n}from"./Card-s7m3yLX9.js";import{u as S}from"./useBots-CKITQ1XU.js";function T(a){const[m,d]=c.useState([]),[g,x]=c.useState(!0),[h,o]=c.useState(null),r=async()=>{try{x(!0);const t=a?`${j.TRADING_ENGINE}/trades?botId=${a}`:`${j.TRADING_ENGINE}/trades`,i=await f(t);d(i.trades||[]),o(null)}catch(t){o(t instanceof Error?t.message:"Failed to fetch trades")}finally{x(!1)}},u=async(t,i)=>{try{const l=await f(`${j.TRADING_ENGINE}/close-trade`,{method:"POST",body:JSON.stringify({tradeId:t,exitPrice:i})});return await r(),l.trade}catch(l){throw new Error(l instanceof Error?l.message:"Failed to close trade")}};return c.useEffect(()=>{r();const t=setInterval(r,3e4);return()=>clearInterval(t)},[a]),{trades:m,loading:g,error:h,fetchTrades:r,closeTrade:u}}function D(){const[a,m]=c.useState("all"),[d,g]=c.useState("all"),{trades:x,loading:h}=T(),{bots:o}=S(),r=x.filter(s=>!(a!=="all"&&s.status!==a||d!=="all"&&s.botId!==d)),u=s=>{switch(s){case"open":return"text-blue-600 bg-blue-50";case"closed":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},t=s=>s==="long"?"text-green-600":"text-red-600",i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:4}).format(s),l=s=>{if(!s)return"-";const p=s>=0?"text-green-600":"text-red-600",N=s>=0?"+":"";return e.jsxs("span",{className:p,children:[N,i(s)]})},y=s=>o.find(N=>N.id===s)?.name||"Unknown Bot";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(b,{title:"Trades",subtitle:"Monitor your trading activity"}),e.jsxs("div",{className:"pt-20 pb-20 px-4 space-y-4",children:[e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("div",{className:"flex space-x-2",children:["all","open","closed"].map(s=>e.jsx("button",{onClick:()=>m(s),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${a===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bot"}),e.jsxs("select",{value:d,onChange:s=>g(s.target.value),className:"w-full bg-gray-100 border-none rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Bots"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Trades"})]})}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(s=>s.status==="open").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Trades"})]})})]}),e.jsx("div",{className:"space-y-3",children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading trades..."})]}):r.length===0?e.jsxs(n,{className:"p-8 text-center",children:[e.jsx("i",{className:"ri-file-list-line text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Trades Found"}),e.jsx("p",{className:"text-gray-500",children:"No trades match your current filters."})]}):r.map(s=>e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(s.status)}`,children:s.status.toUpperCase()}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.timestamp).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.symbol}),e.jsx("div",{className:"text-xs text-gray-500 capitalize",children:s.exchange})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Bot"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y(s.botId)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Side"}),e.jsx("div",{className:`text-sm font-medium ${t(s.side)}`,children:s.side.toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Size"}),e.jsx("div",{className:"font-medium",children:s.size})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Entry Price"}),e.jsx("div",{className:"font-medium",children:i(s.entryPrice)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:s.status==="open"?"Current P&L":"P&L"}),e.jsx("div",{className:"font-medium",children:l(s.pnl)})]})]}),s.exitPrice&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Exit Price:"}),e.jsx("span",{className:"font-medium",children:i(s.exitPrice)})]})})]},s.id))}),e.jsxs(n,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Trades"]}),e.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Refresh Data"]})]})]})]}),e.jsx(v,{})]})}export{D as default};
//# sourceMappingURL=page-C36_DXlA.js.map
