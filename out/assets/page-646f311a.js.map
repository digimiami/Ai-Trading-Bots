{"version":3,"file":"page-646f311a.js","sources":["../../src/hooks/useBotTradeLimits.ts","../../src/pages/bots/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { supabase } from '../lib/supabase';\r\n\r\nexport interface BotTradeLimit {\r\n  botId: string;\r\n  tradesToday: number;\r\n  maxTradesPerDay: number;\r\n  isLimitReached: boolean;\r\n  remainingTrades: number;\r\n}\r\n\r\nexport const useBotTradeLimits = (botIds: string[]) => {\r\n  const [limits, setLimits] = useState<Map<string, BotTradeLimit>>(new Map());\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchTradeLimits = async () => {\r\n    if (botIds.length === 0) {\r\n      setLimits(new Map());\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // Get today's start time in UTC\r\n      const now = new Date();\r\n      const todayStart = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 0, 0, 0, 0));\r\n      const todayEnd = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 23, 59, 59, 999));\r\n\r\n      // Fetch bot configurations with max_trades_per_day from strategyConfig\r\n      const { data: botsData, error: botsError } = await supabase\r\n        .from('trading_bots')\r\n        .select('id, strategy_config')\r\n        .in('id', botIds);\r\n\r\n      if (botsError) throw botsError;\r\n\r\n      // Fetch today's trade counts\r\n      const { data: tradesData, error: tradesError } = await supabase\r\n        .from('trades')\r\n        .select('bot_id, id')\r\n        .in('bot_id', botIds)\r\n        .gte('executed_at', todayStart.toISOString())\r\n        .lte('executed_at', todayEnd.toISOString())\r\n        .in('status', ['filled', 'completed', 'closed']); // Only count executed trades\r\n\r\n      if (tradesError) throw tradesError;\r\n\r\n      // Count trades per bot\r\n      const tradesByBot = new Map<string, number>();\r\n      if (tradesData) {\r\n        tradesData.forEach(trade => {\r\n          const count = tradesByBot.get(trade.bot_id) || 0;\r\n          tradesByBot.set(trade.bot_id, count + 1);\r\n        });\r\n      }\r\n\r\n      // Build limits map\r\n      const limitsMap = new Map<string, BotTradeLimit>();\r\n      \r\n      if (botsData) {\r\n        botsData.forEach(bot => {\r\n          // Extract max_trades_per_day from strategyConfig\r\n          let maxTradesPerDay = 8; // Default\r\n          try {\r\n            const strategyConfig = typeof bot.strategy_config === 'string' \r\n              ? JSON.parse(bot.strategy_config) \r\n              : bot.strategy_config;\r\n            \r\n            if (strategyConfig && typeof strategyConfig.max_trades_per_day === 'number') {\r\n              maxTradesPerDay = strategyConfig.max_trades_per_day;\r\n            }\r\n          } catch (e) {\r\n            console.warn('Failed to parse strategy_config for bot:', bot.id);\r\n          }\r\n\r\n          const tradesToday = tradesByBot.get(bot.id) || 0;\r\n          const remainingTrades = Math.max(0, maxTradesPerDay - tradesToday);\r\n          const isLimitReached = tradesToday >= maxTradesPerDay;\r\n\r\n          limitsMap.set(bot.id, {\r\n            botId: bot.id,\r\n            tradesToday,\r\n            maxTradesPerDay,\r\n            isLimitReached,\r\n            remainingTrades\r\n          });\r\n        });\r\n      }\r\n\r\n      setLimits(limitsMap);\r\n    } catch (err) {\r\n      console.error('Error fetching trade limits:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch trade limits');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTradeLimits();\r\n    \r\n    // Refresh every 30 seconds\r\n    const interval = setInterval(fetchTradeLimits, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [botIds.join(',')]); // Re-fetch when bot IDs change\r\n\r\n  return {\r\n    limits,\r\n    getLimit: (botId: string) => limits.get(botId),\r\n    loading,\r\n    error,\r\n    refresh: fetchTradeLimits\r\n  };\r\n};\r\n\r\n","\n// @ts-nocheck\nimport { useEffect, useState } from 'react';\nimport { Header } from '../../components/feature/Header';\nimport Navigation from '../../components/feature/Navigation';\nimport Button from '../../components/base/Button';\nimport Card from '../../components/base/Card';\nimport { ManualTradeSignal, TradingBot } from '../../types/trading';\nimport { useNavigate } from 'react-router-dom';\nimport { useBots } from '../../hooks/useBots';\nimport { useBotActivity } from '../../hooks/useBotActivity';\nimport { useBotExecutor } from '../../hooks/useBotExecutor';\nimport { useBotTradeLimits } from '../../hooks/useBotTradeLimits';\nimport { supabase } from '../../lib/supabase';\n\nexport default function BotsPage() {\n  const navigate = useNavigate();\n  const { bots, loading, startBot, stopBot, pauseBot, updateBot, deleteBot, createBot } = useBots();\n  const { activities, addLog } = useBotActivity(bots);\n  const { isExecuting, lastExecution, timeSync, executeBot, executeAllBots } = useBotExecutor();\n  const [filter, setFilter] = useState<'all' | 'running' | 'paused' | 'stopped' | 'live'>('all');\n  const [viewMode, setViewMode] = useState<'overview' | 'webhook'>('overview');\n  const [bulkLoading, setBulkLoading] = useState(false);\n  const [expandedBot, setExpandedBot] = useState<string | null>(null);\n  const [togglingAiMl, setTogglingAiMl] = useState<string | null>(null);\n  const [editingLimitBotId, setEditingLimitBotId] = useState<string | null>(null);\n  const [editingLimitValue, setEditingLimitValue] = useState<number | null>(null);\n  const [editingTradeAmountBotId, setEditingTradeAmountBotId] = useState<string | null>(null);\n  const [editingTradeAmountValue, setEditingTradeAmountValue] = useState<number | null>(null);\n  const [webhookExpandedBot, setWebhookExpandedBot] = useState<string | null>(null);\n  const [webhookSignals, setWebhookSignals] = useState<Record<string, ManualTradeSignal[]>>({});\n  const [webhookSignalsLoading, setWebhookSignalsLoading] = useState<Record<string, boolean>>({});\n  const [webhookSecretVisible, setWebhookSecretVisible] = useState<Record<string, boolean>>({});\n  const [webhookActionLoading, setWebhookActionLoading] = useState<Record<string, boolean>>({});\n  const isWebhookView = viewMode === 'webhook';\n  \n  // Get trade limits for all bots\n  const botIds = bots.map(b => b.id);\n  const { limits, getLimit, refresh: refreshLimits } = useBotTradeLimits(botIds);\n\n  const webhookEndpoint = `${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/tradingview-webhook`;\n\n  const generateWebhookSecret = () => {\n    try {\n      const array = new Uint8Array(18);\n      if (window?.crypto?.getRandomValues) {\n        window.crypto.getRandomValues(array);\n        return Array.from(array, (byte) => byte.toString(16).padStart(2, '0')).join('');\n      }\n    } catch (error) {\n      console.warn('Falling back to Math.random for webhook secret generation:', error);\n    }\n    return Math.random().toString(36).slice(2, 12) + Math.random().toString(36).slice(2, 12);\n  };\n\n  const handleCopy = async (value: string, description: string) => {\n    if (!value) {\n      alert('Nothing to copy yet.');\n      return;\n    }\n    try {\n      await navigator.clipboard.writeText(value);\n      alert(`‚úÖ ${description} copied to clipboard`);\n    } catch (error) {\n      console.error('Failed to copy value:', error);\n      alert('Unable to copy to clipboard. Please copy manually.');\n    }\n  };\n\n  const loadWebhookSignals = async (botId: string) => {\n    setWebhookSignalsLoading(prev => ({ ...prev, [botId]: true }));\n    try {\n      const { data, error } = await supabase\n        .from('manual_trade_signals')\n        .select('*')\n        .eq('bot_id', botId)\n        .order('created_at', { ascending: false })\n        .limit(20);\n      if (error) throw error;\n      setWebhookSignals(prev => ({ ...prev, [botId]: data || [] }));\n    } catch (error: any) {\n      console.error('Failed to load webhook signals:', error);\n      alert(`Failed to load webhook signals: ${error?.message || 'Unknown error'}`);\n    } finally {\n      setWebhookSignalsLoading(prev => ({ ...prev, [botId]: false }));\n    }\n  };\n\n  const handleToggleWebhookPanel = async (botId: string) => {\n    if (isWebhookView) {\n      return;\n    }\n    const isOpen = webhookExpandedBot === botId;\n    const nextState = isOpen ? null : botId;\n    setWebhookExpandedBot(nextState);\n    if (!isOpen) {\n      await loadWebhookSignals(botId);\n    }\n  };\n\n  const handleRegenerateWebhookSecret = async (bot: TradingBot) => {\n    if (!confirm('Regenerate webhook secret? All existing TradingView alerts must be updated to use the new value.')) {\n      return;\n    }\n    const newSecret = generateWebhookSecret();\n    setWebhookActionLoading(prev => ({ ...prev, [bot.id]: true }));\n    try {\n      await updateBot(bot.id, { webhookSecret: newSecret });\n      setWebhookSecretVisible(prev => ({ ...prev, [bot.id]: true }));\n      alert('‚úÖ Webhook secret regenerated. Update your TradingView alert settings.');\n    } catch (error: any) {\n      console.error('Failed to regenerate webhook secret:', error);\n      alert(`Failed to regenerate webhook secret: ${error?.message || 'Unknown error'}`);\n    } finally {\n      setWebhookActionLoading(prev => ({ ...prev, [bot.id]: false }));\n    }\n  };\n\n  const handleToggleWebhookImmediate = async (bot: TradingBot) => {\n    const nextValue = !(bot.webhookTriggerImmediate ?? true);\n    setWebhookActionLoading(prev => ({ ...prev, [bot.id]: true }));\n    try {\n      await updateBot(bot.id, { webhookTriggerImmediate: nextValue });\n      alert(`‚úÖ Immediate execution ${nextValue ? 'enabled' : 'disabled'} for TradingView webhook signals.`);\n    } catch (error: any) {\n      console.error('Failed to update webhook execution preference:', error);\n      alert(`Failed to update webhook execution preference: ${error?.message || 'Unknown error'}`);\n    } finally {\n      setWebhookActionLoading(prev => ({ ...prev, [bot.id]: false }));\n    }\n  };\n\n  useEffect(() => {\n    if (!isWebhookView) {\n      return;\n    }\n    bots.forEach((bot) => {\n      if (!webhookSignals[bot.id] && !webhookSignalsLoading[bot.id]) {\n        loadWebhookSignals(bot.id);\n      }\n    });\n  }, [isWebhookView, bots, webhookSignals, webhookSignalsLoading]);\n\n  /**\n   * Builds the comprehensive TradingView webhook payload format for a bot.\n   * This format includes all TradingView strategy variables that will be automatically\n   * replaced by TradingView when the alert fires.\n   * \n   * Note: When testing webhooks manually, replace template variables with actual values\n   * (e.g., use 'buy' instead of '{{strategy.order.action}}').\n   */\n  const buildSamplePayload = (bot: TradingBot): string => {\n    return JSON.stringify({\n      secret: bot.webhookSecret || bot.webhook_secret || 'YOUR_TRADINGVIEW_WEBHOOK_SECRET',\n      botId: bot.id,\n      action: '{{strategy.order.action}}', // TradingView will replace with: 'buy', 'sell', 'long', 'short'\n      marketPosition: '{{strategy.market_position}}', // Current market position: 'long', 'short', 'flat'\n      prevMarketPosition: '{{strategy.prev_market_position}}', // Previous market position\n      marketPositionSize: '{{strategy.market_position_size}}', // Current position size\n      prevMarketPositionSize: '{{strategy.prev_market_position_size}}', // Previous position size\n      instrument: '{{ticker}}', // Trading pair symbol (e.g., BTCUSDT)\n      timestamp: '{{timenow}}', // Alert timestamp\n      maxLag: '300', // Maximum lag in seconds\n      investmentType: 'base', // Investment type: 'base' or 'quote'\n      amount: '{{strategy.order.contracts}}', // Number of contracts/size\n      mode: bot.paperTrading ? 'paper' : 'real', // Trading mode\n      reason: 'TradingView alert signal'\n    }, null, 2);\n  };\n\n  const formatDateTime = (timestamp?: string | null) => {\n    if (!timestamp) return '‚Äî';\n    try {\n      return new Date(timestamp).toLocaleString();\n    } catch {\n      return timestamp;\n    }\n  };\n\n  const getSignalStatusBadgeClasses = (status: string) => {\n    switch ((status || '').toLowerCase()) {\n      case 'completed':\n        return 'bg-green-100 text-green-700';\n      case 'processing':\n        return 'bg-blue-100 text-blue-700';\n      case 'failed':\n        return 'bg-red-100 text-red-700';\n      default:\n        return 'bg-gray-100 text-gray-700';\n    }\n  };\n\n  const filteredBots = bots.filter(bot => {\n    if (filter === 'all') return true;\n    if (filter === 'live') return !bot.paperTrading;\n    return bot.status === filter;\n  });\n\n  const resetPaperTradingPerformance = async () => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        console.warn('‚ö†Ô∏è No session available when attempting to reset paper trading performance.');\n        return;\n      }\n\n      const functionUrl = `${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/paper-trading`;\n      const response = await fetch(functionUrl, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ action: 'reset_performance' })\n      });\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => null);\n        throw new Error(error?.error || `Failed to reset paper trading performance (status ${response.status})`);\n      }\n\n      console.log('‚úÖ Paper trading performance reset successfully via Reset All');\n    } catch (error) {\n      console.error('Failed to reset paper trading performance:', error);\n    }\n  };\n\n  const getBotActivity = (botId: string) => {\n    return activities.find(activity => activity.botId === botId);\n  };\n\n  const getLogLevelColor = (level: string) => {\n    switch (level) {\n      case 'info': return 'text-blue-600 bg-blue-50';\n      case 'warning': return 'text-yellow-600 bg-yellow-50';\n      case 'error': return 'text-red-600 bg-red-50';\n      case 'success': return 'text-green-600 bg-green-50';\n      default: return 'text-gray-600 bg-gray-50';\n    }\n  };\n\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'market': return 'ri-line-chart-line';\n      case 'trade': return 'ri-exchange-line';\n      case 'strategy': return 'ri-brain-line';\n      case 'system': return 'ri-settings-line';\n      case 'error': return 'ri-error-warning-line';\n      default: return 'ri-information-line';\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString();\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running': return 'bg-green-100 text-green-800';\n      case 'paused': return 'bg-yellow-100 text-yellow-800';\n      case 'stopped': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getRiskColor = (risk: string) => {\n    switch (risk) {\n      case 'low': return 'text-green-600';\n      case 'medium': return 'text-yellow-600';\n      case 'high': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const handleBotAction = async (botId: string, action: 'start' | 'pause' | 'stop') => {\n    try {\n      console.log(`üîÑ Attempting to ${action} bot ${botId} from origin: ${window.location.origin}`);\n      \n      if (action === 'start') {\n        await startBot(botId);\n        try {\n          await addLog(botId, {\n            level: 'success',\n            category: 'system',\n            message: 'Bot started successfully',\n            details: { action: 'start', timestamp: new Date().toISOString() }\n          });\n        } catch (logError) {\n          console.warn('‚ö†Ô∏è Failed to record start log:', logError);\n        }\n        alert(`‚úÖ Bot started successfully!`);\n      } else if (action === 'stop') {\n        await stopBot(botId);\n        try {\n          await addLog(botId, {\n            level: 'info',\n            category: 'system',\n            message: 'Bot stopped by user',\n            details: { action: 'stop', timestamp: new Date().toISOString() }\n          });\n        } catch (logError) {\n          console.warn('‚ö†Ô∏è Failed to record stop log:', logError);\n        }\n        alert(`‚úÖ Bot stopped successfully!`);\n      } else if (action === 'pause') {\n        await pauseBot(botId);\n        try {\n          await addLog(botId, {\n            level: 'warning',\n            category: 'system',\n            message: 'Bot paused by user',\n            details: { action: 'pause', timestamp: new Date().toISOString() }\n          });\n        } catch (logError) {\n          console.warn('‚ö†Ô∏è Failed to record pause log:', logError);\n        }\n        alert(`‚úÖ Bot paused successfully!`);\n      }\n    } catch (error: any) {\n      console.error(`‚ùå Failed to ${action} bot:`, error);\n      const errorMessage = error?.message || String(error) || 'Unknown error';\n      console.error('Error details:', {\n        message: errorMessage,\n        stack: error?.stack,\n        origin: window.location.origin,\n        url: window.location.href\n      });\n      \n      // Show user-friendly error message\n      alert(`‚ùå Failed to ${action} bot: ${errorMessage}\\n\\nPlease check the browser console (F12) for more details.`);\n      \n      await addLog(botId, {\n        level: 'error',\n        category: 'error',\n        message: `Failed to ${action} bot: ${errorMessage}`,\n        details: { action, error: errorMessage, origin: window.location.origin }\n      });\n    }\n  };\n\n  const handleStartAll = async () => {\n    setBulkLoading(true);\n    try {\n      const stoppedBots = filteredBots.filter(bot => bot.status === 'stopped' || bot.status === 'paused');\n      await Promise.all(stoppedBots.map(bot => startBot(bot.id)));\n    } catch (error) {\n      console.error('Failed to start all bots:', error);\n    } finally {\n      setBulkLoading(false);\n    }\n  };\n\n  const handleStopAll = async () => {\n    setBulkLoading(true);\n    try {\n      const runningBots = filteredBots.filter(bot => bot.status === 'running' || bot.status === 'paused');\n      await Promise.all(runningBots.map(bot => stopBot(bot.id)));\n    } catch (error) {\n      console.error('Failed to stop all bots:', error);\n    } finally {\n      setBulkLoading(false);\n    }\n  };\n\n  const handleResetAll = async () => {\n    if (!confirm('Are you sure you want to reset all bot statistics? This will set PnL, trades count, and win rate to zero.')) {\n      return;\n    }\n    setBulkLoading(true);\n    try {\n      await Promise.all(filteredBots.map(bot =>\n        updateBot(bot.id, {\n          total_trades: 0,\n          win_rate: 0,\n          pnl: 0,\n          pnl_percentage: 0,\n          last_trade_at: null\n        })\n      ));\n      await resetPaperTradingPerformance();\n      console.log('All bot statistics reset successfully');\n    } catch (error) {\n      console.error('Failed to reset all bots:', error);\n    } finally {\n      setBulkLoading(false);\n    }\n  };\n\n  const handleDeleteAll = async () => {\n    if (!confirm('Are you sure you want to delete all bots? This action cannot be undone.')) {\n      return;\n    }\n    setBulkLoading(true);\n    try {\n      await Promise.all(filteredBots.map(bot => deleteBot(bot.id)));\n      console.log('All bots deleted successfully');\n    } catch (error) {\n      console.error('Failed to delete all bots:', error);\n    } finally {\n      setBulkLoading(false);\n    }\n  };\n\n  // Individual bot actions\n  const handleResetBot = async (botId: string, botName: string) => {\n    if (!confirm(`Are you sure you want to reset \"${botName}\" statistics? This will set PnL, trades count, and win rate to zero.`)) {\n      return;\n    }\n    try {\n      await updateBot(botId, {\n        total_trades: 0,\n        win_rate: 0,\n        pnl: 0,\n        pnl_percentage: 0,\n        last_trade_at: null\n      });\n      console.log(`Bot \"${botName}\" statistics reset successfully`);\n    } catch (error) {\n      console.error(`Failed to reset bot \"${botName}\":`, error);\n    }\n  };\n\n  const handleDeleteBot = async (botId: string, botName: string) => {\n    if (!confirm(`Are you sure you want to delete \"${botName}\"? This action cannot be undone.`)) {\n      return;\n    }\n    try {\n      await deleteBot(botId);\n      console.log(`Bot \"${botName}\" deleted successfully`);\n    } catch (error) {\n      console.error(`Failed to delete bot \"${botName}\":`, error);\n    }\n  };\n\n  const handleCloneBot = async (bot: TradingBot) => {\n    try {\n      // Generate a unique name for the cloned bot\n      const baseName = bot.name.replace(/\\s*\\(Copy(?: \\d+)?\\)\\s*$/, ''); // Remove existing (Copy) suffix\n      let newName = `${baseName} (Copy)`;\n      \n      // Check if a bot with this name already exists\n      let copyNumber = 1;\n      while (bots.some(b => b.name === newName)) {\n        copyNumber++;\n        newName = `${baseName} (Copy ${copyNumber})`;\n      }\n\n      // Parse strategy and strategyConfig if they're strings\n      let strategy = bot.strategy || {};\n      if (typeof strategy === 'string') {\n        try {\n          strategy = JSON.parse(strategy);\n        } catch (e) {\n          console.warn('Failed to parse strategy, using empty object:', e);\n          strategy = {};\n        }\n      }\n\n      let strategyConfig = bot.strategyConfig || bot.strategy_config || {};\n      if (typeof strategyConfig === 'string') {\n        try {\n          strategyConfig = JSON.parse(strategyConfig);\n        } catch (e) {\n          console.warn('Failed to parse strategyConfig, using empty object:', e);\n          strategyConfig = {};\n        }\n      }\n\n      // Prepare bot data for cloning\n      const clonedBotData: any = {\n        name: newName,\n        exchange: bot.exchange,\n        tradingType: bot.tradingType || bot.trading_type || 'spot',\n        symbol: bot.symbol,\n        timeframe: bot.timeframe || '1h',\n        leverage: bot.leverage || 1,\n        riskLevel: bot.riskLevel || bot.risk_level || 'medium',\n        tradeAmount: bot.tradeAmount || bot.trade_amount || 100,\n        stopLoss: bot.stopLoss || bot.stop_loss || 2.0,\n        takeProfit: bot.takeProfit || bot.take_profit || 4.0,\n        strategy: strategy,\n        strategyConfig: strategyConfig,\n        paperTrading: bot.paperTrading || bot.paper_trading || false,\n        status: 'stopped', // Cloned bots start as stopped\n        pnl: 0,\n        pnlPercentage: 0,\n        totalTrades: 0,\n        winRate: 0,\n        lastTradeAt: null,\n        aiMlEnabled: bot.aiMlEnabled || bot.ai_ml_enabled || false,\n      };\n\n      // Create the cloned bot\n      const clonedBot = await createBot(clonedBotData);\n      \n      alert(`‚úÖ Bot \"${newName}\" cloned successfully!`);\n      \n      // Add a log entry for the original bot\n      await addLog(bot.id, {\n        level: 'info',\n        category: 'system',\n        message: `Bot cloned as \"${newName}\"`,\n        details: { clonedBotId: clonedBot.id }\n      });\n    } catch (error: any) {\n      console.error('Failed to clone bot:', error);\n      alert(`‚ùå Failed to clone bot: ${error.message || 'Unknown error'}`);\n    }\n  };\n\n  const handleEditBot = (botId: string) => {\n    navigate(`/edit-bot/${botId}`);\n  };\n\n  const handleToggleAiMl = async (botId: string, currentStatus: boolean) => {\n    // Prevent multiple simultaneous toggles for the same bot\n    if (togglingAiMl === botId) {\n      console.log('Already toggling AI/ML for this bot, please wait...');\n      return;\n    }\n\n    try {\n      setTogglingAiMl(botId);\n      await updateBot(botId, { aiMlEnabled: !currentStatus });\n      addLog(botId, {\n        level: 'info',\n        category: 'system',\n        message: `AI/ML ${!currentStatus ? 'enabled' : 'disabled'} for bot`\n      });\n    } catch (error) {\n      console.error('Failed to toggle AI/ML:', error);\n      addLog(botId, {\n        level: 'error',\n        category: 'system',\n        message: 'Failed to toggle AI/ML'\n      });\n    } finally {\n      setTogglingAiMl(null);\n    }\n  };\n\n  const handleTogglePaperTrading = async (bot: TradingBot) => {\n    const isCurrentlyPaper = bot.paperTrading || false;\n    const nextModeIsPaper = !isCurrentlyPaper;\n\n    if (!nextModeIsPaper) {\n      const prerequisites = [\n        '‚úÖ Real exchange API keys are connected and ACTIVE (non-testnet)',\n        '‚úÖ Wallets have sufficient available balance for this bot\\'s trade size',\n        '‚úÖ Stop-loss, take-profit, and risk limits are reviewed for live execution',\n        '‚úÖ You understand trades will execute on your real exchange account'\n      ].join('\\n');\n\n      const confirmed = window.confirm(\n        `‚ö†Ô∏è Enable REAL trading for \"${bot.name}\"?\\n\\nBefore proceeding, make sure:\\n\\n${prerequisites}\\n\\nContinue to live trading mode?`\n      );\n\n      if (!confirmed) {\n        return;\n      }\n    }\n\n    try {\n      await updateBot(bot.id, { paperTrading: nextModeIsPaper } as any);\n\n      await addLog(bot.id, {\n        level: nextModeIsPaper ? 'info' : 'warning',\n        category: 'system',\n        message: nextModeIsPaper\n          ? 'Bot switched to paper trading mode'\n          : 'Bot switched to REAL trading mode',\n        details: {\n          paperTrading: nextModeIsPaper,\n          switchedAt: new Date().toISOString()\n        }\n      });\n\n      if (nextModeIsPaper) {\n        alert(`‚úÖ Bot switched to Paper Trading mode. Orders will only simulate fills for testing.`);\n      } else {\n        alert(\n          `üö® \"${bot.name}\" is now in REAL trading mode.\\n\\nTrades will execute on your connected exchange using live funds.`\n        );\n      }\n    } catch (error: any) {\n      console.error('Failed to toggle paper trading:', error);\n      alert(`Failed to toggle trading mode: ${error?.message || 'Unknown error'}`);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header \n        title=\"Trading Bots\"\n        action={\n          <div className=\"flex space-x-2\">\n            <Button\n              variant=\"warning\"\n              size=\"sm\"\n              onClick={executeAllBots}\n              disabled={isExecuting || filteredBots.filter(bot => bot.status === 'running').length === 0}\n            >\n              <i className=\"ri-play-circle-line mr-1\"></i>\n              Execute All\n            </Button>\n            <Button\n              variant=\"success\"\n              size=\"sm\"\n              onClick={handleStartAll}\n              disabled={bulkLoading || filteredBots.filter(bot => bot.status === 'stopped' || bot.status === 'paused').length === 0}\n            >\n              <i className=\"ri-play-line mr-1\"></i>\n              Start All\n            </Button>\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={handleStopAll}\n              disabled={bulkLoading || filteredBots.filter(bot => bot.status === 'running' || bot.status === 'paused').length === 0}\n            >\n              <i className=\"ri-stop-line mr-1\"></i>\n              Stop All\n            </Button>\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={handleResetAll}\n              disabled={bulkLoading || filteredBots.length === 0}\n            >\n              <i className=\"ri-refresh-line mr-1\"></i>\n              Reset All\n            </Button>\n            <Button\n              variant=\"danger\"\n              size=\"sm\"\n              onClick={handleDeleteAll}\n              disabled={bulkLoading || filteredBots.length === 0}\n            >\n              <i className=\"ri-delete-bin-line mr-1\"></i>\n              Delete All\n            </Button>\n            <Button\n              variant=\"primary\"\n              size=\"sm\"\n              onClick={() => navigate('/create-bot')}\n            >\n              <i className=\"ri-add-line mr-1\"></i>\n              New Bot\n            </Button>\n          </div>\n        }\n      />\n      \n      <div className=\"pt-20 pb-20 px-4\">\n        <div className=\"max-w-6xl mx-auto space-y-4\">\n          {/* Execution Status */}\n          <Card className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className={`w-3 h-3 rounded-full ${isExecuting ? 'bg-yellow-500 animate-pulse' : 'bg-green-500'}`}></div>\n                  <span className=\"text-sm text-gray-600\">\n                    {isExecuting ? 'Executing...' : 'Ready'}\n                  </span>\n                </div>\n                {lastExecution && (\n                  <div className=\"text-xs text-gray-500\">\n                    Last execution: {new Date(lastExecution).toLocaleTimeString()}\n                  </div>\n                )}\n                {timeSync && (\n                  <div className=\"text-xs text-gray-500\">\n                    Time sync: {timeSync.offset > 0 ? '+' : ''}{timeSync.offset}ms\n                  </div>\n                )}\n              </div>\n              <div className=\"text-xs text-gray-500\">\n                Auto-execution every 5 minutes\n              </div>\n            </div>\n          </Card>\n\n          {/* Filter Tabs */}\n          <div className=\"flex space-x-2 overflow-x-auto\">\n            {[\n              { id: 'all', label: 'All' },\n              { id: 'running', label: 'Running' },\n              { id: 'paused', label: 'Paused' },\n              { id: 'stopped', label: 'Stopped' },\n              { id: 'live', label: 'Live Trading' }\n            ].map((option) => (\n              <button\n                key={option.id}\n                onClick={() => setFilter(option.id as typeof filter)}\n                className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${\n                  filter === option.id\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-white text-gray-600 border border-gray-200'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n\n          {/* View Mode */}\n          <div className=\"flex space-x-2 overflow-x-auto\">\n            {[\n              { id: 'overview', label: 'Bot Overview' },\n              { id: 'webhook', label: 'TradingView Webhooks' }\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setViewMode(tab.id as 'overview' | 'webhook')}\n                className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${\n                  viewMode === tab.id\n                    ? 'bg-purple-600 text-white'\n                    : 'bg-white text-gray-600 border border-gray-200'\n                }`}\n              >\n                {tab.label}\n              </button>\n            ))}\n          </div>\n\n          {/* Bot List */}\n          <div className=\"space-y-4\">\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n                <p className=\"text-gray-600\">Loading bots...</p>\n              </div>\n            ) : filteredBots.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-robot-line text-4xl text-gray-400 mb-4\"></i>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No bots found</h3>\n                <p className=\"text-gray-500 mb-4\">Create your first trading bot to get started</p>\n                <Button onClick={() => navigate('/create-bot')}>\n                  <i className=\"ri-add-line mr-2\"></i>\n                  Create Bot\n                </Button>\n              </div>\n            ) : (\n              filteredBots.map((bot) => (\n              <Card key={bot.id} className=\"space-y-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                      <i className={`${bot.exchange === 'bybit' ? 'ri-currency-line' : 'ri-exchange-line'} text-blue-600 text-xl`}></i>\n                    </div>\n                    <div>\n                      <h3 className=\"font-semibold text-gray-900\">{bot.name}</h3>\n                      <p className=\"text-sm text-gray-500\">{bot.symbol} ‚Ä¢ {bot.exchange.toUpperCase()}</p>\n                      <div className=\"flex items-center space-x-2 mt-1 flex-wrap gap-1\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(bot.status)}`}>\n                          {bot.status}\n                        </span>\n                        <span className={`text-xs font-medium ${getRiskColor(bot.riskLevel)}`}>\n                          {bot.riskLevel} risk\n                        </span>\n                        {(() => {\n                          const limit = getLimit(bot.id);\n                          if (limit && limit.isLimitReached) {\n                            return (\n                              <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 flex items-center gap-1\">\n                                <i className=\"ri-alert-line\"></i>\n                                Limit Reached\n                              </span>\n                            );\n                          }\n                          return null;\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"text-right\">\n                    <p className={`text-lg font-bold ${(bot.pnl ?? 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                      {(bot.pnl ?? 0) >= 0 ? '+' : ''}${(bot.pnl ?? 0).toFixed(2)}\n                    </p>\n                    <p className={`text-sm ${(bot.pnlPercentage ?? 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                      {(bot.pnlPercentage ?? 0) >= 0 ? '+' : ''}{(bot.pnlPercentage ?? 0).toFixed(2)}%\n                    </p>\n                  </div>\n                </div>\n\n                {/* Trade Limit Status */}\n                {!isWebhookView && (() => {\n                  const limit = getLimit(bot.id);\n                  if (limit) {\n                    return (\n                      <div className=\"pt-3 border-t border-gray-100\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm font-medium text-gray-700\">Daily Trades:</span>\n                            <span className={`text-sm font-semibold ${\n                              limit.isLimitReached ? 'text-red-600' : \n                              limit.tradesToday / limit.maxTradesPerDay > 0.8 ? 'text-yellow-600' : \n                              'text-green-600'\n                            }`}>\n                              {limit.tradesToday} / {limit.maxTradesPerDay}\n                            </span>\n                            {limit.isLimitReached && (\n                              <span className=\"text-xs text-red-600\">(Limit Reached)</span>\n                            )}\n                          </div>\n                          <button\n                            onClick={() => {\n                              if (editingLimitBotId === bot.id) {\n                                setEditingLimitBotId(null);\n                                setEditingLimitValue(null);\n                              } else {\n                                setEditingLimitBotId(bot.id);\n                                setEditingLimitValue(limit.maxTradesPerDay);\n                              }\n                            }}\n                            className=\"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1\"\n                            title=\"Edit max trades per day\"\n                          >\n                            <i className=\"ri-edit-line\"></i>\n                            Edit Limit\n                          </button>\n                        </div>\n                        \n                        {/* Progress Bar */}\n                        <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n                          <div \n                            className={`h-2 rounded-full transition-all ${\n                              limit.isLimitReached ? 'bg-red-500' : \n                              limit.tradesToday / limit.maxTradesPerDay > 0.8 ? 'bg-yellow-500' : \n                              'bg-green-500'\n                            }`}\n                            style={{ \n                              width: `${Math.min(100, (limit.tradesToday / limit.maxTradesPerDay) * 100)}%` \n                            }}\n                          ></div>\n                        </div>\n\n                        {/* Inline Editor */}\n                        {editingLimitBotId === bot.id && (\n                          <div className=\"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <label className=\"text-xs font-medium text-gray-700\">\n                                Max Trades Per Day:\n                              </label>\n                              <input\n                                type=\"number\"\n                                min=\"1\"\n                                max=\"200\"\n                                value={editingLimitValue || limit.maxTradesPerDay}\n                                onChange={(e) => setEditingLimitValue(parseInt(e.target.value) || 1)}\n                                className=\"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                              />\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Button\n                                size=\"sm\"\n                                onClick={async () => {\n                                  if (editingLimitValue && editingLimitValue > 0) {\n                                    try {\n                                      // Get current strategyConfig from bot or use default\n                                      let currentConfig: any = {};\n                                      \n                                      // Try to parse strategyConfig if it exists\n                                      if (bot.strategyConfig) {\n                                        if (typeof bot.strategyConfig === 'string') {\n                                          try {\n                                            currentConfig = JSON.parse(bot.strategyConfig);\n                                          } catch (e) {\n                                            console.warn('Failed to parse strategyConfig:', e);\n                                            currentConfig = {};\n                                          }\n                                        } else {\n                                          currentConfig = { ...bot.strategyConfig };\n                                        }\n                                      }\n                                      \n                                      // Update max_trades_per_day\n                                      // Ensure required fields have defaults if missing\n                                      const updatedConfig = {\n                                        bias_mode: currentConfig.bias_mode || 'auto',\n                                        regime_mode: currentConfig.regime_mode || 'auto',\n                                        htf_timeframe: currentConfig.htf_timeframe || '4h',\n                                        ...currentConfig,\n                                        max_trades_per_day: editingLimitValue\n                                      };\n                                      \n                                      console.log('Updating strategyConfig:', updatedConfig);\n                                      \n                                      // Update bot with merged strategyConfig\n                                      await updateBot(bot.id, {\n                                        strategyConfig: updatedConfig\n                                      } as any);\n                                      \n                                      setEditingLimitBotId(null);\n                                      setEditingLimitValue(null);\n                                      \n                                      // Refresh limits after a short delay to allow DB to update\n                                      setTimeout(async () => {\n                                        await refreshLimits();\n                                        // Also refresh bot list\n                                        window.location.reload(); // Simple way to refresh bot data\n                                      }, 500);\n                                      \n                                      alert(`‚úÖ Max trades per day updated to ${editingLimitValue}`);\n                                    } catch (error: any) {\n                                      console.error('Error updating limit:', error);\n                                      const errorMsg = error?.message || 'Failed to update limit. Please try again.';\n                                      alert(`Failed to update limit: ${errorMsg}`);\n                                    }\n                                  }\n                                }}\n                                className=\"text-xs\"\n                              >\n                                Save\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"secondary\"\n                                onClick={() => {\n                                  setEditingLimitBotId(null);\n                                  setEditingLimitValue(null);\n                                }}\n                                className=\"text-xs\"\n                              >\n                                Cancel\n                              </Button>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  }\n                  return null;\n                })()}\n\n                {/* Trade Amount */}\n                {!isWebhookView && (\n                <div className=\"pt-3 border-t border-gray-100\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-sm font-medium text-gray-700\">Trade Amount:</span>\n                      <span className=\"text-sm font-semibold text-gray-900\">\n                        ${(bot.tradeAmount || 100).toFixed(2)} USD\n                      </span>\n                    </div>\n                    <button\n                      onClick={() => {\n                        if (editingTradeAmountBotId === bot.id) {\n                          setEditingTradeAmountBotId(null);\n                          setEditingTradeAmountValue(null);\n                        } else {\n                          setEditingTradeAmountBotId(bot.id);\n                          setEditingTradeAmountValue(bot.tradeAmount || 100);\n                        }\n                      }}\n                      className=\"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1\"\n                      title=\"Edit trade amount\"\n                    >\n                      <i className=\"ri-edit-line\"></i>\n                      Edit Amount\n                    </button>\n                  </div>\n                  \n                  {/* Estimated Order Value */}\n                  <p className=\"text-xs text-gray-500 mb-2\">\n                    Est. Order Value: ${((bot.tradeAmount || 100) * bot.leverage * 1.5).toFixed(2)} USD\n                    <span className=\"ml-2 text-gray-400\">\n                      (Amount √ó Leverage {bot.leverage}x √ó 1.5 buffer)\n                    </span>\n                  </p>\n\n                  {/* Inline Editor */}\n                  {editingTradeAmountBotId === bot.id && (\n                    <div className=\"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <label className=\"text-xs font-medium text-gray-700\">\n                          Trade Amount (USD):\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"10\"\n                          max=\"10000\"\n                          step=\"10\"\n                          value={editingTradeAmountValue || bot.tradeAmount || 100}\n                          onChange={(e) => setEditingTradeAmountValue(parseFloat(e.target.value) || 10)}\n                          className=\"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div className=\"mb-2\">\n                        <p className=\"text-xs text-gray-600\">\n                          New Est. Order Value: ${((editingTradeAmountValue || bot.tradeAmount || 100) * bot.leverage * 1.5).toFixed(2)} USD\n                        </p>\n                        {(editingTradeAmountValue || bot.tradeAmount || 100) > 100 && (\n                          <p className=\"text-xs text-yellow-600 mt-1\">\n                            ‚ö†Ô∏è Higher amounts may require more balance\n                          </p>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          size=\"sm\"\n                          onClick={async () => {\n                            if (editingTradeAmountValue && editingTradeAmountValue >= 10 && editingTradeAmountValue <= 10000) {\n                              try {\n                                await updateBot(bot.id, {\n                                  tradeAmount: editingTradeAmountValue\n                                } as any);\n                                \n                                setEditingTradeAmountBotId(null);\n                                setEditingTradeAmountValue(null);\n                                \n                                // Refresh bot list after a short delay\n                                setTimeout(() => {\n                                  window.location.reload();\n                                }, 500);\n                                \n                                alert(`‚úÖ Trade amount updated to $${editingTradeAmountValue.toFixed(2)}`);\n                              } catch (error: any) {\n                                console.error('Error updating trade amount:', error);\n                                const errorMsg = error?.message || 'Failed to update trade amount. Please try again.';\n                                alert(`Failed to update trade amount: ${errorMsg}`);\n                              }\n                            } else {\n                              alert('Please enter a valid trade amount between $10 and $10,000');\n                            }\n                          }}\n                          className=\"text-xs\"\n                        >\n                          Save\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"secondary\"\n                          onClick={() => {\n                            setEditingTradeAmountBotId(null);\n                            setEditingTradeAmountValue(null);\n                          }}\n                          className=\"text-xs\"\n                        >\n                          Cancel\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n                )}\n\n                {/* Bot Stats */}\n                {!isWebhookView && (\n                <div className=\"grid grid-cols-2 md:grid-cols-6 gap-4 pt-4 border-t border-gray-100 dark:border-gray-700\">\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Trades</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white\">{bot.totalTrades ?? 0}</p>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Win Rate</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white\">{(bot.winRate ?? 0).toFixed(1)}%</p>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Win/Loss</p>\n                    {(() => {\n                      const totalTrades = bot.totalTrades ?? 0;\n                      const closedTrades = bot.closedTrades ?? totalTrades;\n                      const wins = bot.winTrades ?? (closedTrades > 0 ? Math.round((closedTrades * (bot.winRate ?? 0)) / 100) : 0);\n                      const losses = bot.lossTrades ?? Math.max(0, closedTrades - wins);\n                      return (\n                        <p className=\"font-semibold text-gray-900 dark:text-white\">\n                          <span className=\"text-green-600 dark:text-green-400\">{wins}</span>\n                          <span className=\"text-gray-400 dark:text-gray-500 mx-1\">/</span>\n                          <span className=\"text-red-600 dark:text-red-400\">{losses}</span>\n                        </p>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Fees</p>\n                    {(() => {\n                      const rawFees = bot.totalFees ?? bot.total_fees ?? bot.fees ?? 0;\n                      const feesValue = Number.isFinite(rawFees) ? rawFees : 0;\n                      const signPrefix = feesValue > 0 ? '-' : '';\n                      const displayValue = Math.abs(feesValue);\n                      return (\n                        <p className={`font-semibold ${displayValue > 0 ? 'text-red-600 dark:text-red-400' : 'text-gray-900 dark:text-white'}`}>\n                          {signPrefix}${displayValue.toFixed(2)}\n                        </p>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Drawdown</p>\n                    {(() => {\n                      const rawDrawdown = bot.drawdown ?? bot.maxDrawdown ?? 0;\n                      const drawdownValue = Number.isFinite(rawDrawdown) ? Math.abs(rawDrawdown) : 0;\n                      const rawDrawdownPct = bot.drawdownPercentage ?? bot.drawdown_percentage ?? 0;\n                      const drawdownPct = Number.isFinite(rawDrawdownPct) ? Math.abs(rawDrawdownPct) : 0;\n                      return (\n                        <div>\n                          <p className={`font-semibold ${drawdownValue > 0 ? 'text-red-600 dark:text-red-400' : 'text-gray-900 dark:text-white'}`}>\n                            {drawdownValue > 0 ? '-' : ''}${drawdownValue.toFixed(2)}\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">{drawdownPct.toFixed(1)}%</p>\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">PnL</p>\n                    {(() => {\n                      const pnlValue = bot.realizedPnl !== undefined ? bot.realizedPnl : (bot.pnl ?? 0);\n                      return (\n                        <p className={`font-semibold ${pnlValue >= 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                          {pnlValue >= 0 ? '+' : ''}${pnlValue.toFixed(2)}\n                        </p>\n                      );\n                    })()}\n                  </div>\n                </div>\n                )}\n\n                {/* Bot Activity Logs */}\n                {!isWebhookView && (() => {\n                  const activity = getBotActivity(bot.id);\n                  const recentLogs = activity?.logs.slice(0, 3) || [];\n                  \n                  return (\n                    <div className=\"pt-4 border-t border-gray-100\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h4 className=\"text-sm font-medium text-gray-700\">Recent Activity</h4>\n                        <button\n                          onClick={() => setExpandedBot(expandedBot === bot.id ? null : bot.id)}\n                          className=\"text-xs text-blue-600 hover:text-blue-800\"\n                        >\n                          {expandedBot === bot.id ? 'Hide' : 'Show All'}\n                        </button>\n                      </div>\n                      \n                      {/* Activity Stats */}\n                      {activity && (\n                        <div className=\"flex space-x-4 mb-3 text-xs\">\n                          <span className=\"text-green-600\">‚úì {activity.successCount}</span>\n                          <span className=\"text-yellow-600\">‚ö† {activity.logs.filter(l => l.level === 'warning').length}</span>\n                          <span className=\"text-red-600\">‚úó {activity.errorCount}</span>\n                          <span className=\"text-gray-500\">üìä {activity.logs.length} total</span>\n                        </div>\n                      )}\n\n                      {/* Recent Logs */}\n                      <div className=\"space-y-2\">\n                        {recentLogs.length === 0 ? (\n                          <div className=\"text-center py-4 text-gray-500 text-sm\">\n                            <i className=\"ri-file-list-line text-lg mb-1\"></i>\n                            <p>No activity logs yet</p>\n                          </div>\n                        ) : (\n                          recentLogs.map((log) => (\n                            <div key={log.id} className=\"flex items-start space-x-2 p-2 bg-gray-50 rounded text-xs\">\n                              <div className={`w-5 h-5 rounded-full flex items-center justify-center ${getLogLevelColor(log.level)}`}>\n                                <i className={`${getCategoryIcon(log.category)} text-xs`}></i>\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <div className=\"flex items-center justify-between\">\n                                  <span className={`px-1 py-0.5 rounded text-xs font-medium ${getLogLevelColor(log.level)}`}>\n                                    {log.level}\n                                  </span>\n                                  <span className=\"text-gray-500\">{formatTime(log.timestamp)}</span>\n                                </div>\n                                <p className=\"text-gray-700 mt-1 truncate\">{log.message}</p>\n                              </div>\n                            </div>\n                          ))\n                        )}\n                      </div>\n\n                      {/* Expanded Logs */}\n                      {expandedBot === bot.id && activity && activity.logs.length > 3 && (\n                        <div className=\"mt-3 space-y-2 max-h-48 overflow-y-auto\">\n                          {activity.logs.slice(3).map((log) => (\n                            <div key={log.id} className=\"flex items-start space-x-2 p-2 bg-gray-50 rounded text-xs\">\n                              <div className={`w-5 h-5 rounded-full flex items-center justify-center ${getLogLevelColor(log.level)}`}>\n                                <i className={`${getCategoryIcon(log.category)} text-xs`}></i>\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <div className=\"flex items-center justify-between\">\n                                  <span className={`px-1 py-0.5 rounded text-xs font-medium ${getLogLevelColor(log.level)}`}>\n                                    {log.level}\n                                  </span>\n                                  <span className=\"text-gray-500\">{formatTime(log.timestamp)}</span>\n                                </div>\n                                <p className=\"text-gray-700 mt-1\">{log.message}</p>\n                                {log.details && (\n                                  <details className=\"mt-1\">\n                                    <summary className=\"cursor-pointer text-gray-500 hover:text-gray-700\">Details</summary>\n                                    <pre className=\"mt-1 p-1 bg-white rounded border text-xs overflow-x-auto\">\n                                      {JSON.stringify(log.details, null, 2)}\n                                    </pre>\n                                  </details>\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  );\n                })()}\n\n                {/* TradingView Webhook Management */}\n                {(() => {\n                  const showWebhookPanel = isWebhookView || webhookExpandedBot === bot.id;\n                  return (\n                <div className={`pt-4 border-t border-gray-100 ${isWebhookView ? 'bg-blue-50 rounded-lg border-blue-100' : ''}`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <i className=\"ri-link-m text-blue-500\"></i>\n                      <h4 className=\"text-sm font-medium text-gray-700\">TradingView Webhook</h4>\n                    </div>\n                    {isWebhookView ? (\n                      <span className=\"text-xs uppercase font-semibold text-blue-500 tracking-wide\">\n                        Webhook Dashboard\n                      </span>\n                    ) : (\n                      <button\n                        onClick={() => handleToggleWebhookPanel(bot.id)}\n                        className=\"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1\"\n                      >\n                        <i className={`ri-${webhookExpandedBot === bot.id ? 'arrow-up-s-line' : 'arrow-down-s-line'}`}></i>\n                        {webhookExpandedBot === bot.id ? 'Hide' : 'Manage'}\n                      </button>\n                    )}\n                  </div>\n\n                  {showWebhookPanel && (\n                    <div className={`mt-3 space-y-4 ${isWebhookView ? 'bg-white border border-blue-100' : 'bg-blue-50 border border-blue-100'} rounded-lg p-4`}>\n                      <div className=\"grid gap-4 md:grid-cols-2\">\n                        <div>\n                          <p className=\"text-xs uppercase font-semibold text-gray-500\">Webhook Secret</p>\n                          <div className=\"mt-1 font-mono text-sm bg-white border border-gray-200 rounded px-3 py-2 flex items-center justify-between\">\n                            <span className=\"truncate pr-3\">\n                              {webhookSecretVisible[bot.id] ? (bot.webhookSecret || 'Not set yet') : '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'}\n                            </span>\n                          </div>\n                          <div className=\"mt-2 flex flex-wrap gap-2\">\n                            <Button\n                              variant=\"secondary\"\n                              size=\"sm\"\n                              onClick={() =>\n                                setWebhookSecretVisible(prev => ({ ...prev, [bot.id]: !prev[bot.id] }))\n                              }\n                            >\n                              <i className=\"ri-eye-line mr-1\"></i>\n                              {webhookSecretVisible[bot.id] ? 'Hide' : 'Reveal'}\n                            </Button>\n                            <Button\n                              variant=\"secondary\"\n                              size=\"sm\"\n                              disabled={!bot.webhookSecret}\n                              onClick={() => handleCopy(bot.webhookSecret || '', 'Webhook secret')}\n                            >\n                              <i className=\"ri-file-copy-line mr-1\"></i>\n                              Copy Secret\n                            </Button>\n                            <Button\n                              variant=\"warning\"\n                              size=\"sm\"\n                              disabled={webhookActionLoading[bot.id]}\n                              onClick={() => handleRegenerateWebhookSecret(bot)}\n                            >\n                              {webhookActionLoading[bot.id] ? (\n                                <span className=\"flex items-center gap-1\">\n                                  <i className=\"ri-loader-4-line animate-spin\"></i>\n                                  Updating...\n                                </span>\n                              ) : (\n                                <>\n                                  <i className=\"ri-refresh-line mr-1\"></i>\n                                  Regenerate\n                                </>\n                              )}\n                            </Button>\n                          </div>\n                          <p className=\"mt-2 text-xs text-gray-500\">\n                            Regenerating the secret invalidates existing TradingView alerts‚Äîremember to update them.\n                          </p>\n                        </div>\n\n                        <div>\n                          <p className=\"text-xs uppercase font-semibold text-gray-500\">Webhook URL</p>\n                          <div className=\"mt-1 font-mono text-sm bg-white border border-gray-200 rounded px-3 py-2 flex items-center justify-between\">\n                            <span className=\"truncate pr-3\">{webhookEndpoint}</span>\n                          </div>\n                          <div className=\"mt-2 flex flex-wrap gap-2\">\n                            <Button\n                              variant=\"secondary\"\n                              size=\"sm\"\n                              onClick={() => handleCopy(webhookEndpoint, 'Webhook URL')}\n                            >\n                              <i className=\"ri-file-copy-line mr-1\"></i>\n                              Copy URL\n                            </Button>\n                          </div>\n                          <div className=\"mt-4\">\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-xs uppercase font-semibold text-gray-500\">Immediate Execution</span>\n                              <button\n                                onClick={() => handleToggleWebhookImmediate(bot)}\n                                disabled={webhookActionLoading[bot.id]}\n                                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                                  webhookActionLoading[bot.id] ? 'opacity-50 cursor-not-allowed' : ''\n                                } ${bot.webhookTriggerImmediate ? 'bg-blue-600' : 'bg-gray-300'}`}\n                              >\n                                <span\n                                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                                    bot.webhookTriggerImmediate ? 'translate-x-6' : 'translate-x-1'\n                                  }`}\n                                />\n                              </button>\n                            </div>\n                            <p className=\"text-xs text-gray-500 mt-1\">\n                              When enabled, the webhook calls bot-executor immediately after logging the signal.\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h5 className=\"text-xs font-semibold text-gray-600 uppercase\">TradingView Alert Payload</h5>\n                          <div className=\"flex gap-2\">\n                            <Button\n                              variant=\"secondary\"\n                              size=\"sm\"\n                              onClick={() => handleCopy(buildSamplePayload(bot), 'Alert payload JSON')}\n                            >\n                              <i className=\"ri-code-line mr-1\"></i>\n                              Copy JSON\n                            </Button>\n                          </div>\n                        </div>\n                        <pre className=\"bg-white border border-gray-200 rounded p-3 text-xs overflow-x-auto\">\n{buildSamplePayload(bot)}\n                        </pre>\n                      </div>\n\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h5 className=\"text-xs font-semibold text-gray-600 uppercase\">Recent Webhook Signals</h5>\n                          <div className=\"flex gap-2\">\n                            <Button\n                              variant=\"secondary\"\n                              size=\"sm\"\n                              onClick={() => loadWebhookSignals(bot.id)}\n                              disabled={webhookSignalsLoading[bot.id]}\n                            >\n                              {webhookSignalsLoading[bot.id] ? (\n                                <span className=\"flex items-center gap-1\">\n                                  <i className=\"ri-loader-4-line animate-spin\"></i>\n                                  Refreshing...\n                                </span>\n                              ) : (\n                                <>\n                                  <i className=\"ri-refresh-line mr-1\"></i>\n                                  Refresh\n                                </>\n                              )}\n                            </Button>\n                          </div>\n                        </div>\n\n                        {webhookSignalsLoading[bot.id] ? (\n                          <div className=\"text-sm text-gray-600 flex items-center gap-2\">\n                            <i className=\"ri-loader-4-line animate-spin\"></i>\n                            Loading signals...\n                          </div>\n                        ) : webhookSignals[bot.id] && webhookSignals[bot.id].length > 0 ? (\n                          <div className=\"overflow-x-auto\">\n                            <table className=\"min-w-full text-xs bg-white border border-gray-200 rounded-lg overflow-hidden\">\n                              <thead className=\"bg-gray-100 text-gray-600 uppercase\">\n                                <tr>\n                                  <th className=\"px-3 py-2 text-left\">Created</th>\n                                  <th className=\"px-3 py-2 text-left\">Side</th>\n                                  <th className=\"px-3 py-2 text-left\">Mode</th>\n                                  <th className=\"px-3 py-2 text-right\">Size x</th>\n                                  <th className=\"px-3 py-2 text-left\">Reason</th>\n                                  <th className=\"px-3 py-2 text-left\">Status</th>\n                                  <th className=\"px-3 py-2 text-left\">Processed</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {webhookSignals[bot.id].map(signal => (\n                                  <tr key={signal.id} className=\"border-t border-gray-100\">\n                                    <td className=\"px-3 py-2 whitespace-nowrap text-gray-700\">\n                                      {formatDateTime(signal.created_at)}\n                                    </td>\n                                    <td className=\"px-3 py-2 uppercase font-semibold text-gray-700\">\n                                      {signal.side || '‚Äî'}\n                                    </td>\n                                    <td className=\"px-3 py-2 capitalize text-gray-700\">{signal.mode}</td>\n                                    <td className=\"px-3 py-2 text-right text-gray-700\">\n                                      {(signal.size_multiplier ?? 1).toFixed(2)}\n                                    </td>\n                                    <td className=\"px-3 py-2 text-gray-700\">\n                                      {signal.reason || '‚Äî'}\n                                      {signal.error && (\n                                        <div className=\"text-red-600 mt-1\">Error: {signal.error}</div>\n                                      )}\n                                    </td>\n                                    <td className=\"px-3 py-2\">\n                                      <span className={`px-2 py-1 rounded-full text-[10px] font-semibold ${getSignalStatusBadgeClasses(signal.status)}`}>\n                                        {signal.status.toUpperCase()}\n                                      </span>\n                                    </td>\n                                    <td className=\"px-3 py-2 text-gray-700\">\n                                      {signal.processed_at ? formatDateTime(signal.processed_at) : 'Pending'}\n                                    </td>\n                                  </tr>\n                                ))}\n                              </tbody>\n                            </table>\n                          </div>\n                        ) : (\n                          <div className=\"text-sm text-gray-600 flex items-center gap-2\">\n                            <i className=\"ri-information-line\"></i>\n                            No webhook signals recorded yet.\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n                  );\n                })()}\n\n                {/* Bot Actions */}\n                {!isWebhookView && (\n                <div className=\"pt-4 border-t border-gray-100\">\n                  {/* Primary Actions Row */}\n                  <div className=\"flex space-x-2 mb-2\">\n                    {bot.status === 'running' ? (\n                      <>\n                        <Button \n                          variant=\"warning\" \n                          size=\"sm\" \n                          className=\"flex-1\"\n                          onClick={() => executeBot(bot.id)}\n                          disabled={isExecuting}\n                        >\n                          <i className=\"ri-play-circle-line mr-1\"></i>\n                          Execute\n                        </Button>\n                        <Button \n                          variant=\"secondary\" \n                          size=\"sm\" \n                          onClick={() => handleBotAction(bot.id, 'pause')}\n                        >\n                          <i className=\"ri-pause-line mr-1\"></i>\n                          Pause\n                        </Button>\n                      </>\n                    ) : (\n                      <Button \n                        variant=\"success\" \n                        size=\"sm\" \n                        className=\"flex-1\"\n                        onClick={() => handleBotAction(bot.id, 'start')}\n                      >\n                        <i className=\"ri-play-line mr-1\"></i>\n                        Start\n                      </Button>\n                    )}\n                    <Button \n                      variant=\"danger\" \n                      size=\"sm\"\n                      onClick={() => handleBotAction(bot.id, 'stop')}\n                    >\n                      <i className=\"ri-stop-line\"></i>\n                    </Button>\n                    <Button \n                      variant=\"secondary\" \n                      size=\"sm\"\n                      onClick={() => navigate('/bot-activity')}\n                    >\n                      <i className=\"ri-file-list-line\"></i>\n                    </Button>\n                  </div>\n                  \n                  {/* AI/ML Toggle */}\n                  <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"flex items-center space-x-2\">\n                      <i className=\"ri-brain-line text-purple-600\"></i>\n                      <span className=\"text-sm font-medium text-gray-700\">AI/ML System</span>\n                    </div>\n                    <button\n                      onClick={() => handleToggleAiMl(bot.id, bot.aiMlEnabled || false)}\n                      disabled={togglingAiMl === bot.id}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        togglingAiMl === bot.id ? 'opacity-50 cursor-not-allowed' : ''\n                      } ${\n                        bot.aiMlEnabled ? 'bg-purple-600' : 'bg-gray-300'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          bot.aiMlEnabled ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                  \n                  {/* Paper Trading Toggle */}\n                  <div\n                    className={`flex items-center justify-between p-3 rounded-lg border ${\n                      bot.paperTrading\n                        ? 'bg-yellow-50 border-yellow-200'\n                        : 'bg-red-50 border-red-200 shadow-inner'\n                    }`}\n                  >\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex items-center space-x-2\">\n                      <i className={`ri-${bot.paperTrading ? 'edit-box-line' : 'money-dollar-circle-line'} text-yellow-600`}></i>\n                      <span className=\"text-sm font-medium text-gray-700\">\n                        {bot.paperTrading ? 'üìù Paper Trading' : 'üí∞ Real Trading'}\n                      </span>\n                      </div>\n                      {!bot.paperTrading && (\n                        <div className=\"flex items-center mt-1 text-xs font-semibold text-red-600 uppercase tracking-wide\">\n                          <span className=\"relative flex h-2.5 w-2.5 mr-2\">\n                            <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\n                            <span className=\"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500\"></span>\n                          </span>\n                          Live Trading Active\n                        </div>\n                      )}\n                    </div>\n                    <button\n                      onClick={() => handleTogglePaperTrading(bot)}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        bot.paperTrading ? 'bg-yellow-600' : 'bg-gray-300'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          bot.paperTrading ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                  \n                  {/* Management Actions Row */}\n                  <div className=\"flex space-x-2\">\n                    <Button \n                      variant=\"primary\" \n                      size=\"sm\" \n                      className=\"flex-1\"\n                      onClick={() => handleEditBot(bot.id)}\n                    >\n                      <i className=\"ri-edit-line mr-1\"></i>\n                      Edit\n                    </Button>\n                    <Button \n                      variant=\"secondary\" \n                      size=\"sm\" \n                      className=\"flex-1\"\n                      onClick={() => handleCloneBot(bot)}\n                      title=\"Clone this bot with all settings\"\n                    >\n                      <i className=\"ri-file-copy-line mr-1\"></i>\n                      Clone\n                    </Button>\n                    <Button \n                      variant=\"warning\" \n                      size=\"sm\" \n                      className=\"flex-1\"\n                      onClick={() => handleResetBot(bot.id, bot.name)}\n                    >\n                      <i className=\"ri-refresh-line mr-1\"></i>\n                      Reset\n                    </Button>\n                    <Button \n                      variant=\"danger\" \n                      size=\"sm\" \n                      className=\"flex-1\"\n                      onClick={() => handleDeleteBot(bot.id, bot.name)}\n                    >\n                      <i className=\"ri-delete-bin-line mr-1\"></i>\n                      Delete\n                    </Button>\n                  </div>\n                </div>\n                )}\n              </Card>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n      <Navigation />\n    </div>\n  );\n}\n"],"names":["useBotTradeLimits","botIds","limits","setLimits","useState","loading","setLoading","error","setError","fetchTradeLimits","now","todayStart","todayEnd","botsData","botsError","supabase","tradesData","tradesError","tradesByBot","trade","count","limitsMap","bot","maxTradesPerDay","strategyConfig","tradesToday","remainingTrades","isLimitReached","err","useEffect","interval","botId","BotsPage","navigate","useNavigate","bots","startBot","stopBot","pauseBot","updateBot","deleteBot","createBot","useBots","activities","addLog","useBotActivity","isExecuting","lastExecution","timeSync","executeBot","executeAllBots","useBotExecutor","filter","setFilter","viewMode","setViewMode","bulkLoading","setBulkLoading","expandedBot","setExpandedBot","togglingAiMl","setTogglingAiMl","editingLimitBotId","setEditingLimitBotId","editingLimitValue","setEditingLimitValue","editingTradeAmountBotId","setEditingTradeAmountBotId","editingTradeAmountValue","setEditingTradeAmountValue","webhookExpandedBot","setWebhookExpandedBot","webhookSignals","setWebhookSignals","webhookSignalsLoading","setWebhookSignalsLoading","webhookSecretVisible","setWebhookSecretVisible","webhookActionLoading","setWebhookActionLoading","isWebhookView","b","getLimit","refreshLimits","webhookEndpoint","generateWebhookSecret","array","_a","byte","handleCopy","value","description","loadWebhookSignals","prev","data","handleToggleWebhookPanel","isOpen","handleRegenerateWebhookSecret","newSecret","handleToggleWebhookImmediate","nextValue","buildSamplePayload","formatDateTime","timestamp","getSignalStatusBadgeClasses","status","filteredBots","resetPaperTradingPerformance","session","functionUrl","response","getBotActivity","activity","getLogLevelColor","level","getCategoryIcon","category","formatTime","getStatusColor","getRiskColor","risk","handleBotAction","action","logError","errorMessage","handleStartAll","stoppedBots","handleStopAll","runningBots","handleResetAll","handleDeleteAll","handleResetBot","botName","handleDeleteBot","handleCloneBot","baseName","newName","copyNumber","strategy","e","clonedBotData","clonedBot","handleEditBot","handleToggleAiMl","currentStatus","handleTogglePaperTrading","nextModeIsPaper","prerequisites","jsxs","jsx","Header","Button","Card","option","tab","limit","currentConfig","updatedConfig","errorMsg","totalTrades","closedTrades","wins","losses","rawFees","feesValue","signPrefix","displayValue","rawDrawdown","drawdownValue","rawDrawdownPct","drawdownPct","pnlValue","recentLogs","l","log","showWebhookPanel","Fragment","signal","Navigation"],"mappings":"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"}