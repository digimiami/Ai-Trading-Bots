{"version":3,"file":"page-884074ed.js","sources":["../../src/pages/backtest/page.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Card from '../../components/base/Card';\nimport Button from '../../components/base/Button';\nimport Header from '../../components/feature/Header';\nimport { createClient } from '@supabase/supabase-js';\nimport type { TradingStrategy, AdvancedStrategyConfig } from '../../types/trading';\nimport {\n  HTF_TIMEFRAME_OPTIONS,\n  HTF_TREND_INDICATOR_OPTIONS\n} from '../../constants/strategyOptions';\nimport { supabase } from '../../lib/supabase';\n\nconst supabaseUrl = import.meta.env.VITE_PUBLIC_SUPABASE_URL || import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY || import.meta.env.VITE_SUPABASE_ANON_KEY;\n\ninterface BacktestConfig {\n  name: string;\n  symbols: string[];\n  customPairs: string;\n  useCustomPairs: boolean;\n  exchange: 'bybit' | 'okx';\n  tradingType: 'spot' | 'futures';\n  timeframe: string;\n  leverage: number;\n  riskLevel: 'low' | 'medium' | 'high';\n  tradeAmount: number;\n  stopLoss: number;\n  takeProfit: number;\n  startDate: string;\n  endDate: string;\n}\n\nexport default function BacktestPage() {\n  const navigate = useNavigate();\n  const [config, setConfig] = useState<BacktestConfig>({\n    name: '',\n    symbols: ['BTCUSDT'],\n    customPairs: '',\n    useCustomPairs: false,\n    exchange: 'bybit',\n    tradingType: 'futures',\n    timeframe: '1h',\n    leverage: 5,\n    riskLevel: 'medium',\n    tradeAmount: 100,\n    stopLoss: 2.0,\n    takeProfit: 4.0,\n    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 30 days ago\n    endDate: new Date().toISOString().split('T')[0], // Today\n  });\n\n  const [strategy, setStrategy] = useState<TradingStrategy>({\n    rsiThreshold: 70,\n    adxThreshold: 25,\n    bbWidthThreshold: 0.02,\n    emaSlope: 0.5,\n    atrPercentage: 2.5,\n    vwapDistance: 1.2,\n    momentumThreshold: 0.8,\n    useMLPrediction: true,\n    minSamplesForML: 100\n  });\n\n  const [advancedConfig, setAdvancedConfig] = useState<AdvancedStrategyConfig>({\n    bias_mode: 'auto',\n    htf_timeframe: '4h',\n    htf_trend_indicator: 'EMA200',\n    ema_fast_period: 50,\n    require_price_vs_trend: 'any',\n    adx_min_htf: 23,\n    require_adx_rising: true,\n    regime_mode: 'auto',\n    adx_trend_min: 25,\n    adx_meanrev_max: 19,\n    session_filter_enabled: false,\n    allowed_hours_utc: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],\n    cooldown_bars: 8,\n    atr_percentile_min: 20,\n    bb_width_min: 0.012,\n    bb_width_max: 0.03,\n    min_24h_volume_usd: 500000000,\n    max_spread_bps: 3,\n    risk_per_trade_pct: 0.75,\n    daily_loss_limit_pct: 3.0,\n    weekly_loss_limit_pct: 6.0,\n    max_trades_per_day: 8,\n    max_concurrent: 2,\n    sl_atr_mult: 1.3,\n    tp1_r: 1.0,\n    tp2_r: 2.0,\n    tp1_size: 0.5,\n    breakeven_at_r: 0.8,\n    trail_after_tp1_atr: 1.0,\n    time_stop_hours: 48,\n    rsi_period: 14,\n    rsi_oversold: 30,\n    rsi_overbought: 70,\n  atr_period: 14,\n  atr_tp_multiplier: 3,\n    use_ml_prediction: true,\n    ml_confidence_threshold: 0.6,\n    ml_min_samples: 100\n  });\n\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [isRunning, setIsRunning] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [backtestId, setBacktestId] = useState<string | null>(null);\n  const [results, setResults] = useState<any>(null);\n  const [showCreateBot, setShowCreateBot] = useState(false);\n  const [botName, setBotName] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleStrategyChange = (field: keyof TradingStrategy, value: any) => {\n    setStrategy(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleSaveBacktest = async () => {\n    if (!results || !config.name.trim()) {\n      alert('Please complete a backtest first');\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      const supabase = createClient(supabaseUrl!, supabaseAnonKey!);\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        throw new Error('Not authenticated');\n      }\n\n      // Get the symbols used in the backtest\n      const symbols = config.useCustomPairs && config.customPairs.trim()\n        ? config.customPairs\n            .split(/[\\n,]/)\n            .map(pair => pair.trim().toUpperCase())\n            .filter(pair => pair.length > 0)\n        : config.symbols;\n\n      const { data, error } = await supabase\n        .from('backtests')\n        .insert({\n          user_id: session.user.id,\n          name: config.name,\n          symbols: symbols,\n          custom_pairs: config.useCustomPairs ? config.customPairs : null,\n          exchange: config.exchange,\n          trading_type: config.tradingType,\n          timeframe: config.timeframe,\n          leverage: config.leverage,\n          risk_level: config.riskLevel,\n          trade_amount: config.tradeAmount,\n          stop_loss: config.stopLoss,\n          take_profit: config.takeProfit,\n          strategy: strategy,\n          strategy_config: advancedConfig,\n          start_date: config.startDate,\n          end_date: config.endDate,\n          status: 'completed',\n          progress: 100,\n          total_trades: results.total_trades || 0,\n          winning_trades: results.winning_trades || 0,\n          losing_trades: results.losing_trades || 0,\n          win_rate: results.win_rate || 0,\n          total_pnl: results.total_pnl || 0,\n          total_pnl_percentage: results.total_pnl_percentage || 0,\n          max_drawdown: results.max_drawdown || 0,\n          sharpe_ratio: results.sharpe_ratio || 0,\n          profit_factor: results.profit_factor || 0,\n          results_per_pair: results.results_per_pair || {},\n          completed_at: new Date().toISOString()\n        })\n        .select()\n        .single();\n\n      if (error) {\n        throw error;\n      }\n\n      alert('‚úÖ Backtest saved successfully!');\n      setBacktestId(data.id);\n    } catch (error: any) {\n      console.error('Error saving backtest:', error);\n      alert(`Failed to save backtest: ${error.message}`);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleExportCSV = () => {\n    if (!results) return;\n\n    let csv = 'Backtest Results\\n';\n    csv += `Backtest Name: ${config.name}\\n`;\n    csv += `Date Range: ${config.startDate} to ${config.endDate}\\n`;\n    csv += `Exchange: ${config.exchange.toUpperCase()}\\n`;\n    csv += `Trading Type: ${config.tradingType}\\n`;\n    csv += `Generated: ${new Date().toISOString()}\\n\\n`;\n\n    // Overview Summary\n    csv += 'OVERVIEW SUMMARY\\n';\n    csv += `Total Trades,${results.total_trades || 0}\\n`;\n    csv += `Winning Trades,${results.winning_trades || 0}\\n`;\n    csv += `Losing Trades,${results.losing_trades || 0}\\n`;\n    csv += `Win Rate,${(results.win_rate || 0).toFixed(2)}%\\n`;\n    csv += `Gross Profit,$${(results.gross_profit || 0).toFixed(2)}\\n`;\n    csv += `Gross Loss,$${(results.gross_loss || 0).toFixed(2)}\\n`;\n    csv += `Net Profit,$${(results.net_profit || results.total_pnl || 0).toFixed(2)}\\n`;\n    csv += `Total P&L %,${(results.total_pnl_percentage || 0).toFixed(2)}%\\n`;\n    csv += `Max Drawdown (%),${(results.max_drawdown || 0).toFixed(2)}%\\n`;\n    csv += `Max Drawdown ($),$${Math.abs(results.max_drawdown_value || 0).toFixed(2)}\\n`;\n    csv += `Avg Drawdown,${(results.avg_drawdown || 0).toFixed(2)}%\\n`;\n    csv += `Sharpe Ratio,${(results.sharpe_ratio || 0).toFixed(2)}\\n`;\n    csv += `Profit Factor,${(results.profit_factor || 0).toFixed(2)}\\n\\n`;\n    \n    // Position Size\n    csv += 'POSITION SIZE\\n';\n    csv += `Average Size,${(results.avg_position_size || 0).toFixed(4)}\\n`;\n    csv += `Min Size,${(results.min_position_size || 0).toFixed(4)}\\n`;\n    csv += `Max Size,${(results.max_position_size || 0).toFixed(4)}\\n\\n`;\n    \n    // Long/Short Breakdown\n    csv += 'LONG/SHORT BREAKDOWN\\n';\n    csv += `Long Trades,${results.long_trades || 0}\\n`;\n    csv += `Long Wins,${results.long_wins || 0}\\n`;\n    csv += `Long Losses,${results.long_losses || 0}\\n`;\n    csv += `Long Win Rate,${(results.long_win_rate || 0).toFixed(2)}%\\n`;\n    csv += `Long PnL,$${(results.long_pnl || 0).toFixed(2)}\\n`;\n    csv += `Short Trades,${results.short_trades || 0}\\n`;\n    csv += `Short Wins,${results.short_wins || 0}\\n`;\n    csv += `Short Losses,${results.short_losses || 0}\\n`;\n    csv += `Short Win Rate,${(results.short_win_rate || 0).toFixed(2)}%\\n`;\n    csv += `Short PnL,$${(results.short_pnl || 0).toFixed(2)}\\n\\n`;\n\n    // Per-Pair Results\n    if (results.results_per_pair && Object.keys(results.results_per_pair).length > 0) {\n      csv += 'PER-PAIR PERFORMANCE\\n';\n      csv += 'Pair,Trades,Win Rate,Total P&L,Long Trades,Short Trades,Long Wins,Long Losses,Short Wins,Short Losses,Gross Profit,Gross Loss\\n';\n      Object.entries(results.results_per_pair).forEach(([pair, data]: [string, any]) => {\n        csv += `${pair},${data.trades || 0},${(data.win_rate || 0).toFixed(2)}%,$${(data.pnl || 0).toFixed(2)},${data.long_trades || 0},${data.short_trades || 0},${data.long_wins || 0},${data.long_losses || 0},${data.short_wins || 0},${data.short_losses || 0},$${(data.gross_profit || 0).toFixed(2)},$${(data.gross_loss || 0).toFixed(2)}\\n`;\n      });\n    }\n\n    // Download CSV\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `backtest-${config.name.replace(/[^a-z0-9]/gi, '_').toLowerCase()}-${new Date().toISOString().split('T')[0]}.csv`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleExportJSON = () => {\n    if (!results) return;\n\n    const exportData = {\n      backtest_name: config.name,\n      date_range: {\n        start: config.startDate,\n        end: config.endDate\n      },\n      configuration: {\n        exchange: config.exchange,\n        trading_type: config.tradingType,\n        timeframe: config.timeframe,\n        leverage: config.leverage,\n        risk_level: config.riskLevel,\n        trade_amount: config.tradeAmount,\n        stop_loss: config.stopLoss,\n        take_profit: config.takeProfit,\n        symbols: config.useCustomPairs && config.customPairs.trim()\n          ? config.customPairs\n              .split(/[\\n,]/)\n              .map(pair => pair.trim().toUpperCase())\n              .filter(pair => pair.length > 0)\n          : config.symbols\n      },\n      strategy: strategy,\n      strategy_config: advancedConfig,\n      results: results,\n      generated_at: new Date().toISOString()\n    };\n\n    const jsonStr = JSON.stringify(exportData, null, 2);\n    const blob = new Blob([jsonStr], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `backtest-${config.name.replace(/[^a-z0-9]/gi, '_').toLowerCase()}-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleCreateBotFromResults = async () => {\n    if (!results || !botName.trim()) {\n      alert('Please enter a bot name');\n      return;\n    }\n\n    try {\n      // Navigate to create bot page with pre-filled data\n      navigate('/create-bot', { \n        state: { \n          fromBacktest: true,\n          backtestResults: results,\n          botName: botName,\n          backtestConfig: config,\n          backtestStrategy: strategy,\n          backtestAdvancedConfig: advancedConfig\n        } \n      });\n    } catch (error) {\n      console.error('Error creating bot from results:', error);\n      alert('Failed to create bot. Please try again.');\n    }\n  };\n\n  const popularSymbols = [\n    'BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'ADAUSDT', 'DOTUSDT', 'AVAXUSDT',\n    'BNBUSDT', 'XRPUSDT', 'MATICUSDT', 'LINKUSDT', 'UNIUSDT', 'LTCUSDT'\n  ];\n\n  const handleStartBacktest = async () => {\n    setIsRunning(true);\n    setError(null);\n    \n    try {\n      // Validate backtest name\n      if (!config.name.trim()) {\n        throw new Error('Please enter a backtest name');\n      }\n\n      // Parse custom pairs if enabled\n      let symbols: string[] = [];\n      if (config.useCustomPairs) {\n        if (!config.customPairs.trim()) {\n          throw new Error('Please enter at least one trading pair when using custom pairs');\n        }\n        \n        symbols = config.customPairs\n          .split(/[\\n,]/)\n          .map(pair => pair.trim().toUpperCase())\n          .filter(pair => pair.length > 0);\n        \n        if (symbols.length === 0) {\n          throw new Error('Please enter at least one valid trading pair (e.g., BTCUSDT, ETHUSDT)');\n        }\n\n        // Validate pair format (should be like BTCUSDT, ETHUSDT, etc.)\n        const invalidPairs = symbols.filter(pair => !/^[A-Z]{2,10}USDT$/i.test(pair));\n        if (invalidPairs.length > 0) {\n          throw new Error(`Invalid pair format: ${invalidPairs.join(', ')}. Pairs should be in format like BTCUSDT, ETHUSDT`);\n        }\n      } else {\n        if (config.symbols.length === 0) {\n          throw new Error('Please select at least one trading pair');\n        }\n        symbols = config.symbols;\n      }\n\n      const backtestData = {\n        name: config.name,\n        symbols,\n        customPairs: config.useCustomPairs ? config.customPairs : undefined,\n        exchange: config.exchange,\n        tradingType: config.tradingType,\n        timeframe: config.timeframe,\n        leverage: config.leverage,\n        riskLevel: config.riskLevel,\n        tradeAmount: config.tradeAmount,\n        stopLoss: config.stopLoss,\n        takeProfit: config.takeProfit,\n        strategy,\n        strategyConfig: advancedConfig,\n        startDate: config.startDate,\n        endDate: config.endDate,\n      };\n\n      console.log('Starting backtest with data:', backtestData);\n      console.log(`Parsed ${symbols.length} symbols:`, symbols);\n      \n      // Call real backtest engine API\n      setIsRunning(true);\n      setProgress(0);\n      \n      // Update progress periodically\n      const progressInterval = setInterval(() => {\n        setProgress(prev => {\n          if (prev >= 95) {\n            return prev;\n          }\n          return prev + 1;\n        });\n      }, 500);\n      \n      try {\n        const { data, error } = await supabase.functions.invoke('backtest-engine', {\n          body: backtestData\n        });\n        \n        clearInterval(progressInterval);\n        setProgress(100);\n        \n        if (error) {\n          throw new Error(error.message || 'Backtest failed');\n        }\n        \n        if (data.error) {\n          throw new Error(data.error);\n        }\n        \n        console.log('Backtest results:', data);\n        setResults(data);\n      } catch (apiError: any) {\n        clearInterval(progressInterval);\n        throw new Error(apiError.message || 'Failed to run backtest');\n      } finally {\n        setIsRunning(false);\n      }\n      \n    } catch (err: any) {\n      setError(err.message || 'Failed to start backtest');\n      setIsRunning(false);\n      setProgress(0);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header title=\"Multiple Pairs Backtesting\" />\n      \n      <div className=\"pt-16 pb-6 px-4\">\n        <div className=\"max-w-3xl mx-auto\">\n          <Card className=\"p-6\">\n            <h2 className=\"text-2xl font-bold mb-6\">üìä New Backtest</h2>\n\n            {/* Backtest Name */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Backtest Name\n              </label>\n              <input\n                type=\"text\"\n                value={config.name}\n                onChange={(e) => setConfig(prev => ({ ...prev, name: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Enter backtest name\"\n                required\n              />\n            </div>\n\n            {/* Trading Pairs Section */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                üìà Trading Pairs to Test\n              </label>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    name=\"pairMode\"\n                    checked={!config.useCustomPairs}\n                    onChange={() => setConfig(prev => ({ ...prev, useCustomPairs: false }))}\n                    className=\"mr-2\"\n                  />\n                  <label className=\"text-sm text-gray-700\">Select from popular pairs</label>\n                </div>\n                \n                {!config.useCustomPairs ? (\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\n                    {popularSymbols.map(symbol => (\n                      <button\n                        key={symbol}\n                        type=\"button\"\n                        onClick={() => {\n                          const newSymbols = config.symbols.includes(symbol)\n                            ? config.symbols.filter(s => s !== symbol)\n                            : [...config.symbols, symbol];\n                          setConfig(prev => ({ ...prev, symbols: newSymbols }));\n                        }}\n                        className={`px-3 py-2 rounded-lg border-2 ${\n                          config.symbols.includes(symbol)\n                            ? 'border-blue-500 bg-blue-50 text-blue-700'\n                            : 'border-gray-300 hover:border-gray-400'\n                        }`}\n                      >\n                        {symbol}\n                      </button>\n                    ))}\n                  </div>\n                ) : (\n                  <textarea\n                    value={config.customPairs}\n                    onChange={(e) => setConfig(prev => ({ ...prev, customPairs: e.target.value }))}\n                    placeholder=\"Enter pairs separated by comma or new line&#10;Example: BTCUSDT, ETHUSDT, SOLUSDT\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    rows={4}\n                  />\n                )}\n                \n                <div className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    name=\"pairMode\"\n                    checked={config.useCustomPairs}\n                    onChange={() => setConfig(prev => ({ ...prev, useCustomPairs: true }))}\n                    className=\"mr-2\"\n                  />\n                  <label className=\"text-sm text-gray-700\">Use custom pairs</label>\n                </div>\n\n                {(() => {\n                  // Get the actual selected symbols (either from config.symbols or parsed custom pairs)\n                  const displaySymbols = config.useCustomPairs && config.customPairs.trim()\n                    ? config.customPairs\n                        .split(/[\\n,]/)\n                        .map(pair => pair.trim().toUpperCase())\n                        .filter(pair => pair.length > 0)\n                    : config.symbols;\n                  \n                  return displaySymbols.length > 0 && (\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                      <p className=\"text-sm text-blue-700\">\n                        ‚úÖ Selected {displaySymbols.length} pair{displaySymbols.length !== 1 ? 's' : ''}: {displaySymbols.join(', ')}\n                      </p>\n                    </div>\n                  );\n                })()}\n              </div>\n            </div>\n\n            {/* Date Range */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Start Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={config.startDate}\n                  onChange={(e) => setConfig(prev => ({ ...prev, startDate: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  End Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={config.endDate}\n                  onChange={(e) => setConfig(prev => ({ ...prev, endDate: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </div>\n            </div>\n\n            {/* Exchange & Trading Type */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Exchange\n                </label>\n                <select\n                  value={config.exchange}\n                  onChange={(e) => setConfig(prev => ({ ...prev, exchange: e.target.value as any }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"bybit\">Bybit</option>\n                  <option value=\"okx\">OKX</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Trading Type\n                </label>\n                <select\n                  value={config.tradingType}\n                  onChange={(e) => setConfig(prev => ({ ...prev, tradingType: e.target.value as any }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"spot\">Spot Trading</option>\n                  <option value=\"futures\">Futures Trading</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Timeframe, Leverage, Trade Amount */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Timeframe\n                </label>\n                <select\n                  value={config.timeframe}\n                  onChange={(e) => setConfig(prev => ({ ...prev, timeframe: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"1m\">1 Minute</option>\n                  <option value=\"3m\">3 Minutes</option>\n                  <option value=\"5m\">5 Minutes</option>\n                  <option value=\"15m\">15 Minutes</option>\n                  <option value=\"30m\">30 Minutes</option>\n                  <option value=\"1h\">1 Hour</option>\n                  <option value=\"2h\">2 Hours</option>\n                  <option value=\"4h\">4 Hours</option>\n                  <option value=\"6h\">6 Hours</option>\n                  <option value=\"12h\">12 Hours</option>\n                  <option value=\"1d\">1 Day</option>\n                  <option value=\"1w\">1 Week</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Leverage\n                </label>\n                <input\n                  type=\"number\"\n                  value={config.leverage}\n                  onChange={(e) => setConfig(prev => ({ ...prev, leverage: parseInt(e.target.value) || 1 }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  min=\"1\"\n                  max=\"100\"\n                  step=\"1\"\n                  disabled={config.tradingType === 'spot'}\n                />\n                {config.tradingType === 'spot' && (\n                  <p className=\"text-xs text-gray-500 mt-1\">Leverage not available for spot trading</p>\n                )}\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Trade Amount ($)\n                </label>\n                <input\n                  type=\"number\"\n                  value={config.tradeAmount}\n                  onChange={(e) => setConfig(prev => ({ ...prev, tradeAmount: parseFloat(e.target.value) || 100 }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  min=\"10\"\n                  max=\"10000\"\n                  step=\"10\"\n                />\n              </div>\n            </div>\n\n            {/* Stop Loss & Take Profit */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Stop Loss (%)\n                </label>\n                <input\n                  type=\"number\"\n                  value={config.stopLoss}\n                  onChange={(e) => setConfig(prev => ({ ...prev, stopLoss: parseFloat(e.target.value) || 2.0 }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  min=\"0.5\"\n                  max=\"10\"\n                  step=\"0.5\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Maximum loss percentage before closing position\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Take Profit (%)\n                </label>\n                <input\n                  type=\"number\"\n                  value={config.takeProfit}\n                  onChange={(e) => setConfig(prev => ({ ...prev, takeProfit: parseFloat(e.target.value) || 4.0 }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  min=\"1\"\n                  max=\"20\"\n                  step=\"0.5\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Target profit percentage before closing position\n                </p>\n              </div>\n            </div>\n\n            {/* Cooldown Bars */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Cooldown (Bars)\n              </label>\n              <input\n                type=\"number\"\n                value={advancedConfig.cooldown_bars}\n                onChange={(e) => setAdvancedConfig(prev => ({ ...prev, cooldown_bars: parseInt(e.target.value) || 8 }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                min=\"1\"\n                max=\"100\"\n                step=\"1\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Number of bars to wait between trades (prevents overtrading)\n              </p>\n            </div>\n\n            {/* Allowed Trading Hours */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Allowed Trading Hours (EST)\n              </label>\n              <div className=\"border border-gray-300 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto\">\n                <div className=\"flex items-center mb-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={advancedConfig.allowed_hours_utc.length === 24}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setAdvancedConfig(prev => ({ \n                          ...prev, \n                          allowed_hours_utc: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],\n                          session_filter_enabled: false\n                        }));\n                      } else {\n                        setAdvancedConfig(prev => ({ \n                          ...prev, \n                          allowed_hours_utc: [],\n                          session_filter_enabled: true\n                        }));\n                      }\n                    }}\n                    className=\"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <span className=\"text-sm font-medium text-gray-700\">Select All (24/7)</span>\n                </div>\n                <div className=\"grid grid-cols-4 gap-2\">\n                  {Array.from({ length: 24 }, (_, i) => {\n                    const estHour = (i - 5 + 24) % 24;\n                    const isSelected = advancedConfig.allowed_hours_utc.includes(i);\n                    return (\n                      <label key={i} className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={isSelected}\n                          onChange={(e) => {\n                            if (e.target.checked) {\n                              setAdvancedConfig(prev => ({\n                                ...prev,\n                                allowed_hours_utc: [...prev.allowed_hours_utc, i].sort((a, b) => a - b),\n                                session_filter_enabled: true\n                              }));\n                            } else {\n                              setAdvancedConfig(prev => ({\n                                ...prev,\n                                allowed_hours_utc: prev.allowed_hours_utc.filter(h => h !== i),\n                                session_filter_enabled: prev.allowed_hours_utc.filter(h => h !== i).length > 0\n                              }));\n                            }\n                          }}\n                          className=\"mr-1 h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                        />\n                        <span className=\"text-xs text-gray-700\">\n                          {estHour.toString().padStart(2, '0')}:00 EST\n                        </span>\n                      </label>\n                    );\n                  })}\n                </div>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Select hours when bot is allowed to trade (stored in UTC, displayed in EST)\n              </p>\n            </div>\n\n            {/* Strategy Parameters Section */}\n            <Card className=\"p-6 mt-6\">\n              <h2 className=\"text-lg font-semibold mb-4 text-gray-900\">Strategy Parameters</h2>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    RSI Threshold\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={strategy.rsiThreshold}\n                    onChange={(e) => handleStrategyChange('rsiThreshold', parseFloat(e.target.value))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    min=\"30\"\n                    max=\"90\"\n                    step=\"5\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    ADX Threshold\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={strategy.adxThreshold}\n                    onChange={(e) => handleStrategyChange('adxThreshold', parseFloat(e.target.value))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    min=\"10\"\n                    max=\"50\"\n                    step=\"5\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    BB Width Threshold\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={strategy.bbWidthThreshold}\n                    onChange={(e) => handleStrategyChange('bbWidthThreshold', parseFloat(e.target.value))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    min=\"0.01\"\n                    max=\"0.1\"\n                    step=\"0.005\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    ATR Percentage\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={strategy.atrPercentage}\n                    onChange={(e) => handleStrategyChange('atrPercentage', parseFloat(e.target.value))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    min=\"1\"\n                    max=\"10\"\n                    step=\"0.5\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"mt-4\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={strategy.useMLPrediction}\n                    onChange={(e) => handleStrategyChange('useMLPrediction', e.target.checked)}\n                    className=\"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <span className=\"text-sm font-medium text-gray-700\">\n                    Enable ML Prediction\n                  </span>\n                </label>\n              </div>\n            </Card>\n\n            {/* Advanced Strategy Configuration */}\n            <Card className=\"p-6 mt-6\">\n              <button\n                type=\"button\"\n                onClick={() => setShowAdvanced(!showAdvanced)}\n                className=\"w-full flex items-center justify-between text-left\"\n              >\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  ‚öôÔ∏è Advanced Strategy Configuration\n                </h2>\n                <i className={`ri-arrow-${showAdvanced ? 'up' : 'down'}-s-line text-2xl text-gray-600`}></i>\n              </button>\n              \n              {showAdvanced && (\n                <div className=\"mt-6 space-y-6\">\n                  {/* Directional Bias */}\n                  <div className=\"border-l-4 border-purple-500 pl-4\">\n                    <h3 className=\"text-md font-semibold text-gray-800 mb-3\">üéØ Directional Bias</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Bias Mode\n                        </label>\n                        <select\n                          value={advancedConfig.bias_mode}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, bias_mode: e.target.value as any }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                        >\n                          <option value=\"auto\">Auto (Follow HTF Trend)</option>\n                          <option value=\"long-only\">Long Only</option>\n                          <option value=\"short-only\">Short Only</option>\n                          <option value=\"both\">Both Directions</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          HTF Timeframe\n                        </label>\n                        <select\n                          value={advancedConfig.htf_timeframe}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              htf_timeframe: e.target.value as typeof prev.htf_timeframe\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                        >\n                          {HTF_TIMEFRAME_OPTIONS.map(option => (\n                            <option key={option.value} value={option.value}>\n                              {option.label}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          HTF Trend Indicator\n                        </label>\n                        <select\n                          value={advancedConfig.htf_trend_indicator}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              htf_trend_indicator: e.target.value as typeof prev.htf_trend_indicator\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                        >\n                          {HTF_TREND_INDICATOR_OPTIONS.map(option => (\n                            <option key={option.value} value={option.value}>\n                              {option.label}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          ADX Min (HTF): {advancedConfig.adx_min_htf}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.adx_min_htf}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, adx_min_htf: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"15\"\n                          max=\"35\"\n                          step=\"1\"\n                        />\n                        <p className=\"text-xs text-gray-500\">Minimum ADX for trend confirmation</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Indicator Settings */}\n                  <div className=\"border-l-4 border-indigo-500 pl-4\">\n                    <h3 className=\"text-md font-semibold text-gray-800 mb-3\">üìê Indicator Settings</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          EMA Length\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.ema_fast_period ?? 50}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              ema_fast_period: parseInt(e.target.value) || 50\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={1}\n                          max={500}\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          ATR Length\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.atr_period ?? 14}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              atr_period: parseInt(e.target.value) || 14\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={1}\n                          max={200}\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          ATR TP Multiplier\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.atr_tp_multiplier ?? 3}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              atr_tp_multiplier: parseFloat(e.target.value) || 3\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={0.5}\n                          max={10}\n                          step={0.1}\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          ATR SL Multiplier\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.sl_atr_mult}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              sl_atr_mult: parseFloat(e.target.value) || prev.sl_atr_mult\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={0.5}\n                          max={5}\n                          step={0.1}\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          RSI Length\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.rsi_period ?? 14}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              rsi_period: parseInt(e.target.value) || 14\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={5}\n                          max={50}\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          RSI Overbought\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.rsi_overbought ?? 70}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              rsi_overbought: parseInt(e.target.value) || 70\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={50}\n                          max={100}\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          RSI Oversold\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={advancedConfig.rsi_oversold ?? 30}\n                          onChange={(e) =>\n                            setAdvancedConfig(prev => ({\n                              ...prev,\n                              rsi_oversold: parseInt(e.target.value) || 30\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                          min={0}\n                          max={50}\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Regime Filter */}\n                  <div className=\"border-l-4 border-blue-500 pl-4\">\n                    <h3 className=\"text-md font-semibold text-gray-800 mb-3\">üìä Regime Filter</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Regime Mode\n                        </label>\n                        <select\n                          value={advancedConfig.regime_mode}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, regime_mode: e.target.value as any }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                        >\n                          <option value=\"auto\">Auto Detect</option>\n                          <option value=\"trend\">Trend Only</option>\n                          <option value=\"mean-reversion\">Mean Reversion Only</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          ADX Trend Min: {advancedConfig.adx_trend_min}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.adx_trend_min}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, adx_trend_min: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"20\"\n                          max=\"35\"\n                          step=\"1\"\n                        />\n                        <p className=\"text-xs text-gray-500\">ADX ‚â• this = trending</p>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          ADX Mean Rev Max: {advancedConfig.adx_meanrev_max}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.adx_meanrev_max}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, adx_meanrev_max: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"15\"\n                          max=\"25\"\n                          step=\"1\"\n                        />\n                        <p className=\"text-xs text-gray-500\">ADX ‚â§ this = ranging</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Risk Management */}\n                  <div className=\"border-l-4 border-red-500 pl-4\">\n                    <h3 className=\"text-md font-semibold text-gray-800 mb-3\">üõ°Ô∏è Risk Management</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Risk Per Trade: {advancedConfig.risk_per_trade_pct}%\n                      </label>\n                      <input\n                        type=\"range\"\n                        value={advancedConfig.risk_per_trade_pct}\n                        onChange={(e) => setAdvancedConfig(prev => ({ ...prev, risk_per_trade_pct: parseFloat(e.target.value) }))}\n                        className=\"w-full\"\n                        min=\"0.25\"\n                        max=\"2.0\"\n                        step=\"0.25\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Daily Loss Limit: {advancedConfig.daily_loss_limit_pct}%\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.daily_loss_limit_pct}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, daily_loss_limit_pct: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"1\"\n                          max=\"10\"\n                          step=\"0.5\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Max Trades/Day: {advancedConfig.max_trades_per_day}\n                      </label>\n                      <input\n                        type=\"range\"\n                        value={advancedConfig.max_trades_per_day}\n                        onChange={(e) => setAdvancedConfig(prev => ({ ...prev, max_trades_per_day: parseInt(e.target.value) }))}\n                        className=\"w-full\"\n                        min=\"1\"\n                        max=\"200\"\n                        step=\"1\"\n                      />\n                    </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Weekly Loss Limit: {advancedConfig.weekly_loss_limit_pct}%\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.weekly_loss_limit_pct}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, weekly_loss_limit_pct: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"2\"\n                          max=\"15\"\n                          step=\"0.5\"\n                        />\n                        <p className=\"text-xs text-gray-500\">Auto-pause if weekly loss exceeds</p>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Max Concurrent Positions: {advancedConfig.max_concurrent}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.max_concurrent}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, max_concurrent: parseInt(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"1\"\n                          max=\"5\"\n                          step=\"1\"\n                        />\n                        <p className=\"text-xs text-gray-500\">Max open positions simultaneously</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Safety Features */}\n                  <div className=\"border-l-4 border-orange-500 pl-4 mt-6\">\n                    <h3 className=\"text-md font-semibold text-gray-800 mb-3\">üõ°Ô∏è Safety Features</h3>\n                    <p className=\"text-sm text-gray-600 mb-4\">\n                      Configure automatic safety limits to protect your bot from excessive losses.\n                    </p>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Max Consecutive Losses: {advancedConfig.max_consecutive_losses || 5}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.max_consecutive_losses || 5}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, max_consecutive_losses: parseInt(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"2\"\n                          max=\"10\"\n                          step=\"1\"\n                        />\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          Auto-pause bot after this many consecutive losses\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Exit Strategy */}\n                  <div className=\"border-l-4 border-green-500 pl-4\">\n                    <h3 className=\"text-md font-semibold text-gray-800 mb-3\">üéØ Exit Strategy</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          TP1 (R): {advancedConfig.tp1_r}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.tp1_r}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, tp1_r: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"0.5\"\n                          max=\"3.0\"\n                          step=\"0.25\"\n                        />\n                        <p className=\"text-xs text-gray-500\">First take profit (R = Risk units)</p>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          TP2 (R): {advancedConfig.tp2_r}\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.tp2_r}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, tp2_r: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"1.0\"\n                          max=\"5.0\"\n                          step=\"0.25\"\n                        />\n                        <p className=\"text-xs text-gray-500\">Second take profit</p>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          TP1 Size: {(advancedConfig.tp1_size * 100).toFixed(0)}%\n                        </label>\n                        <input\n                          type=\"range\"\n                          value={advancedConfig.tp1_size}\n                          onChange={(e) => setAdvancedConfig(prev => ({ ...prev, tp1_size: parseFloat(e.target.value) }))}\n                          className=\"w-full\"\n                          min=\"0.25\"\n                          max=\"0.75\"\n                          step=\"0.05\"\n                        />\n                        <p className=\"text-xs text-gray-500\">% to close at TP1</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Quick Presets */}\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                    <h4 className=\"font-semibold text-blue-900 mb-3\">‚ö° Quick Presets</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setAdvancedConfig({\n                          ...advancedConfig,\n                          bias_mode: 'auto',\n                          regime_mode: 'trend',\n                          risk_per_trade_pct: 0.5,\n                          max_trades_per_day: 6,\n                          tp1_r: 1.5,\n                          tp2_r: 3.0\n                        })}\n                        className=\"px-4 py-2 bg-white border-2 border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 font-medium\"\n                      >\n                        üê¢ Conservative\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => setAdvancedConfig({\n                          ...advancedConfig,\n                          bias_mode: 'auto',\n                          regime_mode: 'auto',\n                          risk_per_trade_pct: 0.75,\n                          max_trades_per_day: 8,\n                          tp1_r: 1.0,\n                          tp2_r: 2.0\n                        })}\n                        className=\"px-4 py-2 bg-white border-2 border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 font-medium\"\n                      >\n                        ‚öñÔ∏è Balanced\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => setAdvancedConfig({\n                          ...advancedConfig,\n                          bias_mode: 'both',\n                          regime_mode: 'auto',\n                          risk_per_trade_pct: 1.0,\n                          max_trades_per_day: 12,\n                          tp1_r: 0.8,\n                          tp2_r: 1.5\n                        })}\n                        className=\"px-4 py-2 bg-white border-2 border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50 font-medium\"\n                      >\n                        üöÄ Aggressive\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </Card>\n\n            {error && (\n              <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-red-700\">{error}</p>\n              </div>\n            )}\n\n            {/* Results Section */}\n            {results && (\n              <Card className=\"p-6 mt-6 bg-green-50 border-green-200\">\n                <h3 className=\"text-lg font-semibold mb-4 text-gray-900\">üìä Backtest Results</h3>\n                \n                {/* Overview Metrics */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{results.total_trades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Total Trades</div>\n                  </div>\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-2xl font-bold text-green-600\">{(results.win_rate || 0).toFixed(1)}%</div>\n                    <div className=\"text-sm text-gray-500\">Win Rate</div>\n                  </div>\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-2xl font-bold text-purple-600\">${(results.net_profit || results.total_pnl || 0).toFixed(2)}</div>\n                    <div className=\"text-sm text-gray-500\">Net Profit</div>\n                  </div>\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-2xl font-bold text-orange-600\">{(results.sharpe_ratio || 0).toFixed(2)}</div>\n                    <div className=\"text-sm text-gray-500\">Sharpe Ratio</div>\n                  </div>\n                </div>\n\n                {/* Profit Metrics */}\n                <div className=\"bg-white rounded-lg p-4 mb-6\">\n                  <h4 className=\"font-semibold mb-3 text-gray-800\">üí∞ Profit Breakdown</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <div className=\"text-lg font-bold text-green-600\">${(results.gross_profit || 0).toFixed(2)}</div>\n                      <div className=\"text-sm text-gray-500\">Gross Profit</div>\n                    </div>\n                    <div>\n                      <div className=\"text-lg font-bold text-red-600\">${(results.gross_loss || 0).toFixed(2)}</div>\n                      <div className=\"text-sm text-gray-500\">Gross Loss</div>\n                    </div>\n                    <div>\n                      <div className={`text-lg font-bold ${(results.net_profit || results.total_pnl || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                        ${(results.net_profit || results.total_pnl || 0).toFixed(2)}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">Net Profit</div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Position Size Metrics */}\n                <div className=\"bg-white rounded-lg p-4 mb-6\">\n                  <h4 className=\"font-semibold mb-3 text-gray-800\">üìè Position Size</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <div className=\"text-lg font-bold text-blue-600\">{(results.avg_position_size || 0).toFixed(4)}</div>\n                      <div className=\"text-sm text-gray-500\">Average Size</div>\n                    </div>\n                    <div>\n                      <div className=\"text-lg font-bold text-gray-600\">{(results.min_position_size || 0).toFixed(4)}</div>\n                      <div className=\"text-sm text-gray-500\">Min Size</div>\n                    </div>\n                    <div>\n                      <div className=\"text-lg font-bold text-gray-600\">{(results.max_position_size || 0).toFixed(4)}</div>\n                      <div className=\"text-sm text-gray-500\">Max Size</div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Long/Short Breakdown */}\n                <div className=\"bg-white rounded-lg p-4 mb-6\">\n                  <h4 className=\"font-semibold mb-3 text-gray-800\">üìà Long/Short Performance</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {/* Long Trades */}\n                    <div className=\"border-l-4 border-green-500 pl-4\">\n                      <h5 className=\"font-medium text-green-700 mb-2\">üîº Long Trades</h5>\n                      <div className=\"space-y-1 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Total:</span>\n                          <span className=\"font-semibold\">{results.long_trades || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Wins:</span>\n                          <span className=\"font-semibold text-green-600\">{results.long_wins || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Losses:</span>\n                          <span className=\"font-semibold text-red-600\">{results.long_losses || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Win Rate:</span>\n                          <span className=\"font-semibold\">{(results.long_win_rate || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between pt-2 border-t\">\n                          <span className=\"text-gray-600\">PnL:</span>\n                          <span className={`font-bold ${(results.long_pnl || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                            ${(results.long_pnl || 0).toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Short Trades */}\n                    <div className=\"border-l-4 border-red-500 pl-4\">\n                      <h5 className=\"font-medium text-red-700 mb-2\">üîΩ Short Trades</h5>\n                      <div className=\"space-y-1 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Total:</span>\n                          <span className=\"font-semibold\">{results.short_trades || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Wins:</span>\n                          <span className=\"font-semibold text-green-600\">{results.short_wins || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Losses:</span>\n                          <span className=\"font-semibold text-red-600\">{results.short_losses || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600\">Win Rate:</span>\n                          <span className=\"font-semibold\">{(results.short_win_rate || 0).toFixed(1)}%</span>\n                        </div>\n                        <div className=\"flex justify-between pt-2 border-t\">\n                          <span className=\"text-gray-600\">PnL:</span>\n                          <span className={`font-bold ${(results.short_pnl || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                            ${(results.short_pnl || 0).toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Drawdown Metrics */}\n                <div className=\"bg-white rounded-lg p-4 mb-6\">\n                  <h4 className=\"font-semibold mb-3 text-gray-800\">üìâ Drawdown Analysis</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <div className=\"text-lg font-bold text-red-600\">{(results.max_drawdown || 0).toFixed(2)}%</div>\n                      <div className=\"text-sm text-gray-500\">Max Drawdown (%)</div>\n                    </div>\n                    <div>\n                      <div className=\"text-lg font-bold text-red-600\">${Math.abs(results.max_drawdown_value || 0).toFixed(2)}</div>\n                      <div className=\"text-sm text-gray-500\">Max Drawdown ($)</div>\n                    </div>\n                    <div>\n                      <div className=\"text-lg font-bold text-orange-600\">{(results.avg_drawdown || 0).toFixed(2)}%</div>\n                      <div className=\"text-sm text-gray-500\">Avg Drawdown (%)</div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Additional Metrics */}\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6\">\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-xl font-bold text-green-600\">{results.winning_trades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Winning Trades</div>\n                  </div>\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-xl font-bold text-red-600\">{results.losing_trades || 0}</div>\n                    <div className=\"text-sm text-gray-500\">Losing Trades</div>\n                  </div>\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <div className=\"text-xl font-bold text-blue-600\">{(results.profit_factor || 0).toFixed(2)}</div>\n                    <div className=\"text-sm text-gray-500\">Profit Factor</div>\n                  </div>\n                </div>\n\n                {/* Per-Pair Results */}\n                {results.results_per_pair && Object.keys(results.results_per_pair).length > 0 && (\n                  <div className=\"mt-6\">\n                    <h4 className=\"font-semibold mb-3\">Performance by Pair</h4>\n                    <div className=\"space-y-2\">\n                      {Object.entries(results.results_per_pair).map(([pair, data]: [string, any]) => (\n                        <div key={pair} className=\"bg-white rounded-lg p-4 border border-gray-200\">\n                          <div className=\"flex justify-between items-start mb-2\">\n                            <div>\n                              <div className=\"font-medium text-lg\">{pair}</div>\n                              <div className=\"text-sm text-gray-500\">{data.trades || 0} trades</div>\n                            </div>\n                            <div className=\"text-right\">\n                              <div className={`font-bold text-lg ${(data.pnl || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                ${(data.pnl || 0).toFixed(2)}\n                              </div>\n                              <div className=\"text-sm text-gray-500\">{(data.win_rate || 0).toFixed(1)}% win</div>\n                            </div>\n                          </div>\n                          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3 pt-3 border-t border-gray-200 text-xs\">\n                            <div>\n                              <div className=\"text-gray-500\">Long: {data.long_trades || 0}</div>\n                              <div className=\"text-gray-500\">Short: {data.short_trades || 0}</div>\n                            </div>\n                            <div>\n                              <div className=\"text-green-600\">Wins: {((data.long_wins || 0) + (data.short_wins || 0))}</div>\n                              <div className=\"text-red-600\">Losses: {((data.long_losses || 0) + (data.short_losses || 0))}</div>\n                            </div>\n                            <div>\n                              <div className=\"text-gray-500\">Gross Profit:</div>\n                              <div className=\"text-green-600 font-semibold\">${(data.gross_profit || 0).toFixed(2)}</div>\n                            </div>\n                            <div>\n                              <div className=\"text-gray-500\">Gross Loss:</div>\n                              <div className=\"text-red-600 font-semibold\">${(data.gross_loss || 0).toFixed(2)}</div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Action Buttons Row */}\n                <div className=\"mt-6 pt-6 border-t border-green-300 space-y-3\">\n                  {/* Export/Save Buttons */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      onClick={handleSaveBacktest}\n                      disabled={isSaving}\n                      className=\"w-full\"\n                    >\n                      {isSaving ? (\n                        <>\n                          <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                          Saving...\n                        </>\n                      ) : (\n                        <>\n                          <i className=\"ri-save-line mr-2\"></i>\n                          Save to Database\n                        </>\n                      )}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      onClick={handleExportCSV}\n                      className=\"w-full\"\n                    >\n                      <i className=\"ri-file-download-line mr-2\"></i>\n                      Export CSV\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      onClick={handleExportJSON}\n                      className=\"w-full\"\n                    >\n                      <i className=\"ri-file-code-line mr-2\"></i>\n                      Export JSON\n                    </Button>\n                  </div>\n\n                  {/* Create Bot Button */}\n                  <Button\n                    type=\"button\"\n                    variant=\"primary\"\n                    onClick={() => setShowCreateBot(true)}\n                    className=\"w-full\"\n                  >\n                    <i className=\"ri-robot-add-line mr-2\"></i>\n                    Create Trading Bot from This Backtest\n                  </Button>\n                </div>\n              </Card>\n            )}\n\n            {/* Create Bot Modal */}\n            {showCreateBot && (\n              <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n                <Card className=\"w-full max-w-md p-6\">\n                  <h3 className=\"text-lg font-semibold mb-4\">Create Trading Bot from Backtest</h3>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Use this successful backtest to create a live trading bot with the same strategy.\n                  </p>\n                  \n                  <div className=\"mb-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Bot Name\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={botName}\n                      onChange={(e) => setBotName(e.target.value)}\n                      placeholder=\"Enter bot name\"\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n                    <div className=\"bg-gray-50 p-3 rounded-lg\">\n                      <div className=\"text-gray-500\">Win Rate</div>\n                      <div className=\"text-xl font-bold text-green-600\">{results?.win_rate?.toFixed(1)}%</div>\n                    </div>\n                    <div className=\"bg-gray-50 p-3 rounded-lg\">\n                      <div className=\"text-gray-500\">Total PnL</div>\n                      <div className=\"text-xl font-bold text-purple-600\">${results?.total_pnl?.toFixed(2)}</div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-3\">\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      onClick={() => setShowCreateBot(false)}\n                      className=\"flex-1\"\n                    >\n                      Cancel\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"primary\"\n                      onClick={handleCreateBotFromResults}\n                      className=\"flex-1\"\n                      disabled={!botName.trim()}\n                    >\n                      Create Bot\n                    </Button>\n                  </div>\n                </Card>\n              </div>\n            )}\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-4 mt-6\">\n              <Button\n                type=\"button\"\n                variant=\"secondary\"\n                onClick={() => navigate('/bots')}\n                className=\"flex-1\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"primary\"\n                onClick={handleStartBacktest}\n                loading={isRunning}\n                className=\"flex-1\"\n              >\n                {isRunning ? 'Running Backtest...' : 'üöÄ Start Backtest'}\n              </Button>\n            </div>\n\n            {/* Progress Bar */}\n            {isRunning && (\n              <Card className=\"p-6 mt-6\">\n                <div className=\"mb-2 flex justify-between\">\n                  <span className=\"text-sm font-medium text-gray-700\">Backtest Progress</span>\n                  <span className=\"text-sm font-medium text-blue-600\">{Math.floor(progress)}%</span>\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                  <div \n                    className=\"bg-blue-600 h-3 rounded-full transition-all duration-300\"\n                    style={{ width: `${progress}%` }}\n                  ></div>\n                </div>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  {(() => {\n                    // Get the actual symbol count being used in the backtest\n                    const symbolCount = config.useCustomPairs && config.customPairs.trim()\n                      ? config.customPairs\n                          .split(/[\\n,]/)\n                          .map(pair => pair.trim().toUpperCase())\n                          .filter(pair => pair.length > 0).length\n                      : config.symbols.length;\n                    return `Simulating trades across ${symbolCount} pair${symbolCount !== 1 ? 's' : ''}...`;\n                  })()}\n                </p>\n              </Card>\n            )}\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":["supabaseUrl","supabaseAnonKey","BacktestPage","navigate","useNavigate","config","setConfig","useState","strategy","setStrategy","advancedConfig","setAdvancedConfig","showAdvanced","setShowAdvanced","isRunning","setIsRunning","progress","setProgress","error","setError","backtestId","setBacktestId","results","setResults","showCreateBot","setShowCreateBot","botName","setBotName","isSaving","setIsSaving","handleStrategyChange","field","value","prev","handleSaveBacktest","supabase","createClient","session","symbols","pair","data","handleExportCSV","csv","blob","url","link","handleExportJSON","exportData","jsonStr","handleCreateBotFromResults","popularSymbols","handleStartBacktest","invalidPairs","backtestData","progressInterval","apiError","err","jsxs","jsx","Header","Card","e","symbol","newSymbols","s","displaySymbols","_","i","estHour","isSelected","a","b","h","HTF_TIMEFRAME_OPTIONS","option","HTF_TREND_INDICATOR_OPTIONS","Button","Fragment","_a","_b","symbolCount"],"mappings":"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"}