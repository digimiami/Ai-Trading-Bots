import{u as j,r as o,j as e}from"./index-B_DKnNr4.js";import{B as g}from"./Button-i-QX_6lf.js";import{C as b}from"./Card-B4GL0Lwj.js";import{H as N}from"./Header-DFpqWUr1.js";import{u as T}from"./useBots-cJUVd3N_.js";function L(){const i=j(),{createBot:p}=T(),[s,h]=o.useState({name:"",exchange:"bybit",symbol:"BTCUSDT",leverage:5,riskLevel:"medium",stopLoss:2,takeProfit:4}),[a,f]=o.useState({rsiThreshold:70,adxThreshold:25,bbWidthThreshold:.02,emaSlope:.5,atrPercentage:2.5,vwapDistance:1.2,momentumThreshold:.8,useMLPrediction:!0,minSamplesForML:100}),[c,m]=o.useState(!1),[u,x]=o.useState(null),v=["BTCUSDT","ETHUSDT","SOLUSDT","ADAUSDT","DOTUSDT","AVAXUSDT","BNBUSDT","XRPUSDT","MATICUSDT","LINKUSDT","UNIUSDT","LTCUSDT"],y=async r=>{r.preventDefault(),m(!0),x(null);try{const l={name:s.name,exchange:s.exchange,symbol:s.symbol,leverage:s.leverage,riskLevel:s.riskLevel,strategy:a,status:"stopped",pnl:0,pnlPercentage:0,totalTrades:0,winRate:0,lastTradeAt:void 0};console.log("Frontend: Sending bot data:",l),console.log("Frontend: Exchange value:",s.exchange,"Type:",typeof s.exchange),await p(l),i("/bots",{state:{message:`Bot "${s.name}" created successfully!`}})}catch(l){x(l.message||"Failed to create bot")}finally{m(!1)}},n=(r,l)=>{h(d=>({...d,[r]:l}))},t=(r,l)=>{f(d=>({...d,[r]:l}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(N,{title:"Create New Bot"}),e.jsx("div",{className:"pt-16 pb-6 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>i("/bots"),className:"mr-3 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Bot"})]}),u&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:u})]})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs(b,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Basic Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bot Name"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>n("name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bot name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange"}),e.jsxs("select",{value:s.exchange,onChange:r=>n("exchange",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"bybit",children:"Bybit"}),e.jsx("option",{value:"okx",children:"OKX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair"}),e.jsx("select",{value:s.symbol,onChange:r=>n("symbol",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:v.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leverage"}),e.jsxs("select",{value:s.leverage,onChange:r=>n("leverage",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:5,children:"5x"}),e.jsx("option",{value:10,children:"10x"}),e.jsx("option",{value:20,children:"20x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),e.jsxs("select",{value:s.riskLevel,onChange:r=>n("riskLevel",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Low Risk"}),e.jsx("option",{value:"medium",children:"Medium Risk"}),e.jsx("option",{value:"high",children:"High Risk"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stop Loss (%)"}),e.jsx("input",{type:"number",value:s.stopLoss,onChange:r=>n("stopLoss",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"10",step:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum loss percentage before closing position"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Take Profit (%)"}),e.jsx("input",{type:"number",value:s.takeProfit,onChange:r=>n("takeProfit",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"20",step:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target profit percentage before closing position"})]})]})]}),e.jsxs(b,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Strategy Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Threshold"}),e.jsx("input",{type:"number",value:a.rsiThreshold,onChange:r=>t("rsiThreshold",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"30",max:"90",step:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ADX Threshold"}),e.jsx("input",{type:"number",value:a.adxThreshold,onChange:r=>t("adxThreshold",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"10",max:"50",step:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BB Width Threshold"}),e.jsx("input",{type:"number",value:a.bbWidthThreshold,onChange:r=>t("bbWidthThreshold",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.01",max:"0.1",step:"0.005"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EMA Slope"}),e.jsx("input",{type:"number",value:a.emaSlope,onChange:r=>t("emaSlope",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.1",max:"2",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ATR Percentage"}),e.jsx("input",{type:"number",value:a.atrPercentage,onChange:r=>t("atrPercentage",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"10",step:"0.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VWAP Distance"}),e.jsx("input",{type:"number",value:a.vwapDistance,onChange:r=>t("vwapDistance",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.5",max:"3",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Momentum Threshold"}),e.jsx("input",{type:"number",value:a.momentumThreshold,onChange:r=>t("momentumThreshold",parseFloat(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0.1",max:"2",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Samples for ML"}),e.jsx("input",{type:"number",value:a.minSamplesForML,onChange:r=>t("minSamplesForML",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"50",max:"500",step:"25"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.useMLPrediction,onChange:r=>t("useMLPrediction",r.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable ML Prediction (fallback to rules until min samples)"})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{type:"button",variant:"secondary",onClick:()=>i("/bots"),className:"flex-1",children:"Cancel"}),e.jsx(g,{type:"submit",variant:"primary",loading:c,className:"flex-1",children:c?"Creating Bot...":"Create Bot"})]})]})]})})]})}export{L as default};
//# sourceMappingURL=page-BtGpMEad.js.map
